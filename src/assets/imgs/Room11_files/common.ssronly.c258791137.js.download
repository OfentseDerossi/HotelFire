($WP="undefined"!=typeof $WP?$WP:[]).push({id:"@ta/common.ssronly",d:["vendor-babel","vendor-react-libs","ta-platform","@ta/styleguide.skeleton","lithium-platform"],e:["./packages/common/ssronly/ssronly.jsx"],x:{"./packages/common/ssronly/ssronly.jsx":["ssrQueries","CsrPortal","default"]},m:{"./packages/common/ssronly/ssronly.jsx":function(e,t,r){"use strict";r.r(t);var n=r("@babel/runtime/helpers/esm/classCallCheck"),s=r.n(n),o=r("@babel/runtime/helpers/esm/createClass"),i=r.n(o),a=r("@babel/runtime/helpers/esm/possibleConstructorReturn"),l=r.n(a),p=r("@babel/runtime/helpers/esm/getPrototypeOf"),u=r.n(p),c=r("@babel/runtime/helpers/esm/inherits"),d=r.n(c),m=r("@babel/runtime/helpers/esm/assertThisInitialized"),h=r.n(m),v=r("@babel/runtime/helpers/esm/defineProperty"),f=r.n(v),b=r("react"),g=r("@ta/common.is-visible"),y=r("@ta/common.state"),E=r("@ta/common.responsive"),C=r("@ta/styleguide.skeleton"),k=r("@ta/common.radio"),S=r.n(k),_=r("react-dom"),T=r.n(_),V=(r("@ta/platform.import"),"common-ssronly-CsrPortal__children--3dvNO"),P=function e(t){return null},I=function(e){function t(e){var r;return s()(this,t),r=l()(this,u()(t).call(this,e)),e.portalComponent?r.state={rendercomp:e.portalComponent}:r.state={rendercomp:P(e)||null},r}return d()(t,e),i()(t,[{key:"componentDidMount",value:function e(){var t=this;this.props.importer&&!this.props.portalComponent&&this.props.importer().then(function(e){var r=e?e[t.props.export||"default"]:null;r&&r.load&&r.load(t.props.subprops||{}),r&&t.setState({rendercomp:r})})}},{key:"shouldComponentUpdate",value:function e(t,r){return!(!this.state.rendercomp&&!r.rendercomp)}},{key:"render",value:function e(){var t=this.props.className?"".concat("common-ssronly-CsrPortal__portal--2v9IC"," ").concat(this.props.className):"common-ssronly-CsrPortal__portal--2v9IC";if(!this.state.rendercomp)return b.createElement("div",{className:t,dangerouslySetInnerHTML:{__html:""},suppressHydrationWarning:!0});if(this.props.portalComponent)return b.createElement(this.props.portalComponent,this.props.subprops||{},this.props.children||null);var r=this.props.children?b.createElement("div",{className:V},this.props.children):null,n=this.state.rendercomp?b.createElement(this.state.rendercomp,this.props.subprops||{},r):null;return b.createElement("div",{className:t,"data-csrprops":null},n)}}]),t}(b.Component),N=function e(t){setTimeout(function(){throw t},0)},W=function e(t,n){r.e(n.bundle).then(function(e){var s=e&&e[n.export||"default"]||null;if(s){if(n.portalComponent=s,n.hasChildren){var o=t.querySelector(".".concat(V)),i=o&&o.innerHTML||"";n.children=b.createElement("div",{className:V,dangerouslySetInnerHTML:{__html:i}})}s.load&&s.load(n.subprops||{}),T.a.render(r("@ta/platform.runtime").wrapSubrootElement(b.createElement(I,n)),t)}})},L=I;r.d(t,"ssrQueries",function(){return H}),r.d(t,"CsrPortal",function(){return x});var O=function e(t){return null},R=function e(t){return t?"function"==typeof t.importer?t.importer():t.bundle?r.e(t.bundle):null:null},M=function e(t){},j=function(e){function t(e){var r;s()(this,t),r=l()(this,u()(t).call(this,e)),f()(h()(h()(r)),"vpListener",null),f()(h()(h()(r)),"loadTriggered",!1);var n=O(e);return r.state={rendercomp:null==n?void 0:n.default},M(e),r.vpListener=null,r}return d()(t,e),i()(t,[{key:"componentDidMount",value:function e(){this.startVpWatch(),!this.loadTriggered&&this.props.csrPreload&&R(this.props)}},{key:"shouldComponentUpdate",value:function e(t,r){return!(!this.state.rendercomp&&!r.rendercomp)}},{key:"componentWillUnmount",value:function e(){this.stopVpWatch()}},{key:"startVpWatch",value:function e(){var t=this;if(this.props.csrBreakpoint&&!this.vpListener&&!this.loadTriggered){var r,n,s,o=function e(r){var n=Object(E.getCategoryMinWidth)(t.props.csrBreakpoint)||0;(Object(E.getCategoryMinWidth)(r)||0)>=n&&t.triggerLoad()};o((null===(r=Object(y.getStore)().getState())||void 0===r?void 0:null===(n=r.meta)||void 0===n?void 0:null===(s=n.device)||void 0===s?void 0:s.viewportCategory)||""),this.loadTriggered||(this.vpListener=o,S()(E.RESPONSIVE_EVENTS_RADIO).on(E.RESPONSIVE_VIEWPORT_EVENT,o))}}},{key:"stopVpWatch",value:function e(){this.vpListener&&(S()(E.RESPONSIVE_EVENTS_RADIO).off(E.RESPONSIVE_VIEWPORT_EVENT,this.vpListener),this.vpListener=null)}},{key:"triggerLoad",value:function e(){var t=this;if(!this.loadTriggered){this.loadTriggered=!0,this.stopVpWatch();var r=R(this.props);r&&r.then(function(e){var r=null==e?void 0:e.default;r&&r.load&&r.load(t.props.subprops||{}),r&&t.setState({rendercomp:r})})}}},{key:"checkContainer",value:function e(t){this.startVpWatch(),t&&!this.loadTriggered&&("true"!==t.getAttribute("data-ssr-done")||this.props.csrIfEmpty&&!t.firstElementChild||!1!==this.props.csrIfSkeletons&&Object(C.elementContainsSkeletons)(t)?this.triggerLoad():function e(t){for(var r=t.querySelectorAll(".".concat("common-ssronly-CsrPortal__portal--2v9IC"))||[],n=0;n<r.length;n++)try{var s=r[n],o=s.getAttribute("data-csrprops");if(o){s.setAttribute("data-csrprops","");var i=JSON.parse(o);i&&i.bundle&&W(s,i)}}catch(e){N(e)}}(t))}},{key:"subRender",value:function e(t,r){var n=this;return t?b.createElement(g.HasBeenVisible,{onVisible:function e(){return n.triggerLoad()},threshold:this.props.csrVisibleThreshold||0},function(e){return n.subRender(!1,e)}):this.state.rendercomp?b.createElement("div",{className:"was-ssr-only",ref:r||null},b.createElement(this.state.rendercomp,this.props.subprops||{})):b.createElement("div",{ref:r||function(e){return n.checkContainer(e)},dangerouslySetInnerHTML:{__html:""},suppressHydrationWarning:!0})}},{key:"render",value:function e(){return this.subRender(!!this.props.csrWhenVisible,null)}}]),t}(b.Component),H=function e(t,r){var n;return((null===(n=O(r))||void 0===n?void 0:n.ssrQueries)||function(){return[]})(t,(null==r?void 0:r.subprops)||{})};j.stage=function(e,t,r){};var x=L;t.default=j}}});
//# sourceMappingURL=common.ssronly.c258791137.js.map