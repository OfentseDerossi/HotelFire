($WP="undefined"!=typeof $WP?$WP:[]).push({id:"@ta/tracking.interactions",d:["vendor-babel","vendor-react-libs","vendor-redux-libs","vendor-apollo-libs","ta-platform","@ta/common.localstorage"],e:["./packages/tracking/interactions/interactions.jsx"],x:{"./packages/tracking/interactions/interactions.jsx":["InteractionLogger","TrackingNamespaceContext","ItemIdContext","FeedSectionIdContext","HomeTrackingContext","ProfileTrackingContext","InboxTrackingContext","SearchTrackingContext","OnboardingTrackingContext","UgcDetailTrackingContext","FollowPlacementContext","SocialHotelsTrackingContext","FlightsSearchResultsContext","ItineraryContext","CrossSiteClickContext","SavingsTipsContext","RecommendedFolloweesImpressionIdContext","MixerImpressionContext","FollowTabTypeContext","GlobalNavTrackingContext","LogInteractionV4","CrossSiteClickInteractionLogger","FareCardInteractionLogger"]},m:{"./packages/tracking/interactions/interactions.jsx":function(e,n,t){"use strict";t.r(n);var r=t("@babel/runtime/helpers/esm/extends"),a=t.n(r),i=t("@babel/runtime/helpers/esm/objectWithoutProperties"),o=t.n(i),c=t("@babel/runtime/helpers/esm/objectSpread"),l=t.n(c),u=t("react"),s=t("react-redux"),d=t("react-apollo"),m=t("@ta/common.decode"),f=t.n(m),k=t("@ta/common.localstorage"),C=t.n(k),v=t("@ta/common.logging"),g=t.n(v),p=u.createContext(null),x=u.createContext(null),b=u.createContext({itemId:""}),h=u.createContext(null),I=u.createContext(null),w=u.createContext(null),T=u.createContext(null),E=u.createContext(null),y=u.createContext(null),S=u.createContext(null),N=u.createContext(null),D=u.createContext(null),F={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"LogInteractions"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"interactions"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"InteractionWithTimestampInput"}}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"clientRequestTimestamp"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Long"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"logInteractions"},arguments:[{kind:"Argument",name:{kind:"Name",value:"interactions"},value:{kind:"Variable",name:{kind:"Name",value:"interactions"}}},{kind:"Argument",name:{kind:"Name",value:"clientRequestTimestamp"},value:{kind:"Variable",name:{kind:"Name",value:"clientRequestTimestamp"}}}],directives:[]}]}}],loc:{start:0,end:211}};F.loc.source={body:"2f6863dd8a7e"};var R=F,j=u.createContext(null),M=u.createContext(null),O=u.createContext(null),L=u.createContext(null),U=u.createContext(null),P=u.createContext(null),H=function e(n){var t=C.a.get("interactionData");t&&(n({variables:{interactions:t,clientRequestTimestamp:(new Date).getTime()}}),C.a.remove("interactionData"))},V=function e(n,t,r){!function e(n){var t=C.a.get("interactionData");t||(t=[]);var r={eventTimestampMsClient:(new Date).getTime(),interaction:n};t.push(r),C.a.set("interactionData",t)}(t),function e(n){if(!n)return!1;var t=n.target,r=n.currentTarget;if(t&&r&&t instanceof HTMLElement){var a=t,i=!1;do{if(a instanceof HTMLElement&&a.dataset.encodedUrl){var o=f()(a.dataset.encodedUrl),c=document.createElement("a");c.href=o,a.parentElement instanceof HTMLElement&&(c.style.display="none",a.parentElement.appendChild(c)),a=c}if(a instanceof HTMLAnchorElement){var l=a;if(window&&window.location&&window.location.hostname&&window.location.hostname===l.hostname)return!0}i=a===r||i,a=a.parentElement}while(a&&!i)}return!1}(n)||H(r)},A=function e(n){var t=n.logInteraction,r=o()(n,["logInteraction"]);return u.useEffect(function(){H(t)}),function e(n,t){return u.createElement(h.Consumer,null,function(e){return"mixer"===e?function e(n,t){var r=t.children;return u.createElement(p.Consumer,null,function(e){return u.createElement(x.Consumer,null,function(t){return u.createElement(b.Consumer,null,function(a){return r(function r(i,o,c){var l=c||{},u={};switch(o){case"delete":case"linkedPoiScroll":case"overflowMenuClick":case"report":case"seeAll":case"shelfScroll":case"untag":case"untagConfirm":case"untagCancel":u[o]={feedSectionId:t};break;case"linkedPhotoClick":u[o]={feedSectionId:t},Object.assign(u[o],l);break;case"linkedPoiClick":u[o]={feedSectionId:t,placement:"HEADER"},Object.assign(u[o],l);break;case"feedClick":case"helpful":case"repost":case"share":case"unhelpful":case"follow":case"unfollow":case"userClick":case"save":case"dismiss":case"userReferenceClick":case"linkReferenceClick":case"linkedSnippetClick":case"batchGalleryClick":case"batchGalleryScroll":u[o]={feedSectionId:t,itemId:a.itemId},Object.assign(u[o],l);break;case"showMore":u[o]={mixerImpressionId:e},Object.assign(u[o],l);break;default:var s=o||"undefined";g.a.error("Unknown mixer interaction type: ".concat(s))}V(i,{mixer:u},n)})})})})}(n,t):"home"===e?function e(n,t){var r=t.children;return u.createElement(I.Consumer,null,function(e){return u.createElement(y.Consumer,null,function(t){return r(function r(a,i,o){var c=o||{},u={};u["unfollow"===i?"unFollow":i]=l()({},e,c,t),V(a,{home:u},n)})})})}(n,t):"profile"===e?function e(n,t){var r=t.children;return u.createElement(w.Consumer,null,function(e){return u.createElement(y.Consumer,null,function(t){return r(function r(a,i,o){var c=o||{},u={};u["unfollow"===i?"unFollow":i]=l()({},e,c,t),V(a,{profile:u},n)})})})}(n,t):"onboarding"===e?function e(n,t){var r=t.children;return u.createElement(S.Consumer,null,function(e){return r(function t(r,a,i){var o=i||{},c={};c[a]=l()({},o,e),V(r,{onboarding:c},n)})})}(n,t):"inbox"===e?function e(n,t){var r=t.children;return u.createElement(D.Consumer,null,function(e){return r(function t(r,a,i){var o=i||{},c={};switch(a){case"follow":case"unfollow":c[a]={},Object.assign(c[a],o),Object.assign(c[a],e);break;default:var l=a||"undefined";g.a.error("Unknown or not set up inbox interactionType: ".concat(l))}V(r,{inbox:c},n)})})}(n,t):"search"===e?function e(n,t){var r=t.children;return u.createElement(T.Consumer,null,function(e){return r(function t(r,a,i){var o=i||{},c={};switch(a){case"follow":case"unfollow":c[a]={},Object.assign(c[a],o),Object.assign(c[a],e);break;default:var l=a||"undefined";g.a.error("Unknown or not set up search interactionType: ".concat(l))}V(r,{search:c},n)})})}(n,t):"ugcDetail"===e?function e(n,t){var r=t.children,a=t.loggedInUserId;return u.createElement(E.Consumer,null,function(e){return r(function t(r,i,o){var c=o||{},u=a?{actorUserId:a}:{},s={};s["feedClick"===i?"ugcClick":i]=l()({},e,c,u),V(r,{ugcDetail:s},n)})})}(n,t):"hotelReviewServlet"===e?function e(n,t,r){var a=t.children;return u.createElement(N.Consumer,null,function(e){return a(function t(a,i,o){var c=o||{},u={};u[i]=l()({},c,e);var s={};s[r]=u,V(a,s,n)})})}(n,t,e):"flightsResults"===e?function e(n,t,r){var a=t.children;return u.createElement(O.Consumer,null,function(e){return u.createElement(L.Consumer,null,function(t){return u.createElement(U.Consumer,null,function(i){return a(function a(o,c,u){var s=u||{},d={};switch(c){case"filter":case"sort":d[c]=l()({},s,e);break;case"firstClick":case"viewDealClick":case"seatMapClick":case"airlineReviewExpand":case"airlineReviewClick":case"viewDealsExpand":case"amenitiesHover":case"segmentFilter":case"flyScoreHover":case"brandedFareHover":case"selfTransferHover":case"comboFareHover":d[c]=l()({},s,t,e);break;case"savingsTipClick":case"savingsTipExpand":d[c]=l()({},s,i,{searchId:(null==e?void 0:e.searchId)||""});break;default:var m=c||"undefined";g.a.error("Unknown or not set up search interactionType: ".concat(m))}var f={};f[r]=d,V(o,f,n)})})})})}(n,t,e):"flights"===e?function e(n,t,r){var a=t.children;return u.createElement(P.Consumer,null,function(e){return u.createElement(L.Consumer,null,function(t){return a(function a(i,o,c){var u=c||{},s={};switch(o){case"fareCardClick":s[o]=l()({},u,t);break;case"crossSiteClick":s[o]=l()({},u,e);break;default:var d=o||"undefined";g.a.error("Unknown or not set up search interactionType: ".concat(d))}var m={};m[r]=s,V(i,m,n)})})})}(n,t,e):"globalNav"===e?function e(n,t){var r=t.children;return u.createElement(j.Consumer,null,function(e){return r(function t(r,a,i){var o=i||{},c={};c[a]=l()({},o,e),V(r,{globalNav:c},n)})})}(n,t):"contentUploader"===e?function e(n,t){var r=t.children;return u.createElement(M.Consumer,null,function(e){return r(function t(r,a,i){var o=i||{},c={};c[a]=l()({},o,e),V(r,{contentUploader:c},n)})})}(n,t):"ownerNewsFeed"===e?function e(n,t){var r=t.children;return u.createElement(p.Consumer,null,function(e){return u.createElement(x.Consumer,null,function(t){return u.createElement(b.Consumer,null,function(a){return r(function r(i,o,c){var l=c||{},u={};switch(o){case"feedClick":case"howToRespondClick":case"makeFavoriteReviewClick":case"reportReviewClick":case"respondDirectMessageClick":case"respondReviewClick":u[o]={feedSectionId:t,itemId:a.itemId},Object.assign(u[o],l);break;case"listingPerformanceClick":case"adsPerformanceClick":u[o]={feedSectionId:t},Object.assign(u[o],l);break;case"ownersClick":case"managePhotosClick":case"restaurantReviewClick":case"managementCenterClick":case"adsManagerClick":u[o]={},Object.assign(u[o],l);break;case"showMore":u[o]={mixerImpressionId:e},Object.assign(u[o],l);break;default:g.a.error("Unknown ownerNewsFeed interaction type: ".concat(o))}V(i,{mixer:u},n)})})})})}(n,t):t.children(function(){})})}(t,r)},W=Object(s.connect)(function(e){return{loggedInUserId:e.auth.loggedInUserId,isReadonlyMode:e.meta.readonlyMode}})(function e(n){return n.isReadonlyMode?n.children(function(){}):u.createElement(d.Mutation,{mutation:R},function(e){return u.createElement(A,a()({},n,{logInteraction:e}))})}),q=u.createContext(null),G=u.createContext(null),$={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"LogInteractionV4"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"interaction"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"InteractionV4Input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"logInteractionV4"},arguments:[{kind:"Argument",name:{kind:"Name",value:"interaction"},value:{kind:"Variable",name:{kind:"Name",value:"interaction"}}}],directives:[]}]}}],loc:{start:0,end:111}};$.loc.source={body:"15da4aa6d267"};var z=$,B=function e(n){var t=n.children;return u.createElement(W,null,function(e){return t(function n(t,r){e(t,r)})})},J=function e(n){var t=n.children;return u.createElement(h.Provider,{value:"flights"},u.createElement(W,null,function(e){return t(function n(t,r,a,i,o){e(t,r,{fareCardImpressionId:a,pageviewId:i,sessionId:o})})}))};t.d(n,"InteractionLogger",function(){return W}),t.d(n,"TrackingNamespaceContext",function(){return h}),t.d(n,"ItemIdContext",function(){return b}),t.d(n,"FeedSectionIdContext",function(){return x}),t.d(n,"HomeTrackingContext",function(){return I}),t.d(n,"ProfileTrackingContext",function(){return w}),t.d(n,"InboxTrackingContext",function(){return D}),t.d(n,"SearchTrackingContext",function(){return T}),t.d(n,"OnboardingTrackingContext",function(){return S}),t.d(n,"UgcDetailTrackingContext",function(){return E}),t.d(n,"FollowPlacementContext",function(){return q}),t.d(n,"SocialHotelsTrackingContext",function(){return N}),t.d(n,"FlightsSearchResultsContext",function(){return O}),t.d(n,"ItineraryContext",function(){return L}),t.d(n,"CrossSiteClickContext",function(){return P}),t.d(n,"SavingsTipsContext",function(){return U}),t.d(n,"RecommendedFolloweesImpressionIdContext",function(){return y}),t.d(n,"MixerImpressionContext",function(){return p}),t.d(n,"FollowTabTypeContext",function(){return G}),t.d(n,"GlobalNavTrackingContext",function(){return j}),t.d(n,"LogInteractionV4",function(){return z}),t.d(n,"CrossSiteClickInteractionLogger",function(){return B}),t.d(n,"FareCardInteractionLogger",function(){return J})}}});
//# sourceMappingURL=tracking.interactions.7334d6fd72.js.map