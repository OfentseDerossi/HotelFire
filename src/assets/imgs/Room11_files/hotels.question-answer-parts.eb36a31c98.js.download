($WP="undefined"!=typeof $WP?$WP:[]).push({id:"@ta/hotels.question-answer-parts",d:["@ta/common.ajax","ta-platform","vendor-babel","vendor-react-libs","vendor-apollo-libs","vendor-redux-libs","lithium-platform","ta-common","@ta/overlays.managers","@ta/overlays.modal","@ta/hotels.review-list-parts"],e:["./packages/hotels/question-answer-parts/question-answer-parts.jsx"],x:{"./packages/hotels/question-answer-parts/AuthGated.jsx":["a"],"./packages/hotels/question-answer-parts/question-answer-parts.jsx":["answersAjax","AnswerProvider","AuthGated","PostingGuidelinesLink","TranslateModal"]},m:{"./node_modules/webpack/buildin/global.js":function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},"./packages/hotels/question-answer-parts/AuthGated.jsx":function(e,t,n){"use strict";(function(e){var a=n("@babel/runtime/helpers/esm/objectSpread"),s=n.n(a),o=(n("react"),n("react-redux"));t.a=Object(o.connect)(function(e,t){return s()({},t,{loggedInUserId:e.auth.loggedInUserId,csrfToken:e.auth.csrfToken,altSessId:e.auth.altSessId,isMobile:"MOBILE"===e.meta.device.viewportCategory})})(function t(n){var a=n.loggedInUserId,s=n.csrfToken,o=n.altSessId,i=n.call,l=n.isMobile;return(0,n.children)(function(){if(a)i({csrfToken:s,altSessId:o});else{var t={flow:"CORE_COMBINED",pid:-1,userRequestedForce:!0,onSuccess:function e(){return i({csrfToken:s,altSessId:o})}};e.require(["trjs!ta/registration/RegOverlay"],function(e){return e.showRegOverlay(null,null,l,t)})}})})}).call(this,n("./node_modules/webpack/buildin/global.js"))},"./packages/hotels/question-answer-parts/question-answer-parts.jsx":function(e,t,n){"use strict";n.r(t);var a=n("@ta/common.ajax"),s=n("@ta/common.tracking"),o=n.n(s),i=function e(t,n){t&&fetch("/AnswersAjax",{credentials:"same-origin",method:"POST",body:Object(a.formEncode)(t),headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}}).then(n)},l=function e(t,n,a,s){var l={altsessid:a.altSessionId||"",act:"av",pstid:n,vs:t,pid:-1,token:a.csrfToken,useJson:!0};i(l,s),o()({module:"faq",action:"click",context:1===t?"upvote":"downvote"})},r={submitAnswer:function e(t){var n=t.locationId,a=t.topicId,s=t.text,o=t.requestValidation,l=t.onResponse;if(s){var r={act:"ap",psttxt:s,tpcid:a,pid:-1,altsessid:o.altSessionId,token:o.csrfToken,lcid:n,"g-recaptcha-response":o.captchaResponse.token,geetest_challenge:o.captchaResponse.challenge,geetest_validate:o.captchaResponse.validate,geetest_seccode:o.captchaResponse.seccode,useJson:!0};i(r,l)}},submitQuestion:function e(t){var n=t.locationId,a=t.text,s=t.optIn,o=t.redirect,l=t.requestValidation,r=t.onResponse;if(a){var c={act:s?"ats":"at",topicText:a,detail:n,pid:-1,optIn:s,altsessid:l.altSessionId,token:l.csrfToken,"g-recaptcha-response":l.captchaResponse.token,geetest_challenge:l.captchaResponse.challenge,geetest_validate:l.captchaResponse.validate,geetest_seccode:l.captchaResponse.seccode,redirect:o};i(c,r)}},deleteAnswer:function e(t){var n=t.id,a=t.token,s=t.onResponse;n&&i({act:"dp",pstid:n,token:a},s)},deleteQuestion:function e(t){var n=t.id,a=t.token,s=t.onResponse;n&&i({act:"dt",tpcid:n,token:a},s)},upVote:function e(t){var n=t.postingId,a=t.requestValidation,s=t.onResponse;l(1,n,a,s)},downVote:function e(t){var n=t.postingId,a=t.requestValidation,s=t.onResponse;l(-1,n,a,s)}},c=n("@babel/runtime/helpers/esm/toConsumableArray"),u=n.n(c),d=n("react"),p=n("react-apollo"),m=function e(t){var n=t.topic,a=t.query,s=t.children,o=t.expanded,i=t.newPostingId,l=!(!i||n.topPosting&&n.topPosting.id===i),r=n.topPosting?[n.topPosting]:[];return d.createElement(p.Query,{query:a,variables:{fetchTopic:o,fetchPosting:l,topicId:o?n.id:null,postingId:i},errorPolicy:"all",fetchPolicy:"network-only"},function(e){var t=e.loading,a=e.data;if(t&&o){var i=[n.topPosting];return l&&i.unshift(null),o&&i.push.apply(i,u()(Array(n.postCount-1).fill(null))),s(i)}if(!a)return s(r);var c=l&&a.postings&&a.postings[0]?a.postings[0]:null,d=o&&a.topics&&a.topics[0]?a.topics[0].postings:r;return s(o||l?c?[c].concat(u()(d.filter(function(e){return e&&e.id!==c.id}))):d:d.length>0?[d[0]]:[])})},g=n("./packages/hotels/question-answer-parts/AuthGated.jsx"),h=n("@babel/runtime/helpers/esm/classCallCheck"),f=n.n(h),_=n("@babel/runtime/helpers/esm/createClass"),v=n.n(_),b=n("@babel/runtime/helpers/esm/possibleConstructorReturn"),w=n.n(b),k=n("@babel/runtime/helpers/esm/getPrototypeOf"),j=n.n(k),q=n("@babel/runtime/helpers/esm/inherits"),I=n.n(q),x=n("@babel/runtime/helpers/esm/assertThisInitialized"),E=n.n(x),y=n("@babel/runtime/helpers/esm/defineProperty"),P=n.n(y),O=n("@ta/common.i18n"),T=n("@ta/styleguide.icon"),R=n("@ta/overlays.managers"),G=n("@ta/common.routing"),A=function e(t){return d.createElement("ul",null,t.location&&t.location.geoName?d.createElement("li",{className:"hotels-question-answer-parts-PostingGuidelinesList__item--3wj_r"},Object(O.localize)("qa_guidelines_relevant_visit",{loc_name:t.location.geoName})):null,t.location&&t.location.parentGeoId?d.createElement("li",{className:"hotels-question-answer-parts-PostingGuidelinesList__item--3wj_r"},Object(O.unescaped)(Object(O.localize)("qa_guidelines_forums_new_tab",{forum_link:Object(G.buildUrl)({page:"ShowForum",g:t.location.parentGeoId})}))):null,d.createElement("li",{className:"hotels-question-answer-parts-PostingGuidelinesList__item--3wj_r"},Object(O.localize)("qa_guidelines_objective")),d.createElement("li",{className:"hotels-question-answer-parts-PostingGuidelinesList__item--3wj_r"},Object(O.localize)("qa_guidelines_links")),d.createElement("li",{className:"hotels-question-answer-parts-PostingGuidelinesList__item--3wj_r"},Object(O.unescaped)(Object(O.localize)("qa_guidelines_adhere_new_tab",{help_link:"https://www.tripadvisorsupport.com/hc/articles/201996887"}))))},L=n("@ta/overlays.modal"),N=function e(t){var n=t.modalName,a=t.location;return d.createElement(L.Modal,{name:n},d.createElement("div",{className:"hotels-question-answer-parts-PostingGuidelinesModal__title--dNz-_"},Object(O.localize)("qa_guidelines_before")),d.createElement("div",{className:"hotels-question-answer-parts-PostingGuidelinesModal__notice--3mgu8"},Object(O.localize)("qa_please_keep")),d.createElement(A,{location:a}))},C={guidelinesControl:"hotels-question-answer-parts-PostingGuidelinesLink__guidelinesControl--3gjtK",community:"hotels-question-answer-parts-PostingGuidelinesLink__community--3dIF_",linkText:"hotels-question-answer-parts-PostingGuidelinesLink__linkText--1hABE"},S=function(e){function t(){var e,n;f()(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return n=w()(this,(e=j()(t)).call.apply(e,[this].concat(s))),P()(E()(E()(n)),"state",{expand:!1}),P()(E()(E()(n)),"toggleExpansion",function(){n.setState(function(e){return{expand:!e.expand}})}),n}return I()(t,e),v()(t,[{key:"render",value:function e(){var t=this.props,n=t.theme,a=t.location,s=t.inlineExpansion,o=this.state.expand,i=n&&C[n]||C.guidelinesControl,l=o?"caret-up":"caret-down";return d.createElement(d.Fragment,null,d.createElement("div",{className:i,onClick:s?this.toggleExpansion:null},s?d.createElement("span",{className:C.linkText},Object(O.localize)("qa_posting_guidelines")):d.createElement(d.Fragment,null,d.createElement(R.Opener,{name:"posting_guidelines_".concat(a.locationId)},function(e){return d.createElement("span",{className:C.linkText,onClick:e},Object(O.localize)("qa_posting_guidelines"))}),d.createElement(N,{modalName:"posting_guidelines_".concat(a.locationId),location:a})),s?d.createElement(T.Icon,{name:l}):null),o?d.createElement(A,{location:a}):null)}}]),t}(d.Component);P()(S,"defaultProps",{theme:void 0,inlineExpansion:!1});var M=S,z=n("react-redux"),F=n("@ta/styleguide.loading"),V=n("@ta/hotels.review-list-parts"),U=function e(t){var n=t.locationId,s=t.topicId,o=t.postingId,i=t.contentLanguage,l=t.pageLanguage,r=t.children;if(i===l)return null;var c,u=function p(e){return e.replace(/^zh/,"zh-")}(i),m=["toverlay",n,s,o,u,l].join("-");return c=o?"/MachineTranslation?g=0&d=".concat(n,"&t=").concat(s,"&lp=").concat(o,"&page=posting&sl=").concat(u,"&tl=").concat(l):"/MachineTranslation?g=0&d=".concat(n,"&t=").concat(s,"&page=topic&sl=").concat(u,"&tl=").concat(l),d.createElement(d.Fragment,null,d.createElement(R.Opener,{name:m},r),d.createElement(L.Modal,{name:m},d.createElement(a.AjaxRequest,{url:c},function(e){var t=e.loading,n=e.data;return t?d.createElement(F.LoadingSpinner,null):d.createElement("div",{className:"hotels-question-answer-parts-TranslateModal__translateModal--3kbc1",dangerouslySetInnerHTML:{__html:n}})})))};U.defaultProps={postingId:void 0};var B=Object(z.connect)(function(e){return{pageLanguage:Object(V.contentLangFromState)(e)}})(U);n.d(t,"answersAjax",function(){return r}),n.d(t,"AnswerProvider",function(){return m}),n.d(t,"AuthGated",function(){return g.a}),n.d(t,"PostingGuidelinesLink",function(){return M}),n.d(t,"TranslateModal",function(){return B})}}});
//# sourceMappingURL=hotels.question-answer-parts.eb36a31c98.js.map