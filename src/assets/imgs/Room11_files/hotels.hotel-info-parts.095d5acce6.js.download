($WP="undefined"!=typeof $WP?$WP:[]).push({id:"@ta/hotels.hotel-info-parts",d:["vendor-babel","vendor-react-libs","vendor-redux-libs","@ta/common.grid","@ta/overlays.popover","@ta/common.drawer","lithium-platform","ta-common","@ta/overlays.tooltip","@ta/hotels.hotel-offers","@ta/common.metrics","vendor-apollo-libs"],e:["./packages/hotels/hotel-info-parts/hotel-info-parts.jsx"],x:{"./packages/hotels/hotel-info-parts/hotel-info-parts.jsx":["HotelDetailOffers","bindHotelDetailOffers","MetaPerfRecorder","bindMetaPerfRecorder","HotelDetailOffersHeader","HotelDetailNoAvailability","HotelWebsiteProvider","default"]},m:{"./packages/hotels/hotel-info-parts/hotel-info-parts.jsx":function(e,t,n){"use strict";n.r(t);var i=n("@babel/runtime/helpers/esm/objectSpread"),a=n.n(i),l=n("@babel/runtime/helpers/esm/toConsumableArray"),r=n.n(l),o=n("react"),s=n("react-redux"),d=n("@ta/common.grid"),c=n("@ta/overlays.popover"),m=n.n(c),u=n("@ta/common.drawer"),f=n.n(u),v=n("@ta/common.features"),p=n("@ta/styleguide.button"),h=n.n(p),b=n("@ta/overlays.tooltip"),k=n.n(b),y=n("@ta/common.i18n"),g=n("@ta/common.classnames"),O=n.n(g),_=n("@ta/hotels.hotel-offers"),N={renderAlert:void 0,renderOfferHeader:void 0,sponsoredListingData:void 0,renderHiddenMobile:void 0,priceDisclaimer:void 0,isInvalid:!1,lowestPrice:void 0},D=function e(t){var n=[].concat(r()(t.chevronOffers),r()(t.textLinkOffers),r()(t.hiddenOffers));return o.createElement(m.a,{below:!0,contents:function e(i){return o.createElement("div",{className:"hotels-hotel-info-parts-HotelDetailOffers__viewAllOverlay--1LQ2K",onClick:i},n.map(function(e,n){return o.createElement(o.Fragment,{key:"".concat(e.data&&e.data.contentId,"_").concat(n+0)},t.renderHidden(e))}))},closeButton:!1,arrowType:"small"},function(e,t,i,a){return o.createElement("div",{ref:e,className:"hotels-hotel-info-parts-HotelDetailOffers__viewAllLink--2evfI",onClick:a?i:t},Object(y.localize)("view_all_n_deals_plural",{0:n.length}),o.createElement("span",{className:"ui_icon caret-down"}))})};D.defaultProps=N;var H=function e(t){var n=[].concat(r()(t.chevronOffers),r()(t.textLinkOffers),r()(t.hiddenOffers)),i=t.renderHiddenMobile||t.renderHidden,a=t.lowestPrice?Object(y.localize)("view_all_deals_from_commerce_on_list_screen",{0:n.length,1:t.lowestPrice}):Object(y.localize)("view_all_n_deals_plural",{0:n.length});return o.createElement(f.a,{handle:function e(t,n){return o.createElement(h.a,{type:"secondary",size:"fullwidth",onClick:t},o.createElement("span",{className:"hotels-hotel-info-parts-HotelDetailOffers__mobexpand--spNMi"},n?Object(y.localize)("collapse_deals"):a))},initiallyExpanded:t.expandDealsByDefault},function e(){return o.createElement("div",null,n.map(function(e,t){return o.createElement(o.Fragment,{key:"".concat(e.data&&e.data.contentId,"_").concat(t+0)},i(e))}))})};H.defaultProps=N;var T=function e(t){var n=t.text,i=o.createElement(o.Fragment,null,n," ",Object(v.featureIsEnabled)("hamon_fr")?o.createElement("a",{href:"/pages/service.html"},Object(y.localize)("hotel_info_about_service")):null);return o.createElement(k.a,{message:i},function(e){return o.createElement("div",{ref:e,className:"hotels-hotel-info-parts-HotelDetailOffers__disclaimerLine--23tgB"},n)})},E=function e(t){var n=t.complete,i=0+t.chevronOffers.length;return Object(_.trackHRCugShown)([].concat(r()(t.chevronOffers),r()(t.textLinkOffers),r()(t.hiddenOffers))),o.createElement("div",{className:"hotels-hotel-info-parts-HotelDetailOffers__wrap--1UgUa"},t.renderAlert?t.renderAlert():null,o.createElement("div",{className:"premium_offers_area offers","data-hac-complete":n?"true":null,"data-is-any-available":t.isAnyOfferAvailable,"data-section-signature":"meta","data-sponsoredlisting":t.sponsoredListingData?JSON.stringify(t.sponsoredListingData):null},t.renderOfferHeader?t.renderOfferHeader():null,t.chevronOffers.map(function(e,n){return o.createElement(o.Fragment,{key:"".concat(e.data&&e.data.contentId,"_").concat(n+0)},1===t.chevronOffers.length?t.renderDominant(e):t.renderChevron(e))}),t.textLinkOffers.length<=0&&t.chevronOffers.length<=0?null:o.createElement("div",{className:"".concat("hotels-hotel-info-parts-HotelDetailOffers__secondary--2xbNX"," is-hidden-mobile")},t.textLinkOffers.length<=0?null:o.createElement(d.Columns,{multiline:!0,gaplessVertical:!0},t.textLinkOffers.map(function(e,n){return o.createElement(d.Column,{width:6,key:"".concat(e.provider,"_").concat(n+i)},t.renderTextLink(e))}),t.hiddenOffers.length<=0?null:o.createElement(d.Column,null,o.createElement(D,t))),t.priceDisclaimer?o.createElement(T,{text:t.priceDisclaimer}):null)),t.textLinkOffers.length<=0||t.isInvalid?null:o.createElement("div",{className:O()("hotels-hotel-info-parts-HotelDetailOffers__mobile_view_all--3vT9T","is-hidden-tablet")},o.createElement(H,t)),t.isInvalid?o.createElement("div",{className:"hotels-hotel-info-parts-HotelDetailOffers__invalidShade--1-LrD"}):null)};E.defaultProps=N;var x=function e(t,n){return function(){return n(t)}},w=function e(t,n){return function(e){return n(a()({},t,{offer:e}))}},L=function e(t,n){return t.listingFields.push("chevronOffers","textLinkOffers","hiddenOffers","complete","priceDisclaimer","sponsoredListingData","lowestPrice"),t.offerFields.push("data","priceText","isComparisonOffer","status"),Object(s.connect)(function(e,t){return a()({},t,{expandDealsByDefault:t.expandDealsByDefault||void 0!==e.route.expandDeals})})(function e(t){var i=Object(_.isAnyAvailable)(t),a=Object(_.isNoCommerce)(t);return t.listing?a&&n.renderNoCommerce?n.renderNoCommerce(t):t.listing.complete&&!i&&n.renderNoAvailability?n.renderNoAvailability(t):o.createElement(E,{chevronOffers:t.listing.chevronOffers||[],textLinkOffers:t.listing.textLinkOffers||[],hiddenOffers:t.listing.hiddenOffers||[],isAnyOfferAvailable:i,complete:!!t.listing.complete,priceDisclaimer:t.listing.priceDisclaimer,sponsoredListingData:t.listing.sponsoredListingData,lowestPrice:t.listing.lowestPrice,isInvalid:!!t.loading,renderAlert:n.renderAlert&&x(t,n.renderAlert),renderOfferHeader:n.renderOfferHeader&&x(t,n.renderOfferHeader),renderDominant:w(t,n.renderDominant),renderChevron:w(t,n.renderChevron),renderHidden:w(t,n.renderHidden),renderTextLink:w(t,n.renderTextLink),renderHiddenMobile:n.renderHiddenMobile&&w(t,n.renderHiddenMobile),expandDealsByDefault:t.expandDealsByDefault}):null})},A=E,I=n("@babel/runtime/helpers/esm/classCallCheck"),C=n.n(I),P=n("@babel/runtime/helpers/esm/createClass"),S=n.n(P),M=n("@babel/runtime/helpers/esm/possibleConstructorReturn"),R=n.n(M),j=n("@babel/runtime/helpers/esm/getPrototypeOf"),F=n.n(j),V=n("@babel/runtime/helpers/esm/inherits"),z=n.n(V),B=n("@babel/runtime/helpers/esm/assertThisInitialized"),U=n.n(B),W=n("@babel/runtime/helpers/esm/defineProperty"),Q=n.n(W),$=n("@ta/common.metrics"),q=/^https?:\/\/[a-z\-\.]+\.tripadvisor\.[a-z\-\.]+\/([A-Za-z_+]+)-/,J=function e(t){var n=t,i=function e(){n&&n()};return i.detach=function(){n=null},i},K=function(e){function t(e){var n;return C()(this,t),n=R()(this,F()(t).call(this,e)),Q()(U()(U()(n)),"populatedReady",void 0),Q()(U()(U()(n)),"clickableReady",void 0),Q()(U()(U()(n)),"completeReady",void 0),Q()(U()(U()(n)),"populatedTime",void 0),Q()(U()(U()(n)),"clickableTime",void 0),Q()(U()(U()(n)),"completeTime",void 0),Q()(U()(U()(n)),"metricsSent",void 0),Q()(U()(U()(n)),"timeoutHandler",void 0),n.completeReady=!!e.complete,n.populatedReady=!!e.populated,n.clickableReady=!!e.clickable,n.metricsSent=!1,n.timeoutHandler=J(function(){return n.idleProc()}),n}return z()(t,e),S()(t,[{key:"componentDidMount",value:function e(){setTimeout(this.timeoutHandler,0)}},{key:"componentDidUpdate",value:function e(){var t=!1;this.props.complete&&!this.completeReady&&(this.completeReady=!0,t=!0),this.props.populated&&!this.populatedReady&&(this.populatedReady=!0,t=!0),this.props.complete&&!this.clickableReady&&(this.clickableReady=!0,t=!0),t&&setTimeout(this.timeoutHandler,0)}},{key:"componentWillUnmount",value:function e(){this.timeoutHandler.detach()}},{key:"idleProc",value:function e(){if(this.props.populated){var t=Date.now();this.populatedTime||(this.populatedTime=t),this.props.clickable&&(this.clickableTime||(this.clickableTime=t),this.props.complete&&(this.completeTime||(this.completeTime=t)))}if(!this.metricsSent&&this.completeTime&&(this.metricsSent=!0,window.performance&&window.performance.timing)){var n=window.performance.timing,i=n.fetchStart;if(i){var a=n.domInteractive,l=this.props.page||"unknown",r=this.props.mode||"default",o=null;if("string"==typeof document.referrer){var s=q.exec(document.referrer);s&&(o=s[1])}var d=[l,r,o=o||"external"],c=[];a&&c.push({name:"nav_to_meta_active",value:a-i,labels:d}),this.populatedTime&&c.push({name:"nav_to_meta_filled",value:this.populatedTime-i,labels:d}),this.clickableTime&&c.push({name:"nav_to_meta_clickable",value:this.clickableTime-i,labels:d}),this.completeTime&&c.push({name:"nav_to_meta_complete",value:this.completeTime-i,labels:d}),Object($.recordMetrics)(c)}}}},{key:"render",value:function e(){return null}}]),t}(o.Component),X=function e(t){return t.listingFields.push("chevronOffers","complete"),t.offerFields.push("status"),Object(s.connect)(function e(t,n){var i,a,l,r,o,s=(null==t?void 0:null===(i=t.route)||void 0===i?void 0:i.page)||"unknown",d=window.__NAV_DATA_PROMISE__?"template":"normal",c=!!(null==n?void 0:null===(a=n.listing)||void 0===a?void 0:a.complete),m=c||!!(null==n?void 0:null===(l=n.listing)||void 0===l?void 0:l.chevronOffers);return{page:s,mode:d,populated:m,clickable:c||m&&!!(null==n?void 0:null===(r=n.listing)||void 0===r?void 0:null===(o=r.chevronOffers)||void 0===o?void 0:o.length),complete:c}})(K)},Z=K,G=function e(t){var n=t.text;return o.createElement("div",{className:"".concat("hotels-hotel-info-parts-HotelDetailOffersHeader__header--2lu6g"," is-hidden-mobile")},Object(y.unescaped)(n))},Y=function e(t){var n=t.text,i=t.buttonText,a=t.buttonLink,l=t.newTab;return o.createElement("div",{"data-section-signature":"meta"},o.createElement("div",{className:"".concat("hotels-hotel-info-parts-HotelDetailNoAvailability__header--o3sMi"," ").concat(i&&a?"":"hotels-hotel-info-parts-HotelDetailNoAvailability__nobutton--1rf1O")},Object(y.unescaped)(n)),i&&a?o.createElement("a",{className:"".concat("hotels-hotel-info-parts-HotelDetailNoAvailability__button--3knE0"," ui_button primary"),href:a,target:l?"_blank":null},i):null)};Y.defaultProps={buttonText:void 0,buttonLink:void 0,newTab:!1};var ee=Y,te=n("react-apollo"),ne={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"HotelWebsiteQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"locationId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"isMobile"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"commerceCountryId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"servletName"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"locations"},arguments:[{kind:"Argument",name:{kind:"Name",value:"locationIds"},value:{kind:"ListValue",values:[{kind:"Variable",name:{kind:"Name",value:"locationId"}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"locationId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"businessAdvantage"},arguments:[{kind:"Argument",name:{kind:"Name",value:"isMobile"},value:{kind:"Variable",name:{kind:"Name",value:"isMobile"}}},{kind:"Argument",name:{kind:"Name",value:"commerceCountryId"},value:{kind:"Variable",name:{kind:"Name",value:"commerceCountryId"}}},{kind:"Argument",name:{kind:"Name",value:"servletName"},value:{kind:"Variable",name:{kind:"Name",value:"servletName"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"contactLinks"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"contactLinkType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"linkUrl"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"obfuscate"},arguments:[]}]},{kind:"Field",name:{kind:"Name",value:"clickTrackingUrl"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"encode"},arguments:[]}]},{kind:"Field",name:{kind:"Name",value:"column"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cpc"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:464}};ne.loc.source={body:"4cd3d5d064fa"};var ie=ne,ae=Object(s.connect)(function(e){return{locationId:e.page.detailId,isMobile:"MOBILE"===e.meta.device.viewportCategory,commerceCountryId:e.meta.commerceCountryId,servletName:e.meta.initialServletName}})(function e(t){var n=t.locationId,i=t.isMobile,a=t.commerceCountryId,l=t.servletName,r=t.children;return o.createElement(te.Query,{query:ie,variables:{locationId:n,isMobile:i,commerceCountryId:a,servletName:l}},function(e){var t=e.data,n=t&&t.locations&&t.locations.length&&t.locations[0]||null,i=((null==n?void 0:n.businessAdvantage)||{}).contactLinks,a=i&&i.find(function(e){return"URL_HOTEL"===(null==e?void 0:e.contactLinkType)});return r(null==n?void 0:n.locationId,a)})});n.d(t,"HotelDetailOffers",function(){return A}),n.d(t,"bindHotelDetailOffers",function(){return L}),n.d(t,"MetaPerfRecorder",function(){return Z}),n.d(t,"bindMetaPerfRecorder",function(){return X}),n.d(t,"HotelDetailOffersHeader",function(){return G}),n.d(t,"HotelDetailNoAvailability",function(){return ee}),n.d(t,"HotelWebsiteProvider",function(){return ae}),t.default={}}}});
//# sourceMappingURL=hotels.hotel-info-parts.095d5acce6.js.map