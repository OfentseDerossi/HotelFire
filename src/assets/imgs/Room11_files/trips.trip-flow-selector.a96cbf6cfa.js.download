($WP="undefined"!=typeof $WP?$WP:[]).push({id:"@ta/trips.trip-flow-selector",d:["vendor-babel","vendor-react-libs","vendor-redux-libs","@ta/overlays.toast","@ta/common.webview","ta-platform","@ta/social.login-gate","@ta/social.onboarding-state","lithium-platform","@ta/trips.saver","@ta/trips.trip-types","@ta/trips.trip-constants","@ta/trips.tracking","@ta/trips.trip-util","@ta/trips.trip-toasts","@ta/common.localstorage","@ta/overlays.managers","@ta/overlays.modal","@ta/overlays.headers","vendor-apollo-libs","ta-common","@ta/trips.graphql","vendor-urql"],e:["./packages/trips/trip-flow-selector/index.jsx"],x:{"./packages/trips/trip-flow-selector/index.jsx":["TripFlowSelector","QueriedTripFlowSelector","RemoteSTATModalProvider"]},m:{"./packages/trips/trip-flow-selector/index.jsx":function(e,t,a){"use strict";a.r(t);var r,o=a("@babel/runtime/helpers/esm/extends"),n=a.n(o),i=a("@babel/runtime/helpers/esm/toConsumableArray"),s=a.n(i),l=a("@babel/runtime/helpers/esm/classCallCheck"),c=a.n(l),p=a("@babel/runtime/helpers/esm/createClass"),u=a.n(p),d=a("@babel/runtime/helpers/esm/possibleConstructorReturn"),v=a.n(d),m=a("@babel/runtime/helpers/esm/getPrototypeOf"),f=a.n(m),T=a("@babel/runtime/helpers/esm/inherits"),S=a.n(T),_=a("@babel/runtime/helpers/esm/assertThisInitialized"),E=a.n(_),h=a("@babel/runtime/helpers/esm/defineProperty"),g=a.n(h),b=a("react"),C=a("react-redux"),y=a("@ta/overlays.toast"),A=a("@ta/common.webview"),I=a("@ta/common.routing"),M=a("@ta/social.login-gate"),O=a("@ta/social.onboarding-state"),k=a("@ta/common.tracking"),P=a.n(k),j=a("@ta/common.features"),L=a("@ta/trips.saver"),D=a.n(L),w=(a("@ta/trips.trip-types"),a("@ta/trips.trip-constants")),N=a("@ta/trips.tracking"),U=a("@ta/trips.trip-util"),x=a("@ta/trips.trip-toasts"),R=a("@ta/common.localstorage"),F=a.n(R),q=a("@babel/runtime/helpers/esm/objectSpread"),G=a.n(q),B=a("@ta/overlays.managers"),V=a("@ta/overlays.modal"),Q=a("@ta/overlays.headers"),z=a("react-apollo"),H=a("@ta/styleguide.loading"),W=a("@ta/loading.error"),Y=a("@ta/common.i18n"),K=a("@ta/trips.graphql"),X=a("@ta/platform.import"),$=Object.freeze({DEFAULT:function e(){return Object(Y.localize)("stat_modal_save_to_trip_v2")},CREATE:function e(){return Object(Y.localize)("stat_modal_create_a_trip_v2")},SELECT:function e(){return Object(Y.localize)("select_trip_header")},SELECT_CREATE:function e(){return Object(Y.localize)("stat_modal_create_a_trip_v2")}}),Z=function e(t){var a=b.useContext(I.RouteContext).route,r="Trips"===(null==a?void 0:a.page),o=Object(K.selectQuery)("STAT_MODAL",r?"TRIP_DETAIL":t.placement);return b.createElement(z.Query,{query:null==o?void 0:o.query,displayName:null==o?void 0:o.displayName,notifyOnNetworkStatusChange:!0,fetchPolicy:"network-only",errorPolicy:"all",variables:{offset:0,limit:10,userId:t.userId,reference:Object(U.toReference)(t.saveObject),loadSavedTrips:!0,socialReference:Object(j.featureIsEnabled)("social_at_referencing_profile_links")},onCompleted:t.onQueryComplete},function(e){var a=e.data,r=e.loading,o=e.error,n=e.refetch,i=e.fetchMore,l=Object(j.featureIsEnabled)("trips_skip_check_whitelist_public_trips");return b.createElement(z.Query,{skip:l,query:K.GetUserAuthZInfo},function(e){var c,p,u,d=(null==a?void 0:a.paginatedTrips)||{},v=d.trips,m=void 0===v?[]:v,f=d.hasMore,T=void 0===f||f,S=(a||{}).savedTrips,_=void 0===S?[]:S;r?u=b.createElement(H.LoadingSpinner,{size:"large"}):!m&&o&&(u=b.createElement(W.LoadingErrorMessage,{refetch:n}));var E=new Set(_.map(function(e){return e.id}).filter(Boolean)),h=G()({},e),g=l||(null===(c=h.data)||void 0===c?void 0:null===(p=c.authzInfo)||void 0===p?void 0:p.canMakePublicTrip),C={loadingNode:u,tripList:m,saveSet:E,hasMore:T,getMoreTrips:function e(){return i({variables:{offset:(null==m?void 0:m.length)||0,loadSavedTrips:!1},updateQuery:function e(t,a){var r=a.fetchMoreResult;return r?Object.assign({},t,{paginatedTrips:{trips:[].concat(s()(t.paginatedTrips.trips),s()(r.paginatedTrips.trips)),hasMore:r.paginatedTrips.hasMore,__typename:t.paginatedTrips.__typename},savedTrips:t.savedTrips}):t}})},canMakePublicTrip:g};return t.children(C)})})},J=X.component.onUsage(((r=function e(){return a.e("@ta/trips.tracking")}).__PACKAGE__="@ta/trips.trip-flow-selector",r.__MODULE_ID__="@ta/trips.tracking",r.__MODULE_NAME__="@ta/trips.tracking",r.__BUNDLE_NAME__="@ta/trips.tracking",r.__GET_SYNC__=function(){return a.m["@ta/trips.tracking"]?a("@ta/trips.tracking"):null},r.__IS_LOADED__=function(){return void 0!==a.m["@ta/trips.tracking"]},r),"TripInteraction"),ee=X.component.onUsage(function(){var e=function e(){return a.e("@ta/trips.create-trip-modal")};return e.__PACKAGE__="@ta/trips.trip-flow-selector",e.__MODULE_ID__="@ta/trips.create-trip-modal",e.__MODULE_NAME__="@ta/trips.create-trip-modal",e.__BUNDLE_NAME__="@ta/trips.create-trip-modal",e.__GET_SYNC__=function(){return a.m["@ta/trips.create-trip-modal"]?a("@ta/trips.create-trip-modal"):null},e.__IS_LOADED__=function(){return void 0!==a.m["@ta/trips.create-trip-modal"]},e}(),"CreateTripWithAddItemModal",b.createElement("div",{className:"trips-trip-flow-selector-STATModal__loadingContainer--1tP79"},b.createElement(H.LoadingSpinner,{size:"large"}))),te=X.component.onUsage(function(){var e=function e(){return a.e("@ta/trips.create-trip-modal")};return e.__PACKAGE__="@ta/trips.trip-flow-selector",e.__MODULE_ID__="@ta/trips.create-trip-modal",e.__MODULE_NAME__="@ta/trips.create-trip-modal",e.__BUNDLE_NAME__="@ta/trips.create-trip-modal",e.__GET_SYNC__=function(){return a.m["@ta/trips.create-trip-modal"]?a("@ta/trips.create-trip-modal"):null},e.__IS_LOADED__=function(){return void 0!==a.m["@ta/trips.create-trip-modal"]},e}(),"CreateTripWithMoveItemModal",b.createElement("div",{className:"trips-trip-flow-selector-STATModal__loadingContainer--1tP79"},b.createElement(H.LoadingSpinner,{size:"large"}))),ae=X.component.onUsage(function(){var e=function e(){return a.e("@ta/trips.save-to-trip-modal")};return e.__PACKAGE__="@ta/trips.trip-flow-selector",e.__MODULE_ID__="@ta/trips.save-to-trip-modal",e.__MODULE_NAME__="@ta/trips.save-to-trip-modal",e.__BUNDLE_NAME__="@ta/trips.save-to-trip-modal",e.__GET_SYNC__=function(){return a.m["@ta/trips.save-to-trip-modal"]?a("@ta/trips.save-to-trip-modal"):null},e.__IS_LOADED__=function(){return void 0!==a.m["@ta/trips.save-to-trip-modal"]},e}(),"SaveToTripContent",b.createElement("div",{className:"trips-trip-flow-selector-STATModal__loadingContainer--1tP79"},b.createElement(H.LoadingSpinner,{size:"large"}))),re=function(e){function t(e){var a;return c()(this,t),a=v()(this,f()(t).call(this,e)),g()(E()(E()(a)),"onModalClose",function(){a.props.onClose(),a.setSplashLoad(!0)}),g()(E()(E()(a)),"clearSplashLoad",function(){a.setSplashLoad(!1)}),a.state={splashLoad:!0},a}return S()(t,e),u()(t,[{key:"setSplashLoad",value:function e(t){this.state.splashLoad!==t&&this.setState({splashLoad:t})}},{key:"render",value:function e(){var t=this,a=$[this.props.overlayState](),r=b.createElement(Q.TitleBar,{iconName:"suitcase",displayType:"LEFT_ALIGN_GRAY"},a),o=this.props,n=o.loggedInUserId,i=o.saveObject,s=o.modalName,l=o.placement;return b.createElement(V.Modal,{name:s,header:r,isFullBleed:!0,onClose:this.onModalClose},b.createElement(B.Opener,{name:s},function(e,a){return b.createElement(B.Closer,null,function(e){return b.createElement(Z,{userId:n,saveObject:i,onQueryComplete:function e(){a&&t.clearSplashLoad()},placement:l||"DEFAULT"},function(a){return a.loadingNode&&t.state.splashLoad?b.createElement("div",{className:"trips-trip-flow-selector-STATModal__loadingContainer--1tP79"},a.loadingNode):t.content(e,a)})})}))}},{key:"content",value:function e(t,a){var r=this,o=this.props,n=o.saveObject,i=o.lastSavedItem,s=o.trackingContext,l=o.onError,c=Object(U.toSavesObject)(i),p=b.createElement(J,{source:"trips",trackingContext:s,pageAsContext:!0,withSaveSession:!0},function(e){return b.createElement("div",{className:"trips-trip-flow-selector-STATModal__modalPadding--36qa6"},b.createElement(ee,{object:n,onMount:function t(){a.loadingNode||e({elementClick:{element:"createTrip"}})},onAddedToCreatedTrip:function e(a){r.props.statCallback("ADD","NEW",a,!0,!0),t()},onError:l,canMakePublicTrip:a.canMakePublicTrip,placement:r.props.placement||"DEFAULT"}))});switch(this.props.overlayState){case"DEFAULT":return 0===a.tripList.length?p:b.createElement(J,{source:"trips",trackingContext:s,pageAsContext:!0,withSaveSession:!0},function(e){return b.createElement(ae,{tripList:a.tripList,savedSet:a.saveSet,tripListBottom:a.loadingNode,onPaginate:a.getMoreTrips,hasMore:a.hasMore,saveObject:n,onMount:function t(){r.props.preventInteractionInMountedComponents||e({elementClick:{element:"stat"}})},onCreateTrip:function e(){r.props.onCreateTripClicked&&r.props.onCreateTripClicked()},tripAction:"SAVE",onRemovedFromTrip:function e(a,o,n){r.props.statCallback("REMOVE","EXISTING",a,o,n),t()},onSavedToTrip:function e(a,o,n){r.props.statCallback("ADD","EXISTING",a,o,n),t()},onError:l,placement:r.props.placement||"DEFAULT"})});case"CREATE":return p;case"SELECT":return c?b.createElement(J,{source:"trips",trackingContext:s,pageAsContext:!0,withSaveSession:!0},function(e){return b.createElement(ae,{tripList:a.tripList,savedSet:a.saveSet,tripListBottom:a.loadingNode,onPaginate:a.getMoreTrips,hasMore:a.hasMore,saveObject:c,onMount:function t(){e({elementClick:{element:"stat"}})},onCreateTrip:function e(){r.props.onSelectCreateTripClicked&&r.props.onSelectCreateTripClicked()},tripAction:"MOVE",onMovedToTrip:function e(a,o,n){r.props.statCallback("MOVE","EXISTING",a,o,n),t()},onRemovedFromTrip:function e(a,o,n){r.props.statCallback("REMOVE","EXISTING",a,o,n),t()},onError:l,placement:r.props.placement||"DEFAULT"})}):"";case"SELECT_CREATE":return i?b.createElement("div",{className:"trips-trip-flow-selector-STATModal__modalPadding--36qa6"},b.createElement(te,{item:i,onMovedToCreatedTrip:function e(a){r.props.statCallback("MOVE","NEW",a,!0,!0),t()},canMakePublicTrip:a.canMakePublicTrip,placement:this.props.placement||"DEFAULT"})):p;default:return""}}}]),t}(b.PureComponent);g()(re,"defaultProps",{placement:"DEFAULT"});var oe=re,ne=b.createContext(void 0),ie=ne.Consumer,se=ne.Provider,le=function(e){function t(e){var a;return c()(this,t),a=v()(this,f()(t).call(this,e)),g()(E()(E()(a)),"localModalSuffix","".concat(Math.random())),a.state={statProps:null,openCount:0,openModal:function e(){}},a}return S()(t,e),u()(t,[{key:"componentDidUpdate",value:function e(t,a){this.state.openCount>a.openCount&&this.state.openModal()}},{key:"setStatProps",value:function e(t,a){var r=a?{openModal:a,openCount:this.state.openCount+1}:{};this.setState(G()({statProps:t},r))}},{key:"render",value:function e(){var t=this,a=this.state.statProps,r=this.props,o=r.children,i=r.localStats,s=a||i,l=(s||{}).saveObject,c=void 0===l?{}:l,p="save-to-a-trip-modal-".concat(c.id,"-").concat(c.type,"-").concat(this.localModalSuffix),u=null===i?"RemoteStatModal":p;return b.createElement(b.Fragment,null,s&&b.createElement(oe,n()({},s,{modalName:u})),b.createElement(B.Opener,{name:u},function(e){return b.createElement(B.Closer,null,function(a){var r={name:u,open:e,close:a,setStatProps:t.setStatProps.bind(t)};return b.createElement(se,{value:r},o(r))})}))}}]),t}(b.PureComponent);g()(le,"defaultProps",{localStats:null});var ce=function(e){function t(){var e,a;c()(this,t);for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return a=v()(this,(e=f()(t)).call.apply(e,[this].concat(o))),g()(E()(E()(a)),"remoteProps",null),a}return S()(t,e),u()(t,[{key:"displayChildren",value:function e(t){var a=this;return this.remoteProps=t,this.props.children(t.name,t.close,function e(r){var o=G()({},a.props.statProps,{overlayState:r||a.props.statProps.overlayState});t.setStatProps(o,t.open)}.bind(this))}},{key:"componentDidUpdate",value:function e(t){var a,r,o;(null==t?void 0:null===(a=t.statProps)||void 0===a?void 0:a.overlayState)!==(null===(r=this.props)||void 0===r?void 0:null===(o=r.statProps)||void 0===o?void 0:o.overlayState)&&this.remoteProps&&this.remoteProps.setStatProps(this.props.statProps)}},{key:"render",value:function e(){var t=this;return b.createElement(ie,null,function(e){return e?t.displayChildren(e):b.createElement(le,{localStats:t.props.statProps},function(e){return t.displayChildren(e)})})}}]),t}(b.PureComponent),pe=["Profile","HomeFeed","Trips","TripsWebview","Home"],ue=function(e){function t(e){var a;return c()(this,t),a=v()(this,f()(t).call(this,e)),g()(E()(E()(a)),"launchToast",void 0),g()(E()(E()(a)),"removeToast",void 0),g()(E()(E()(a)),"openSTATModal",void 0),g()(E()(E()(a)),"removeHash",function(){if(a.hasPopStatHash()){var e=window.location.toString();if(e.indexOf("#")>0){var t=e.substring(0,e.indexOf("#"));window.history.replaceState({},document.title,t)}}}),g()(E()(E()(a)),"hasPopStatHash",function(){var e,t;return"#POPSTAT"===(null===(e=window)||void 0===e?void 0:null===(t=e.location)||void 0===t?void 0:t.hash)}),g()(E()(E()(a)),"popStatEnabled",function(){return a.props.allowPopStatModal&&a.hasPopStatHash()&&Object(j.featureIsEnabled)("trips_pop_stat_modal")}),g()(E()(E()(a)),"onComplete",function(e){a.props.onComplete&&a.props.onComplete(e),a.props.resetSaveSession(),a.removeHash()}),g()(E()(E()(a)),"onModalClose",function(){a.setState({overlayState:"DEFAULT",preventInteractionInMountedComponents:!1}),a.props.resetSaveSession(),a.removeHash()}),g()(E()(E()(a)),"onCreateTripClicked",function(){a.setState({overlayState:"CREATE"})}),g()(E()(E()(a)),"onSelectCreateTripClicked",function(){a.setState({overlayState:"SELECT_CREATE"})}),g()(E()(E()(a)),"onUndoRemoveAction",function(e){a.launchTripToast(Object(x.viewTripToast)(e,"SAVED")),a.setState({overlayState:"DEFAULT"}),a.onComplete(!0)}),g()(E()(E()(a)),"getFirstCommentBody",function(e){var t=e.comments;return t&&t.length>0?t[0].body:null}),g()(E()(E()(a)),"openFlow",function(e,t,r){return function(){var o=Object(U.toSavesObject)(a.props.object);if(o){if(!A.NativeBridge.isNativeWebview()||!A.NativeBridge.isActionSupported("presentSavesModal",2))return r().then(function(){var r=a.getMostRecentlyAddedToTrip();return!a.props.active&&r&&"savesItem"!==o.type?t(r):e(),a.state.overlayState});var n=o.id,i=o.type,s=o.originalObject,l=a.getFirstCommentBody(a.props.object);A.NativeBridge.showSavesModal({id:n,type:i,note:l,originalObject:s&&{type:s.type,id:s.id}})}}}),g()(E()(E()(a)),"onSuccessfulAutosave",function(e,t,r){a.launchTripToast(Object(x.autoSavedToTripToast)(e,function e(){a.setState({overlayState:"SELECT"}),r("SELECT")},a.removeToast)),a.setState({overlayState:"DEFAULT",lastAutosavedItem:t}),a.onComplete(!0)}),g()(E()(E()(a)),"onSuccessfulSave",function(e,t){a.setState({overlayState:"DEFAULT",preventInteractionInMountedComponents:!0}),a.launchTripToast(Object(x.viewTripToast)(e,t)),a.setMostRecentlyAddedToTrip(e.id),a.props.attemptOnboarding&&a.props.setFireOnboarding(!1,"SAVE_ACTION"),a.onComplete(!0)}),g()(E()(E()(a)),"onSaveError",function(e){a.launchTripToast(Object(x.tripsErrorTripToast)(e))}),a.state={overlayState:"DEFAULT",lastAutosavedItem:null,preventInteractionInMountedComponents:!1},a}return S()(t,e),u()(t,[{key:"componentDidMount",value:function e(){this.openSTATModal&&this.popStatEnabled()&&(this.props.logInteraction({elementClick:{element:"autoPopStat"}}),this.openSTATModal())}},{key:"launchTripToast",value:function e(t){this.launchToast&&this.launchToast.apply(this,s()(t))}},{key:"showUndoRemoveToast",value:function e(t){var a=Object(U.toSavesObject)(this.props.object);a&&this.launchTripToast(Object(x.removeFromTripToast)(t,a,this.props.placement,this.onUndoRemoveAction))}},{key:"setMostRecentlyAddedToTrip",value:function e(t){F.a.set(w.MOST_RECENTLY_ADDED_TO_TRIP,{tripId:t,userId:this.props.loggedInUserId},144e5)}},{key:"getMostRecentlyAddedToTrip",value:function e(){if(this.popStatEnabled())return null;var t=F.a.get(w.MOST_RECENTLY_ADDED_TO_TRIP);return t&&t.userId===this.props.loggedInUserId?t.tripId:null}},{key:"render",value:function e(){var t=this;if(!Object(j.featureIsEnabled)("trips_bookmark"))return null;var a=this.props,r=a.children,o=a.logInteraction,n=a.puid,i=a.object,s=a.preventInteractionPropagation,l=a.trackingContext,c=a.loggedInUserId,p=a.placement,u=a.resaveTrip,d=a.saveSessionTracking,v=Object(U.toSavesObject)(i);if(!v)return null;var m={modalName:"",saveObject:v,loggedInUserId:c,overlayState:this.state.overlayState,lastSavedItem:this.state.lastAutosavedItem,trackingContext:l,onCreateTripClicked:this.onCreateTripClicked,onSelectCreateTripClicked:this.onSelectCreateTripClicked,onClose:this.onModalClose,onError:this.onSaveError,preventInteractionInMountedComponents:this.state.preventInteractionInMountedComponents,statCallback:function e(a,r,o,n,i){"REMOVE"===a?(t.showUndoRemoveToast(o),t.onComplete(i)):"NEW"===r?t.onSuccessfulSave(o,"CREATED"):n&&t.onSuccessfulSave(o,"SAVED")},placement:p};return b.createElement(I.RouteConsumer,null,function(e){var a=e.route;return b.createElement(b.Fragment,null,b.createElement(M.SocialLoginGate,{tracking:{source:"trips",element:"ITEM_SAVE_LOGIN",attributes:{context:a?Object(N.getInteractionsContext)(a.page):void 0,puid:n,saveType:v.type&&v.type.toUpperCase(),detailId:v.id&&"".concat(v.id),tripId:null==u?void 0:u.id,sessionType:"SAVE",sessionUuid:d.sessionUuid,sessionOrder:d.sessionOrder}},pid:a&&a.page&&pe.includes(a.page)?40439:39766,flow:"SAVES_COMBINED"},function(e){return b.createElement(ce,{statProps:m},function(n,i,l){return b.createElement(b.Fragment,null,b.createElement(D.a,{object:v,onSave:function e(a,r){o({modalSuccess:{element:"quickSave"}}),t.onSuccessfulAutosave(a,r,l)},placement:p,onError:t.onSaveError},function(n){return t.openSTATModal=t.openFlow(l,n,e),b.createElement("span",{onClick:function e(r){r.stopPropagation(),r.preventDefault(),!s&&c&&o({elementClick:{element:"item_save",tripId:null==u?void 0:u.id}});var n=t.props.active?"is_saved":"not_saved";P()({action:"saveCTA_click",module:"Trips|".concat(a.page),context:"Trips|".concat(v.type,"|").concat(n)})}},r(t.openSTATModal))}))})}),b.createElement(y.Toaster,null,function(e,a){return t.launchToast=e,t.removeToast=a,null}))})}}]),t}(b.Component);g()(ue,"defaultProps",{preventInteractionPropagation:!1,attemptOnboarding:!0,onComplete:void 0,trackingContext:void 0,placement:void 0,allowPopStatModal:!1});var de=Object(C.connect)(function e(t){return{loggedInUserId:t.auth.loggedInUserId}},function e(){return{setFireOnboarding:O.ACTIONS.setShouldFire}})(function e(t){return b.createElement(N.SaveSessionProvider,null,function(e,a){return b.createElement(N.TripInteraction,{source:"trips",trackingContext:t.trackingContext,saveObject:Object(U.toSavesObject)(t.object),withSaveSession:!0,pageAsContext:!0},function(r,o){return b.createElement(ue,n()({},t,{saveSessionTracking:e,resetSaveSession:a,logInteraction:r,puid:o}))})})}),ve=a("@babel/runtime/helpers/esm/slicedToArray"),me=a.n(ve),fe=a("urql"),Te=a("@ta/common.logging"),Se=a.n(Te),_e=new(a("@ta/common.state").PrivateStateAccessor)("is-saved-state",{savedMap:{}}),Ee=function e(t,a){return"".concat(t).concat(a)},he={updateSaved:function e(t,a,r){return _e.action({type:"UPDATE_SAVED",saveId:t,saveType:a,isSaved:r})}};_e.setReducerIfUnset(function(e,t){var a=e.savedMap,r=t.saveId,o=t.saveType,n=t.isSaved,i=t.type,s=G()({},a);return r&&o&&"UPDATE_SAVED"===i&&(s[Ee(r,o)]=n),{savedMap:s}});var ge,be=function e(t,a){return!0===t||!1===t?t:a},Ce=function e(t){switch(null==t?void 0:t.page){case"Home":return"HOME";case"Profile":return"PROFILE";case"Trips":return(null==t?void 0:t.tripId)?"TRIP_DETAIL":"TRIPS";default:return"DEFAULT"}},ye=function e(t,a){return t===K.LocationStatistics?a.locationId:t===K.AttractionStatistics?a.attractionProductId:a.id};(ge=Object(j.featureIsEnabled)("hr_urql")?function e(t){var a=t.object,r=t.preventInteractionPropagation,o=t.trackingContext,n=t.children,i=t.isActive,s=t.updateSaved,l=t.trip,c=t.allowPopStatModal,p=b.useContext(I.RouteContext).route,u=!1;Object(j.featureIsEnabled)("trips_bookmark")||(u=!0);var d=Object(U.toSavesObject)(a);d||(Se.a.error("An invalid saves object was passed to QueriedTripFlowSelector"),u=!0);var v=d&&Object(U.objectStatisticQuery)(d)||{},m=v&&null===be(i,null)&&!u,f=Object(fe.useQuery)({query:v.query,variables:v.variables,pause:!m}),T=me()(f,1)[0];return b.useEffect(function(){if(T.data&&!T.fetching&&d){var e=T.data&&T.data.savesObjects&&T.data.savesObjects[0];if(e){var t=ye(v.query,e),a=e.socialStatistics,r=void 0===a?{}:a,o=t===d.id&&!!r.isSaved;s(d.id,d.type,o)}}},[T.fetching]),u?null:b.createElement(de,{object:a,active:!!i,preventInteractionPropagation:r,trackingContext:o,onComplete:function e(t){d&&s(d.id,d.type,t)},placement:Ce(p),resaveTrip:l,allowPopStatModal:c},function(e){return n(e,!!i)})}:function e(t){var a=t.object,r=t.preventInteractionPropagation,o=t.trackingContext,n=t.children,i=t.isActive,s=t.updateSaved,l=t.trip,c=t.allowPopStatModal,p=b.useContext(I.RouteContext).route;if(!Object(j.featureIsEnabled)("trips_bookmark"))return null;var u=Object(U.toSavesObject)(a);if(!u)return Se.a.error("An invalid saves object was passed to QueriedTripFlowSelector"),null;var d=Object(U.objectStatisticQuery)(u)||{},v=d&&null===be(i,null);return b.createElement(z.Query,{query:d.query,variables:d.variables,skip:!v,onCompleted:function e(t){if(v){var a=t&&t.savesObjects&&t.savesObjects[0];if(a){var r=ye(d.query,a),o=a.socialStatistics,n=void 0===o?{}:o,i=r===u.id&&!!n.isSaved;s(u.id,u.type,i)}}}},function(){return b.createElement(de,{object:a,active:!!i,preventInteractionPropagation:r,trackingContext:o,onComplete:function e(t){s(u.id,u.type,t)},placement:Ce(p),resaveTrip:l,allowPopStatModal:c},function(e){return n(e,!!i)})})}).defaultProps={object:null,trackingContext:void 0,allowPopStatModal:!1};var Ae=Object(C.connect)(function(e,t){var a,r,o=function e(t,a){var r=a?Ee(a.id,a.type):"";return _e.getFrom(t).savedMap[r]}(e,Object(U.toSavesObject)(t.object)),n=null===(a=t.object)||void 0===a?void 0:null===(r=a.socialStatistics)||void 0===r?void 0:r.isSaved,i=be(o,n);return{loggedInUserId:e.auth.loggedInUserId,isActive:i}},{updateSaved:he.updateSaved})(ge);a.d(t,"TripFlowSelector",function(){return de}),a.d(t,"QueriedTripFlowSelector",function(){return Ae}),a.d(t,"RemoteSTATModalProvider",function(){return le})}}});
//# sourceMappingURL=trips.trip-flow-selector.a96cbf6cfa.js.map