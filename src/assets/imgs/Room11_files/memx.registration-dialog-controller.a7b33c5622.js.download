($WP="undefined"!=typeof $WP?$WP:[]).push({id:"@ta/memx.registration-dialog-controller",d:["vendor-babel","vendor-react-libs","@ta/memx.google-onetap","@ta/memx.ta-twotap","@ta/memx.facebook-onetap","@ta/memx.google-onetap-api","vendor-redux-libs","@ta/hotels.trip-search-autopop","lithium-platform","ta-platform","@ta/memx.registration-dialog-utils"],e:["./packages/memx/registration-dialog-controller/RegistrationDialogController.jsx"],x:{"./packages/memx/registration-dialog-controller/RegistrationDialogController.jsx":["default"]},m:{"./packages/memx/registration-dialog-controller/RegistrationDialogController.jsx":function(e,t,o){"use strict";o.r(t);var i=o("@babel/runtime/helpers/esm/classCallCheck"),a=o.n(i),n=o("@babel/runtime/helpers/esm/possibleConstructorReturn"),s=o.n(n),r=o("@babel/runtime/helpers/esm/getPrototypeOf"),l=o.n(r),g=o("@babel/runtime/helpers/esm/createClass"),d=o.n(g),c=o("@babel/runtime/helpers/esm/inherits"),p=o.n(c),u=o("@babel/runtime/helpers/esm/assertThisInitialized"),m=o.n(u),b=o("@babel/runtime/helpers/esm/defineProperty"),h=o.n(b),_=o("react"),D=o("@ta/memx.google-onetap"),f=o.n(D),R=o("@ta/memx.ta-twotap"),T=o.n(R),O=o("@ta/memx.facebook-onetap"),v=o.n(O),k=o("@ta/memx.google-onetap-api"),x=o.n(k),w=o("react-redux"),y=o("@ta/hotels.trip-search-autopop"),E=o.n(y),S=o("@ta/common.features"),A=o("@ta/common.radio"),C=o.n(A),I=o("@ta/common.tracking"),N=o.n(I),M=o("@ta/memx.registration-dialog-utils"),P="google_onetap",j="ta_twotap",L="facebook_onetap",G=["CORE_COMBINED","CONTENT_SUBMISSION","VOX","MEMX_CORE_COMBINED"],U=[D.GOOGLE_PID,40563,40600],F=function(e){function t(e){var o;return a()(this,t),o=s()(this,l()(t).call(this,e)),h()(m()(m()(o)),"onGoogleOneTapDismiss",function(){o.trackAction("registration_dialog_google_onetap_dismissed"),Object(M.setRegDialogDismissed)()}),h()(m()(m()(o)),"onGoogleOneTapTriggerNext",function(){o.trackAction("registration_dialog_google_onetap_trigger_next"),o.setState({dialogType:L})}),h()(m()(m()(o)),"onFacebookOneTapDismiss",function(){o.trackAction("registration_dialog_facebook_onetap_dismissed"),Object(M.setRegDialogDismissed)()}),h()(m()(m()(o)),"onFacebookOneTapTriggerNext",function(){o.trackAction("registration_dialog_facebook_onetap_trigger_next"),o.setState({dialogType:j})}),h()(m()(m()(o)),"onTaTwoTapDismiss",function(){o.trackAction("registration_dialog_ta_twotap_dismissed"),o.setState({dialogType:null}),Object(M.setRegDialogDismissed)()}),h()(m()(m()(o)),"onTaTwoTapTriggerNext",function(){o.trackAction("registration_dialog_ta_twotap_trigger_next")}),h()(m()(m()(o)),"onRegistrationOverlayShown",function(e,t){U.includes(t)||G.includes(e.toUpperCase())&&Object(S.featureIsEnabled)("google_onetap_inline")&&o.setState({dialogsDisabled:!0})}),h()(m()(m()(o)),"setupRegDialog",function(){if(C()("Onboarding").on("loginSuccess",o.disableRegDialog),C()("registration-overlay").on("shown",o.onRegistrationOverlayShown),M.HOTEL_SERVLETS.includes(o.props.servlet)||"ShowUserReviews"===o.props.servlet||"MobileShowUserReviews"===o.props.servlet){if(C()("DatePicker").on("clicked",o.disableRegDialog),C()("global-nav").on("sidebarOpened",o.disableRegDialog),C()("hotels-sort-filter-entry").on("openSort",o.disableRegDialog),C()("hotels-sort-filter-entry").on("openFilters",o.disableRegDialog),C()("hr-persistent-footer").on("show",o.disableRegDialog),C()("h-map").on("open-trigger-clicked",o.disableRegDialog),C()("h-map").on("toggle-trigger-clicked",o.disableRegDialog),C()("rooms-guests").on("popped",o.disableRegDialog),o.props.defaultDates&&!E.a.wasDismissed(o.props.detailPage)&&"MOBILE"===o.props.viewportCategory)return C()("rooms-guests").on("firstUserUpdate",o.enableRegDialog),C()("picker-autoadvance").on("flow-complete",o.enableRegDialog),void C()("pop-calendar").on("dismissed",o.enableRegDialog);C()("responsiveStayDates").on("calendarInteracted",o.disableRegDialog)}if(!Object(M.shouldIgnoreAdhesionUnit)()){var e=window.googletag||{cmd:[]};return e.cmd.push(function(){e.pubads().addEventListener("slotRenderEnded",function(e){(null==e?void 0:e.advertiserId)!==M.ADHESION_COLLAPSE_ADVERTISER_ID&&o.setState({adhesionRendered:!0}),o.enableRegDialog()})}),C()("cpm_mw_adhesion").on("ad_closed",function(){o.setState({adhesionRendered:!1})}),void setTimeout(o.enableRegDialog,4e3)}o.enableRegDialog()}),h()(m()(m()(o)),"enableRegDialog",function(){null===o.state.dialogType&&o.setState({dialogType:P})}),h()(m()(m()(o)),"disableRegDialog",function(){null!==o.state.dialogType&&o.setState({dialogType:null})}),o.state={dialogType:null,adhesionRendered:!1,dialogsDisabled:!1},o}return p()(t,e),d()(t,null,[{key:"isQualtricsEnabled",value:function e(){return new Promise(function(e){Object(S.featureIsEnabled)("qualtrics_surveys_any")&&window.require(["ta/support/Qualtrics"],function(t){e(t.seenThisPageView()||t.canDisplaySmart()||t.canDisplay())}),e(!1)})}}]),d()(t,[{key:"componentDidMount",value:function e(){var o=this;this.props.isMember||Object(M.shouldSuppressRegistrationDialog)()||t.isQualtricsEnabled().then(function(e){e||(o.trackAction("registration_dialog_requested"),o.setupRegDialog())})}},{key:"componentDidUpdate",value:function e(t){!t.isMember&&this.props.isMember&&this.disableRegDialog()}},{key:"trackAction",value:function e(t){N()({module:"registration_dialog",action:t,context:"".concat(this.props.servlet||"unknown")})}},{key:"isAdhesionRendered",value:function e(){return Object(M.doesAdExistOnPage)()||this.state.adhesionRendered}},{key:"render",value:function e(){var t=this,o=this.state,i=o.dialogsDisabled,a=o.dialogType;if(i)return null;switch(a){case P:return this.trackAction("registration_dialog_google_onetap_rendered"),_.createElement(x.a,{pid:D.GOOGLE_PID,flow:D.GOOGLE_FLOW,trackingModule:D.LOADER_TRACKING_MODULE,render:function e(o){return _.createElement(f.a,{googleApi:o,onDismiss:t.onGoogleOneTapDismiss,triggerNext:t.onGoogleOneTapTriggerNext,adhesionRendered:t.isAdhesionRendered()})}});case L:return this.trackAction("registration_dialog_facebook_onetap_rendered"),_.createElement(v.a,{onDismiss:this.onFacebookOneTapDismiss,triggerNext:this.onFacebookOneTapTriggerNext,adhesionRendered:this.isAdhesionRendered()});case j:return this.trackAction("registration_dialog_ta_twotap_rendered"),_.createElement(T.a,{onDismiss:this.onTaTwoTapDismiss,triggerNext:this.onTaTwoTapTriggerNext,adhesionRendered:this.isAdhesionRendered()});default:return null}}}]),t}(_.Component);t.default=Object(w.connect)(function(e){var t;return{isMember:e.auth.isMember,viewportCategory:e.meta.device.viewportCategory,servlet:e.meta.initialServletName,defaultDates:!!(e.travelerInfo.hotels||{}).defaultDates,detailPage:!!(null===(t=e.page)||void 0===t?void 0:t.detailId)}})(F)}}});
//# sourceMappingURL=memx.registration-dialog-controller.a7b33c5622.js.map