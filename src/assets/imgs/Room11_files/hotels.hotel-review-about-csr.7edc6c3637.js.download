($WP="undefined"!=typeof $WP?$WP:[]).push({id:"@ta/hotels.hotel-review-about-csr",d:["vendor-react-libs","ta-common","@ta/styleguide.skeleton","@ta/overlays.tooltip","lithium-platform","@ta/common.ajax","@ta/hotels.hr-about-layout","@ta/common.text","ta-platform","@ta/hotels.obfuscation","@ta/hotels.partner-content-shared-components","vendor-babel","@ta/events.window-resize","@ta/common.photo-carousel","@ta/hotels.media-album-parts","@ta/media-viewer.opener","@ta/public.business-listing"],e:["./packages/hotels/hotel-review-about-csr/hotel-review-about-csr.jsx"],x:{"./packages/hotels/hotel-review-about-csr/hotel-review-about-csr.jsx":["Awards","awardsCanRender","Description","descriptionCanRender","PartnerDescription","partnerDescriptionCanRender","partnerDescriptionsEnabled","Photos","HotelLinks","default"]},m:{"./packages/hotels/hotel-review-about-csr/hotel-review-about-csr.jsx":function(e,t,n){"use strict";n.r(t);var o=n("react"),a=n("@ta/styleguide.icon"),r=n("@ta/styleguide.skeleton"),i=n.n(r),l=n("@ta/styleguide.loading"),c=n("@ta/overlays.tooltip"),s=n.n(c),u=n("@ta/common.i18n"),d=n("@ta/common.ajax"),h=n("@ta/hotels.hr-about-layout"),p=o.memo(function(e){var t=e.icon,n=e.text,r=e.tooltipContent,i=e.viewport;return o.createElement("div",{className:"hotels-hotel-review-about-csr-Awards__award--3I_nf"},o.createElement(a.Icon,{name:t,className:"hotels-hotel-review-about-csr-Awards__award_icon--2zAuu"}),"MOBILE"===i?o.createElement("div",{className:"hotels-hotel-review-about-csr-Awards__award_text--1J0t2"},n):o.createElement(s.a,{rightOf:!0,message:r},function(e){return o.createElement("div",{className:"hotels-hotel-review-about-csr-Awards__award_text--1J0t2",ref:e},n)}))}),m=o.memo(function(e){var t=e.viewport,n=Object(u.localize)("certificateOfExcellence_title"),a=o.createElement("div",{className:"hotels-hotel-review-about-csr-Awards__popover--1IgGo"},o.createElement("div",{className:"hotels-hotel-review-about-csr-Awards__popover_title--chXg8"},Object(u.localize)("COE_lightbox_headline_updated")),o.createElement(h.TextItem,null,Object(u.localize)("coe_popup")));return o.createElement(p,{icon:"certificate-of-excellence",text:n,tooltipContent:a,viewport:t})}),_=o.memo(function(e){var t=e.url,n=e.year,a=e.viewport,r="".concat(Object(u.localize)("ownersupport_awards_tc_v2")," ").concat(Object(u.localize)("tc_year_winner",{0:n})),i=o.createElement("div",{className:"hotels-hotel-review-about-csr-Awards__popover--1IgGo"},o.createElement("div",{className:"hotels-hotel-review-about-csr-Awards__popover_title--chXg8"},Object(u.localize)("what_is_travelers_choice")),o.createElement(h.TextItem,null,Object(u.localize)("tc_popup_text")),o.createElement("a",{href:t,className:"hotels-hotel-review-about-csr-Awards__tc_popover_link--1XUFh"},Object(u.localize)("tch_booking_button_learn_more")));return o.createElement(p,{icon:"travelers-choice-badge",text:r,tooltipContent:i,viewport:a})}),b=o.memo(function(e){var t=e.locationId,n=e.badgeLevel,a=e.viewport;if(!t)return null;var r="".concat(Object(u.localize)("gl_greenleaders_10d8")," ").concat(function e(t){switch(t){case"PLATINUM":return Object(u.localize)("gl_badge_platinum_10d8");case"GOLD":return Object(u.localize)("gl_badge_gold_10d8");case"SILVER":return Object(u.localize)("gl_badge_silver_10d8");case"BRONZE":return Object(u.localize)("gl_badge_bronze_10d8");case"GREEN_PARTNER":return Object(u.localize)("gl_badge_greenpartner_10d8");default:return""}}(n)),i=o.createElement(d.AjaxRequest,{url:"/GreenLeaderAjax?locationId=".concat(t,"&showSummary=true")},function(e){var t=e.loading,n=e.data;return t?o.createElement(l.LoadingSpinner,null):o.createElement("div",{dangerouslySetInnerHTML:{__html:n}})});return o.createElement(p,{icon:"green-leaders",text:r,tooltipContent:i,viewport:a})}),v=function e(t){var n=t.loading,o=t.travelersChoice,a=t.coeAward,r=t.greenLeader;return n||o||a||r},f=o.memo(function e(t){if(!v(t))return null;var n=t.loading,a=t.viewport,r=t.locationId,l=t.travelersChoice,c=t.coeAward,s=t.greenLeader;return n?o.createElement(o.Fragment,null,o.createElement(i.a,{height:"24px"})):o.createElement("div",{className:"hotels-hotel-review-about-csr-Awards__awards--3Dnqx"},l&&o.createElement(_,{url:l.url,year:l.year,viewport:a}),c&&o.createElement(m,{viewport:a}),s&&o.createElement(b,{locationId:r,badgeLevel:s,viewport:a}))}),w=n("@ta/common.text"),E=n("@ta/common.features"),g=n("@ta/common.tracking"),I=n.n(g),O=function e(t){return o.createElement(o.Fragment,null,o.createElement("span",{className:"hotels-hotel-review-about-csr-Description__readMore--3rZ3t"},t?Object(u.localize)("common_Read_more"):Object(u.localize)("common_Readless")),o.createElement(a.Icon,{name:t?"caret-down":"caret-up"}))},L=function e(t){return"CONTENT"===t||(I()({module:"hr_about",action:"CTA"===t?"descriptionOpen":"descriptionClose"}),!0)},x=function e(t,n){return t||!!n},C=o.memo(function e(t){var n=t.loading,a=t.locationDescription,r=t.locationDescriptionSource,l=t.viewport;if(!x(n,a))return null;if(n)return o.createElement("div",{className:"hotels-hotel-review-about-csr-Description__description--3kC78"},o.createElement(i.a,{height:"MOBILE"===l?"80px":"240px"}));var c="MOBILE"===l?3:11,s=Object(E.featureIsEnabled)("auto_expand_hr_description_for_crawler")&&Object(E.featureIsEnabled)("crawler_or_search_ua");return o.createElement(w.ReadMore,{customCssClass:"hotels-hotel-review-about-csr-Description__description--3kC78",cta:O(!0),ctaCollapse:O(!1),ctaNewline:!0,numLinesToShow:c,initialDivHeight:22*c,clickCallback:L,collapsible:!0,collapsed:!s&&void 0},Object(E.featureIsEnabled)("hide_hr_triplib_description")&&r&&"seogen"===r?"":a&&a.includes("\n")&&(I()({module:"hr_about",action:"hr_long_description_loaded"}),Object(E.featureIsEnabled)("hr_about_description_paragraph_break"))?o.createElement("div",null,a.split("\n").map(function(e){return o.createElement("p",null,e)})):a||"")}),k=n("@ta/common.is-visible"),R=n("@ta/hotels.obfuscation"),A=n("@ta/hotels.partner-content-shared-components"),P=function e(t){return"CONTENT"!==t&&I()({module:"hr_about",action:"partner_description_attribution_url_click"}),!1},T=function e(){return Object(E.featureIsEnabled)("display_restricted_partner_descriptions")},y=function e(t){var n=t.loading,o=t.partnerDescription;return n||!!o&&!!o.description},j=o.memo(function(e){var t=e.loading,n=e.partnerDescription,a=e.viewport;if(!y({loading:t,partnerDescription:n,viewport:a}))return null;if(t)return o.createElement("div",{className:"hotels-hotel-review-about-csr-PartnerDescription__description--22k3u"},o.createElement(i.a,{height:"MOBILE"===a?"80px":"240px"}));var r="MOBILE"===a,l=n.description,c=n.attributionUrl,s=n.mobileAttributionUrl,d=r?s:c;return o.createElement(R.ObfuscatedContainer,null,o.createElement(k.IsVisibleOnce,{onIsVisibleCallback:function e(){I()({module:"hr_about_partner_description",action:"in_view"})}},o.createElement(w.ReadMore,{customCssClass:"hotels-hotel-review-about-csr-PartnerDescription__description--22k3u",cta:function e(t){return o.createElement(A.AttributionLink,{text:t,url:d,className:"hotels-hotel-review-about-csr-PartnerDescription__readMore--cHSKf"})}(Object(u.localize)("partner_description_read_more_link_text",{sPartnerName:"Booking.com"})),ctaNewline:!0,collapsible:!0,numLinesToShow:11,clickCallback:P,initialDivHeight:242,alwaysShowReadMore:!0},l)))}),S=n("@babel/runtime/helpers/esm/classCallCheck"),N=n.n(S),D=n("@babel/runtime/helpers/esm/createClass"),z=n.n(D),U=n("@babel/runtime/helpers/esm/possibleConstructorReturn"),M=n.n(U),W=n("@babel/runtime/helpers/esm/getPrototypeOf"),H=n.n(W),V=n("@babel/runtime/helpers/esm/inherits"),B=n.n(V),F=n("@babel/runtime/helpers/esm/assertThisInitialized"),G=n.n(F),K=n("@babel/runtime/helpers/esm/defineProperty"),q=n.n(K),X=n("@ta/events.window-resize"),$=n.n(X),J=n("@ta/common.photo-carousel"),Z=n("@ta/hotels.media-album-parts"),Q=n("@ta/common.responsive"),Y=n("@ta/media-viewer.opener"),ee="(min-width: ".concat(Q.BREAKPOINT_DESKTOP,"px) and (max-width: ").concat(Q.BREAKPOINT_WIDESCREEN-1,"px)"),te="(max-width: ".concat(Q.BREAKPOINT_MOBILE,"px)"),ne=106,oe=function(e){function t(){var e,n;N()(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return n=M()(this,(e=H()(t)).call.apply(e,[this].concat(a))),q()(G()(G()(n)),"state",{selectedIndex:0,totalPhotos:0,thumbnailCount:7,thumbnailStart:0}),q()(G()(G()(n)),"onWindowResize",function(){var e=document&&document.documentElement&&window&&window.matchMedia&&(window.matchMedia(ee).matches||window.matchMedia(te).matches)?6:7;n.state.thumbnailCount!==e&&n.setState({thumbnailCount:e})}),q()(G()(G()(n)),"onIndexChange",function(e){n.setState({selectedIndex:e});var t=n.state,o=t.thumbnailStart,a=t.thumbnailCount,r=t.totalPhotos;e>o+a-1?n.setState({thumbnailStart:e+a>r?r-a:e}):e<o&&n.setState({thumbnailStart:e-a>0?e-a:0})}),q()(G()(G()(n)),"getSelectedPhotos",function(){return(n.props.photos||[]).map(function(e){return e.photo})}),q()(G()(G()(n)),"openPhotoViewer",function(e,t){if(n.props.locationId){var o=t&&t<0?ne:t;if(Object(E.featureIsEnabled)("hr_mediaviewer_web_component"))Object(Y.openMediaViewer)(n.props.locationId,o,e);else{var a={detail:n.props.locationId,updateType:"full",albumId:o,filter:7,ff:e,baseMediaId:e,albumViewMode:e&&"hero"};require(["trjs!actions/openRespPhotoViewer"],function(e){e.openWithOptions(a)})}}}),n}return B()(t,e),z()(t,[{key:"componentDidMount",value:function e(){this.onWindowResize();var t=this.getSelectedPhotos();this.setState({totalPhotos:t.length}),t[this.state.selectedIndex]&&t[this.state.selectedIndex+1]&&t[this.state.selectedIndex].id===this.props.heroPhotoId&&this.setState({selectedIndex:this.state.selectedIndex+1})}},{key:"carouselClick",value:function e(t,n){this.openPhotoViewer(t,n),I()({module:"photoviewer",action:"btf_hero_click"})}},{key:"render",value:function e(){var n,a,r,l=this,c=this.props,s=c.loading,u=c.photos;if(!t.canRender(this.props))return null;if(s)return o.createElement(i.a,{height:"322px"});var d=this.getSelectedPhotos();if(!d.length)return null;var h=Math.max(Math.min(this.state.selectedIndex,d.length-1),0),p=Math.max(Math.min(h-this.state.thumbnailStart,d.length-1),0),m=(null==u?void 0:null===(n=u[h])||void 0===n?void 0:n.albumId)||-1,_=null==u?void 0:null===(a=u[h])||void 0===a?void 0:a.albumName,b=null==u?void 0:null===(r=u[h])||void 0===r?void 0:r.albumCount,v=m>0&&_&&b,f=d.length>=this.state.thumbnailCount,w=d&&h>=0&&d[h],E=w?w.id:0;return o.createElement(o.Fragment,null,o.createElement($.a,{callback:this.onWindowResize,throttle:250}),o.createElement(J.PhotoCarousel,{width:"100%",height:"272px",photos:d,totalCount:d.length,onPhotoChange:this.onIndexChange,onClick:function e(t){return l.carouselClick(t,m)},displayIndex:h,photoHeight:"120%",overflowHidden:!0,onNextTrackingProps:{module:"photoviewer",action:"btf_hero_arrow_click"},onPreviousTrackingProps:{module:"photoviewer",action:"btf_hero_arrow_click"}},function(){return v?o.createElement(Z.PhotoCount,{linkText:_||"",totalCount:b||0,fontSize:"small",icon:Object(Z.getAlbumIcon)(m),onClick:function e(){l.openPhotoViewer(null,m>0?m:ne),I()({module:"photoviewer",action:"btf_album_click",value:l.props.locationId||0,context:"".concat(E,"|").concat(m)})},padding:"16px"}):null}),f?o.createElement(J.Photostrip,{selectedIndex:p,photos:d.slice(this.state.thumbnailStart,this.state.thumbnailStart+this.state.thumbnailCount),onPhotoSelected:function e(t){return l.onIndexChange(l.state.thumbnailStart+t)}}):null)}}]),t}(o.PureComponent);q()(oe,"canRender",function(e){var t=e.loading,n=e.photos;return t||n&&n.length});var ae=oe,re=n("@ta/public.business-listing"),ie=function(e){function t(){return N()(this,t),M()(this,H()(t).apply(this,arguments))}return B()(t,e),z()(t,[{key:"render",value:function e(){var t=this.props,n=t.locationId,a=t.loading,r=t.servletName,l=t.contactLinks,c=t.specialOffer,s=t.announcement;if(a)return o.createElement(i.a,{height:"18px"});var d,p=l?Object(re.remapContacts)(l):l;return function e(t,n,o){return!!(n||o||t&&(t.URL_HOTEL||t.URL_AFFILIATE||t.URL_PACKAGES||t.URL_VIRTUAL_TOUR||t.URL_DEALS))}(p,c,s)?(Object(E.featureIsEnabled)("ba_special_offers_icon_update_v1")?d="special-offer-fill":Object(E.featureIsEnabled)("ba_special_offers_icon_update_v2")&&(d="special-offer-fill-45deg"),o.createElement(h.Group,{title:Object(u.localize)("hotel_links")},o.createElement(re.WebLink,{locationId:n,contactType:"URL_HOTEL",contact:p.URL_HOTEL,layout:"aboutHighlighted",icon:"internet",context:"ADDITIONAL",offerTextOverride:Object(u.localize)("visit_hotel_website"),linkLevel:"level_1"}),o.createElement(re.WebLink,{locationId:n,contactType:"URL_AFFILIATE",contact:p.URL_AFFILIATE,layout:"about",icon:"internet",linkLevel:"level_4"}),o.createElement(re.WebLink,{locationId:n,contactType:"URL_VIRTUAL_TOUR",contact:p.URL_VIRTUAL_TOUR,layout:"about",icon:"video-fill",linkLevel:"level_4"}),o.createElement(re.SpecialOffer,{locationId:n,coupon:c,announcement:s,servlet:r,icon:d||"special-offer-fill-45deg",layout:"about",linkLevel:"level_4"}),o.createElement(re.WebLink,{locationId:n,contactType:"URL_DEALS",contact:p.URL_DEALS,layout:"about",icon:d||"special-offer-fill",linkLevel:"level_4"}),o.createElement(re.WebLink,{locationId:n,contactType:"URL_PACKAGES",contact:p.URL_PACKAGES,layout:"about",icon:"present",linkLevel:"level_4"}))):null}}]),t}(o.PureComponent);n.d(t,"Awards",function(){return f}),n.d(t,"awardsCanRender",function(){return v}),n.d(t,"Description",function(){return C}),n.d(t,"descriptionCanRender",function(){return x}),n.d(t,"PartnerDescription",function(){return j}),n.d(t,"partnerDescriptionCanRender",function(){return y}),n.d(t,"partnerDescriptionsEnabled",function(){return T}),n.d(t,"Photos",function(){return ae}),n.d(t,"HotelLinks",function(){return ie}),t.default=null}}});
//# sourceMappingURL=hotels.hotel-review-about-csr.7edc6c3637.js.map