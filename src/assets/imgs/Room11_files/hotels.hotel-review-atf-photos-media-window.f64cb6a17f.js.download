($WP="undefined"!=typeof $WP?$WP:[]).push({id:"@ta/hotels.hotel-review-atf-photos-media-window",d:["vendor-react-libs","@ta/hotels.media-album-parts","@ta/hotels.media-album-configuration","vendor-babel","vendor-redux-libs","vendor-common","@ta/styleguide.skeleton","ta-common","lithium-platform","ta-platform","@ta/media-viewer.opener","@ta/public.graphql-util","@ta/media.face-pile"],e:["./packages/hotels/hotel-review-atf-photos-media-window/index.jsx"],x:{"./packages/hotels/hotel-review-atf-photos-media-window/HotelBadges.frag.gql":["a"],"./packages/hotels/hotel-review-atf-photos-media-window/index.jsx":["default","AlbumThumbnailIcon","AlbumThumbnailOverlay","ATFNoPhotoCTA","openPhotoviewer","HotelBadgesFragment","connectAlbumPane","connectCarouselPane","AtfWindow"]},m:{"./packages/hotels/hotel-review-atf-photos-media-window/HotelBadges.frag.gql":function(e,t,a){"use strict";var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"HotelBadges"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Query"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"travelersChoice"},arguments:[{kind:"Argument",name:{kind:"Name",value:"locationIds"},value:{kind:"ListValue",values:[{kind:"Variable",name:{kind:"Name",value:"locationId"}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"year"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"coeAward"},arguments:[{kind:"Argument",name:{kind:"Name",value:"requests"},value:{kind:"ListValue",values:[{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"locations"},value:{kind:"ListValue",values:[{kind:"Variable",name:{kind:"Name",value:"locationId"}}]}}]}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"locations"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:177}};n.loc.source={body:"3c9931dc35cb"},t.a=n},"./packages/hotels/hotel-review-atf-photos-media-window/index.jsx":function(e,t,a){"use strict";a.r(t);var n=a("react"),o=a("@ta/hotels.media-album-parts"),i=a("@ta/hotels.media-album-configuration"),l=a("react-redux"),r=a("lodash/get"),s=a.n(r),c=a("@ta/common.tracking"),d=a.n(c),u=a("@ta/common.is-visible"),m=a("@ta/public.graphql-util"),h=a("@ta/common.classnames"),v=a.n(h),p=a("@ta/common.features"),f=a("@ta/media-viewer.opener"),w=function e(t,a,n,i){if(Object(p.featureIsEnabled)("hr_mediaviewer_web_component"))Object(f.openMediaViewer)(t,n,i);else{var l={detail:t,geo:a,albumViewMode:"grid",updateType:"full",albumId:n,filter:7};i>0&&(n===o.AlbumTypes.PANO_ALBUM?l.panoId="p".concat(i):l.ff=i,l.baseMediaId=i,l.albumViewMode="hero"),require(["trjs!actions/openRespPhotoViewer"],function(e){e.openWithOptions(l)})}},b=a("@ta/styleguide.icon"),g=a("@ta/media.face-pile"),k="hotels-hotel-review-atf-photos-media-window-Albums-Icon__absolute--Sz_iv",_="hotels-hotel-review-atf-photos-media-window-Albums-Icon__overlayIcon--21nnW",I="hotels-hotel-review-atf-photos-media-window-Albums-Icon__iconWrapper--1EVfa",A=function e(){return n.createElement("div",{className:I},n.createElement(b.Icon,{name:"camera-fill",className:v()(_,k)}))},N=function e(t){var a=t.albumId,i=t.avatarData;switch(a){case o.AlbumTypes.TRAVELER_ALBUM:return function e(t){if(!t)return A();var a=t.filter(function(e){return!(!e.userProfile||!e.userProfile.avatar)}).reduce(function(e,t){return e[t.userProfile.avatar.id]=t.userProfile.avatar,e},{}),o=Object.keys(a).reduce(function(e,t){return e.push(a[t]),e},[]).map(function(e){return{withBorder:!0,alt:"",size:"small",photo:{photoSizes:s()(e,"photoSizes",[])}}}).filter(function(e){return!!e}).slice(0,3);return o.length<2?A():n.createElement("span",{className:"hotels-hotel-review-atf-photos-media-window-Albums-Icon__facePile--1qgTW"}," ",n.createElement(g.FacePile,{avatarProps:o,maxFaces:3}))}(i);case o.AlbumTypes.STORYBOARD_ALBUM:return function e(){return n.createElement("div",{className:I},n.createElement(b.Icon,{name:"bubble-rating-bg",className:"hotels-hotel-review-atf-photos-media-window-Albums-Icon__darkIconBg--2kQ2r"}),n.createElement(b.Icon,{name:"play",className:v()(_,k)}))}();case o.AlbumTypes.PANO_ALBUM:return function e(){return n.createElement("div",{className:"hotels-hotel-review-atf-photos-media-window-Albums-Icon__iconWrapperPano--3eV9B"},n.createElement("div",{className:v()(k,"hotels-hotel-review-atf-photos-media-window-Albums-Icon__darkIconBgPano--3WLjh")}),n.createElement(b.Icon,{name:"refresh",className:v()("hotels-hotel-review-atf-photos-media-window-Albums-Icon__overlayIconLarge--1nFR9",k)}),n.createElement("span",{className:v()(k,"hotels-hotel-review-atf-photos-media-window-Albums-Icon__pano360--3bBt_")},"360"))}();case o.AlbumTypes.ROOM_AND_SUITE_ALBUM:return function e(){return n.createElement("div",{className:I},n.createElement(b.Icon,{name:"hotels",className:v()(_,k)}))}();case o.AlbumTypes.DINING_ALBUM:return function e(){return n.createElement("div",{className:I},n.createElement(b.Icon,{name:"restaurants",className:v()(_,k)}))}();default:return A()}};N.defaultProps={avatarData:[]};var C=N,P=function e(t){var a=t.renderIcon&&"function"==typeof t.renderIcon?t.renderIcon():e.defaultProps.renderIcon();return n.createElement("div",{className:v()("hotels-hotel-review-atf-photos-media-window-Albums-Overlay__imageOverlay--1dPs0",t.title?"hotels-hotel-review-atf-photos-media-window-Albums-Overlay__imageOverlayGray--2vR4q":"")},a,t.title,t.count&&n.createElement("span",{className:"hotels-hotel-review-atf-photos-media-window-Albums-Overlay__thinText--Zy5zU"}," (",t.count,") "))},y=function e(){return n.createElement(b.Icon,{name:"play",className:"hotels-hotel-review-atf-photos-media-window-Albums-Overlay__icon--BNwYQ"})};y.displayName="DefaultRenderIcon",P.defaultProps={title:"",count:0,renderIcon:y};var E=P,T={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"TravelerAlbumAvatars"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"LocationInformation"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"travelerAlbum"},name:{kind:"Name",value:"albums"},arguments:[{kind:"Argument",name:{kind:"Name",value:"albumIds"},value:{kind:"ListValue",values:[{kind:"IntValue",value:"107"}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"photos"},arguments:[{kind:"Argument",name:{kind:"Name",value:"page"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"10"}},{kind:"ObjectField",name:{kind:"Name",value:"offset"},value:{kind:"IntValue",value:"0"}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userProfile"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatar"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"photoSizes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"width"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"height"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}],loc:{start:0,end:338}};T.loc.source={body:"0436e30856cb"};var O=T,S="hotels-hotel-review-atf-photos-media-window-Albums-Pane__albumThumbnailWrap--1LzxS",M=function e(t){var a,i=t.albums,l=t.locationId,r=t.geoId,c=t.avatarData,m=t.loading;return i&&0!==i.length&&i.filter&&l&&r?(a=m?function e(t){for(var a=[],n=0;n<t;n++)a.push({albumId:-n,name:"",totalMediaCount:0,mediaList:[]});return a}(3):function e(t){return t.filter(function(e){return 0!==e.mediaList.length}).slice(0,3)}(i)).length<2?null:n.createElement("div",{className:v()("hotels-hotel-review-atf-photos-media-window-Albums-Pane__albumsContainer--3ntPo","hotels-hotel-review-atf-photos-media-window-Albums-Pane__albumColumnWrap--28Xvc"),key:"albums-container"},function e(t,a,i,l,r){return a.map(function(e){var a=e.albumId,c=e.name,m=e.totalMediaCount,h=e.mediaList,p=a===o.AlbumTypes.PANO_ALBUM,f=n.createElement("div",{key:a,className:v()(p?"hotels-hotel-review-atf-photos-media-window-Albums-Pane__albumThumbnailWrapNoBorder--3kreb":S)},n.createElement(o.Thumbnail,{className:"hotels-hotel-review-atf-photos-media-window-Albums-Pane__albumThumb--7OyEj",photoSizes:s()(h,"[0].photoSizes",[]),onClick:function e(){d()({module:"photoviewer",action:"atf_album_click",context:"".concat(a)}),w(i,l,a,a===o.AlbumTypes.STORYBOARD_ALBUM?s()(h,"[0].mediaId",void 0):-1)},loading:t},n.createElement(E,{title:c,count:m,renderIcon:function e(){return n.createElement(C,{albumId:a,avatarData:r})}})));return p?n.createElement(u.HasBeenVisible,{onVisible:function e(){d()({module:"atf_panos_album",action:"in_view",value:0})},key:"track-".concat(a)},function(e){return n.createElement("div",{ref:e,className:S},f)}):f})}(m,a,l,r,c)):null},L=function e(t,a){return t.LOCATION_FIELDS.push(Object(m.getFragment)(O,"TravelerAlbumAvatars")),Object(l.connect)(function(e,t){var n=t.location,o=t.windowPanes,i=t.loading;return{albums:s()(o,"[".concat(a,"]"),null),locationId:s()(n,"locationId",0),avatarData:s()(n,"travelerAlbum[0].photos",null),geoId:e.page.geoId,loading:i}})(M)},F=a("@babel/runtime/helpers/esm/classCallCheck"),x=a.n(F),B=a("@babel/runtime/helpers/esm/createClass"),W=a.n(B),j=a("@babel/runtime/helpers/esm/possibleConstructorReturn"),U=a.n(j),R=a("@babel/runtime/helpers/esm/getPrototypeOf"),D=a.n(R),V=a("@babel/runtime/helpers/esm/inherits"),z=a.n(V),q=a("@babel/runtime/helpers/esm/assertThisInitialized"),H=a.n(q),G=a("@babel/runtime/helpers/esm/defineProperty"),Y=a.n(G),Q=a("@ta/styleguide.skeleton"),$=a.n(Q),J=a("@ta/media.common"),X=a("@ta/styleguide.button"),K=a.n(X),Z=a("@ta/common.i18n");function ee(){d()({module:"photoviewer",action:"click",context:"add_photo_click"})}var te=function e(t){var a=t.locationId,o=t.geoId,i="/PostPhotos-g".concat(o,"-d").concat(a);return n.createElement("a",{className:"hotels-hotel-review-atf-photos-media-window-Carousel-ATFNoPhotoCTA__addPhotoLinkBlock--1gb1C",href:i,target:"_blank",onClick:ee},n.createElement("div",{className:"hotels-hotel-review-atf-photos-media-window-Carousel-ATFNoPhotoCTA__iconWrap--2iN-q"},n.createElement(b.Icon,{className:"hotels-hotel-review-atf-photos-media-window-Carousel-ATFNoPhotoCTA__cameraIcon--3Erxu",name:"camera"})),n.createElement(K.a,{type:"primary",size:"large"},Object(Z.localize)("mw_add_photo_ffffdfce")))},ae=Object(o.WithContainerDimensions)(o.MediaCarousel,function e(t){switch(t){case"MOBILE":return{clientWidth:400,clientHeight:200};case"TABLET":return{clientWidth:425,clientHeight:350};case"DESKTOP":default:return{clientWidth:610,clientHeight:350}}}),ne=function(e){function t(){var e,a;x()(this,t);for(var i=arguments.length,l=new Array(i),r=0;r<i;r++)l[r]=arguments[r];return a=U()(this,(e=D()(t)).call.apply(e,[this].concat(l))),Y()(H()(H()(a)),"doAdjustPortraitPhotos",function(e){return"MOBILE"!==e}),Y()(H()(H()(a)),"isAlbumThinGeo",function(){return a.props.albumId&&a.props.albumId===o.AlbumTypes.THIN_GEO_PHOTO_ALBUM}),Y()(H()(H()(a)),"showIndicatorDots",function(){return"MOBILE"===a.props.viewportCategory}),Y()(H()(H()(a)),"renderPhotoCountOverlay",function(){var e="MOBILE"===a.props.viewportCategory?"xsmall":"regular",t=a.showIndicatorDots()?"none":void 0;return a.props.totalMediaCount>1?n.createElement(o.PhotoCount,{onClick:function e(){d()({module:"photoviewer",action:"atf_allphotos_click",context:"".concat(a.props.locationId)}),w(a.props.locationId,a.props.geoId,o.AlbumTypes.ALL_ALBUMS,-1)},fontSize:e,icon:"camera-fill",totalCount:a.props.totalMediaCount,linkText:a.props.albumName||Object(Z.localize)("photos_module_carousel_view_all_photos_plain"),background:t}):null}),a}return z()(t,e),W()(t,[{key:"render",value:function e(){var t=this.props,a=t.locationId,i=t.geoId,l=t.media,r=t.totalMediaCount,s=t.getNextPage,c=t.carouselIndex,u=t.updateCarouselIndex,m=t.postPhotosUrl,h=t.writeReviewUrl,p=t.locationName,f=Math.max(Math.min(c,l.length-1),0),b=20*Math.floor(f/20),g=Math.min(b+20,l.length),k=l[f].mediaId&&!this.isAlbumThinGeo()?function(e){d()({module:"photoviewer",action:"atf_hero_click",context:"".concat(e)}),w(a,i,o.AlbumTypes.ALL_ALBUMS,e)}:null,_=!!k&&this.renderPhotoCountOverlay;return!_&&this.isAlbumThinGeo()&&(_=function e(){return n.createElement(o.PhotoSource,{textClassName:"hotels-hotel-review-atf-photos-media-window-Carousel-CarouselWithThumbnails__backupPhotoText--MhzBY",text:Object(Z.localize)("hr_lowcontent_geo_photo_disclaim_2")})}),n.createElement("div",{className:v()("hotels-hotel-review-atf-photos-media-window-Carousel-CarouselWithThumbnails__carouselWrap--QMjPF",this.isAlbumThinGeo()?"hotels-hotel-review-atf-photos-media-window-Carousel-CarouselWithThumbnails__carouselWrapMobileThinGeo--JYJIG":"hotels-hotel-review-atf-photos-media-window-Carousel-CarouselWithThumbnails__carouselWrapMobileRegular--2PRvC","hotels-hotel-review-atf-photos-media-window-Carousel-CarouselWithThumbnails__carouselContainer--2YROw","hotels-hotel-review-atf-photos-media-window-Carousel-CarouselWithThumbnails__carousel-container--3QXmw"),key:"carousel-container"},n.createElement("div",{className:"hotels-hotel-review-atf-photos-media-window-Carousel-CarouselWithThumbnails__flexColumn--1ESad"},n.createElement(ae,{width:"100%",height:"100%",media:l,totalCount:r,uniqueId:"".concat(a),showIndicatorDots:this.showIndicatorDots(),onClick:k,onLoadLast:function e(){return"function"==typeof s&&s()},loadLastThreshold:19,onNextClick:function e(){d()({module:"photoviewer",action:"atf_hero_arrow_click"})},onPrevClick:function e(){d()({module:"photoviewer",action:"atf_hero_arrow_click"})},displayIndex:f,imageFitStrategy:this.doAdjustPortraitPhotos(this.props.viewportCategory)?"calculated":"cover",backgroundColor:"black",showCta:!!k,hideArrows:this.isAlbumThinGeo(),renderOverlay:_}),r>10&&n.createElement("div",{className:"hotels-hotel-review-atf-photos-media-window-Carousel-CarouselWithThumbnails__photoStripContainer--2sbFy"},n.createElement(o.Mediastrip,{media:l.slice(b,g),selectedIndex:f%20,onMediaSelected:function e(t){u("".concat(a),b+t),l.length!==r&&l.length-b-t<20&&"function"==typeof s&&s(),d()({module:"photoviewer",action:"atf_previewthumb_click"})},numItemsInRow:10})),this.isAlbumThinGeo()&&n.createElement("div",{className:"hotels-hotel-review-atf-photos-media-window-Carousel-CarouselWithThumbnails__ctaContainer--3baLk"},n.createElement(o.ThinGeoCTA,{postPhotosUrl:m||"/PostPhotos-d".concat(a),writeReviewUrl:h||"/UserReview-d".concat(a),locationName:p||""}))))}}]),t}(n.PureComponent);Y()(ne,"defaultProps",{getNextPage:function e(){}});var oe=Object(l.connect)(function(e,t){return{viewportCategory:e.meta.device.viewportCategory,carouselIndex:Object(o.getMediaCarouselState)(e).currentIndex["".concat(t.locationId)]||0}},{updateCarouselIndex:o.MEDIA_CAROUSEL_ACTIONS.updateCurrentIndex})(ne),ie=function(e){function t(){var e,a;x()(this,t);for(var o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];return a=U()(this,(e=D()(t)).call.apply(e,[this].concat(i))),Y()(H()(H()(a)),"renderCarousel",function(e){var t=e.loading,o=e.media,i=e.getNextPage,l=a.props,r=l.album,s=l.locationId,c=l.geoId,d=l.postPhotosUrl,u=l.writeReviewUrl,m=l.locationName,h=r.totalMediaCount,v=r.albumId,p=r.name;return!t||o&&h?o&&0!==h?n.createElement(oe,{locationId:s,geoId:c,media:o,totalMediaCount:h,getNextPage:i,albumId:v,albumName:p,postPhotosUrl:d,writeReviewUrl:u,locationName:m}):n.createElement(te,{locationId:s,geoId:c}):n.createElement($.a,{height:"100%",width:"100%"})}),a}return z()(t,e),W()(t,[{key:"render",value:function e(){var t=this.props,a=t.loading,i=t.locationId,l=t.geoId,r=t.client,s=t.initOffset,c=t.album;if(a&&!c||!i)return n.createElement($.a,{height:"100%",width:"100%"});if(!l)throw new Error("No geoId provided to CarouselPane");if(!c)return n.createElement(te,{locationId:i,geoId:l});var d=c.totalMediaCount,u=c.albumId,m=c.mediaList,h=c.dataStrategy;return n.createElement(o.AlbumPagingProvider,{locationId:i,albumId:u,client:r,dataStrategy:h,filter:Object(J.getMediaFilterToRetrieveAllPhotos)(),initMedia:m,initOffset:s,totalMediaCount:d,pageSize:20,uniqueId:"".concat(i),render:this.renderCarousel})}}]),t}(n.PureComponent),le=function e(t,a,n){return Object(l.connect)(function(e,o){var i=o.location,l=o.windowPanes,r=o.loading,c=s()(i,"locationId",null)||s()(e,"page.detailId",null)||s()(e,"page.transData.location.locationId",0);return{locationId:c,album:s()(l,"[".concat(t,"][0]"),s()(e,"page.transData.album",null)),geoId:s()(e,"page.geoId",0),client:a,initOffset:n,loading:r,postPhotosUrl:s()(i,"postPhotosUrl","/PostPhotos-d".concat(c)),writeReviewUrl:s()(i,"writeUserReviewUrl","/UserReview-d".concat(c)),locationName:s()(i,"name",null)}})(ie)},re=n.memo(function e(t){var a=t.renderCarouselPane,o=t.renderAlbumPane,i=t.renderBadge,l=t.queryProps;return n.createElement("div",{className:v()("hotels-hotel-review-atf-photos-media-window-AtfWindow__fullHeight--2G86v","hotels-hotel-review-atf-photos-media-window-AtfWindow__mediaWindow--1YklV")},a(l),o(l),i(l))}),se={ROOT_FIELDS:[],LOCATION_FIELDS:[],SSR_QUERIES:[]},ce=Object(o.connectBadge)(se),de=function e(t){return n.createElement(ce,t)},ue=le(0,"hra",20),me=function e(t){return n.createElement(ue,t)},he=L(se,1),ve=function e(t){return n.createElement(he,t)},pe=function e(t){return n.createElement(re,{queryProps:t,renderBadge:de,renderCarouselPane:me,renderAlbumPane:ve})},fe=Object(o.connectMediaWindowContainer)(se,"hra",Object(i.getConfigurationForHrAtfMediaWindow)()),we=a("./packages/hotels/hotel-review-atf-photos-media-window/HotelBadges.frag.gql");a.d(t,"AlbumThumbnailIcon",function(){return C}),a.d(t,"AlbumThumbnailOverlay",function(){return E}),a.d(t,"ATFNoPhotoCTA",function(){return te}),a.d(t,"openPhotoviewer",function(){return w}),a.d(t,"HotelBadgesFragment",function(){return we.a}),a.d(t,"connectAlbumPane",function(){return L}),a.d(t,"connectCarouselPane",function(){return le}),a.d(t,"AtfWindow",function(){return re}),t.default=function e(){return n.createElement(fe,{renderMediaWindow:pe})}}}});
//# sourceMappingURL=hotels.hotel-review-atf-photos-media-window.f64cb6a17f.js.map