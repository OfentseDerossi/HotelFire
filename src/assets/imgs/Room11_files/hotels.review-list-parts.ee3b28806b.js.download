($WP="undefined"!=typeof $WP?$WP:[]).push({id:"@ta/hotels.review-list-parts",d:["vendor-react-libs","@ta/public.graphql-util","@ta/styleguide.ribbon","lithium-platform","ta-common","vendor-redux-libs","ta-platform","@ta/hotels.review-list-state","@ta/public.reviews","vendor-babel","@ta/common.text","@ta/media-viewer.opener","@ta/public.share-cta","@ta/social.statistics-bar","@ta/social.actions","@ta/styleguide.skeleton","@ta/common.client","@ta/common.dates","@ta/overlays.managers","@ta/overlays.tooltip","@ta/overlays.modal","@ta/common.ajax","@ta/social.member-event","@ta/overlays.popover","@ta/media.face-pile","@ta/social.socialproof","@ta/input.text-input","@ta/social.skeletons","@ta/hotels.community-pagination-card","@ta/common.grid","@ta/filters.selection-pills","@ta/overlays.slide-in","@ta/input.filter-group","vendor-apollo-libs"],e:["./packages/hotels/review-list-parts/review-list-parts.jsx"],x:{"./packages/hotels/review-list-parts/review-list-parts.jsx":["connectReview","connectRatingLine","connectReviewTitle","connectExpando","connectInlinePhotos","connectInlineRoomTip","connectSocial","connectMTFooter","connectAdditionalRatings","connectEventDate","connectTripType","connectOwnerResponse","connectAttributionFooter","connectDisclaimerFooter","connectGoogleTranslateButton","connectHeader","connectGoogleTranslateResponseButton","connectResponseDisclaimerFooter","ReviewControlNotice","ConnectionReviewsCTA","createConnectionReviewsQuery","SearchBox","connectReviewList","ReviewFilters","connectHRQuery","REVIEW_LIST_ACTIONS","ReviewRatingFilter","getRatingSelections","HealthAndSafetyFilter","getHealthAndSafetySelections","TravelTypeFilter","getSegmentSelections","TravelTimeFilter","getTimeSelections","LanguageFilter","getLanguageSelections","SearchFilter","ReviewedByRadioFilter","PointsCampaign","SensitiveIssuesBadge","FILTER_NAME_RATING","FILTER_NAME_SAFETY","FILTER_NAME_TRAVEL_TYPE","FILTER_NAME_TRAVEL_TIME","FILTER_NAME_LANGUAGE","FILTER_NAME_TEXT","PREF_NAME_SHOWMT","PREF_NAME_SORTTYPE","REVIEW_SORT_DEFAULT","REVIEW_SORT_CONNECTIONS_FIRST","reviewTextEscape","contentLangFromState","getLanguageNames","languageDir","default"]},m:{"./packages/hotels/review-list-parts/review-list-parts.jsx":function(e,t,n){"use strict";n.r(t);var i=n("react"),a=n.n(i),r=n("@ta/public.graphql-util"),l=n("@ta/styleguide.ribbon"),o=n.n(l),s=n("@ta/common.i18n"),c={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"SingleReview_HOTELS_REVIEW"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Review"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"locationId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"rating"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"absoluteUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mcid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"translationType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mtProviderId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"alertStatus"},arguments:[],directives:[]}]}}],loc:{start:0,end:153}};c.loc.source={body:"62b66e75a8ec"};var u=c,d=function e(t){var n=t.reviewList,a=t.review,r=t.injectHeader,l=t.renderPhotos,c=t.renderHeader,u=t.renderMainCol,d=function e(t){if(t.accommodationCategory){if("HOTEL"===t.accommodationCategory)return Object(s.localize)("hotels_favorite");if("COLLAPSED_BB_INN"===t.accommodationCategory)return Object(s.localize)("Innkeepers_Favorite_Review")}return Object(s.localize)("Propertys_Favorite_Review")}(n.locationInfo);return i.createElement(i.Fragment,{key:a.id},r||null,c(),l(),i.createElement("div",{className:"hotels-review-list-parts-SingleReview__mainCol--2XgHm","data-reviewid":a.id},n.preferredReviewIds&&n.preferredReviewIds[0]===a.id?i.createElement(o.a,{type:"flat-right",text:d,color:"primary"}):null,u()))},m=function e(t,n){return t.REVIEW_FIELDS.push(Object(r.getFragment)(u,"SingleReview_HOTELS_REVIEW")),function e(t){var a=t.queryProps,r=t.injectHeader;return i.createElement(d,{key:a.review.id,reviewList:a.reviewList,review:a.review,injectHeader:r,renderHeader:function e(){return n.header?n.header(a):null},renderPhotos:function e(){return n.photos?n.photos(a):null},renderMainCol:function e(){return n.mainCol?n.mainCol(a):null}})}},v=n("@ta/styleguide.bubble-rating"),p={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"RatingLine_REVIEW"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Review"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"rating"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"publishedDate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"publishPlatform"},arguments:[],directives:[]}]}}],loc:{start:0,end:84}};p.loc.source={body:"428ccd43536e"};var f=p,g=function e(t){var n=t.rating;return i.createElement("div",{className:"hotels-review-list-parts-RatingLine__bubbles--1oCI4","data-test-target":"review-rating"},n&&i.createElement(v.BubbleRating,{rating:n}))},_=function e(t){return t.REVIEW_FIELDS.push(Object(r.getFragment)(f,"RatingLine_HOTELS_REVIEW")),function e(t){var n=t.review;return i.createElement(g,{rating:n.rating})}},h=n("react-redux"),k=n("@ta/common.routing"),w=n("@ta/common.features"),E=n("@ta/hotels.review-list-state"),b=n("@ta/public.reviews"),N={zh:"zhCN",zh_CN:"zhCN",zh_HK:"zhTW",zh_TW:"zhTW"},y=function e(t){return function e(t){var n=t||"en";return N[n]||n.split("_")[0]||"en"}(function e(t){return t&&t.i18n&&t.i18n.locale||"en_US"}(t))},F={"":'<span class="'.concat("hotels-review-list-parts-text__hit--WExss",'">'),"":"</span>","\n":"<br>","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},S=function e(t){return(t||"").replace(/[&<>"'\n\u0086\u0087]|&#?[0-9a-zA-Z]+;/g,function(e){return F[e]||e})},T=function e(t){return t&&t.match(/^(ar|iw)/i)?"rtl":"ltr"},R=function e(t){var n=t.title,a=t.i18nlanguage,r=t.language,l=t.originalLanguage,o=t.translationType,c=t.reviewId,u=t.expandReviews,d=t.url,m={};return"MACHINE"===o&&l&&(m.lang="".concat(a,"-x-mtfrom-").concat(l)),i.createElement("div",{className:"hotels-review-list-parts-ReviewTitle__reviewTitle--2Fauz",dir:T(r),"data-test-target":"review-title"},Object(w.featureIsEnabled)("hr_linked_review_test_v2_tg_one")||Object(w.featureIsEnabled)("hr_linked_review_test_v2_tg_two")?i.createElement(k.Link,{href:d,className:"hotels-review-list-parts-ReviewTitle__reviewTitleText--3QrTy"},i.createElement("span",m,Object(s.unescaped)(S(n||"")))):i.createElement(k.Link,{onClick:function e(t){return u([c],!0),t.preventDefault(),!1},href:d,className:"hotels-review-list-parts-ReviewTitle__reviewTitleText--3QrTy"},i.createElement("span",m,Object(s.unescaped)(S(n||"")))))},O=function e(t){return t.REVIEW_FIELDS.push(Object(r.fragmentFromTemplate)("ReviewTitle_REVIEW","Review",{title:!0,language:"",url:!0})),Object(h.connect)(function(e,t){return{i18nlanguage:e.i18n.language,reviewId:t.review.id,title:t.review.title,language:t.review.language,originalLanguage:t.review.originalLanguage,translationType:t.review.translationType,url:t.review.url}},{expandReviews:E.ACTIONS.expandReviews})(R)},I=n("@babel/runtime/helpers/esm/extends"),C=n.n(I),L=n("@ta/common.text"),A=n("@ta/styleguide.icon"),j=n("@ta/common.tracking"),x=n.n(j),D=function e(t,n,i){if(!i)return[t];var a=[];return n.forEach(function(e){(e===t||a.length>0)&&a.push(e)}),a.length>0?a:[t]},V=function e(t){return Object(w.featureIsEnabled)("hr_review_length_optimization_modgroup_1")||Object(w.featureIsEnabled)("hr_review_length_optimization_slicegroup_1")?t?6:5:Object(w.featureIsEnabled)("hr_review_length_optimization_modgroup_2")||Object(w.featureIsEnabled)("hr_review_length_optimization_slicegroup_2")?t?9:6:Object(w.featureIsEnabled)("hr_review_length_optimization_modgroup_3")||Object(w.featureIsEnabled)("hr_review_length_optimization_slicegroup_3")?t?12:8:4},P=function e(t){return i.createElement("div",{className:"hotels-review-list-parts-ExpandableReview__ctaLine--1lhYi",onClick:function e(){x()({module:"ReviewLengthOptimization",action:"ReadMoreClick",context:"ReadMoreClickReviews|".concat(t)})},"data-test-target":"expand-review"},i.createElement("span",{className:"hotels-review-list-parts-ExpandableReview__cta--3U9OU"},Object(s.localize)("common_Read_more")),i.createElement(A.Icon,{className:"hotels-review-list-parts-ExpandableReview__caret--2Eroy",name:"caret-down"}))},z=function e(){return i.createElement("div",{className:"hotels-review-list-parts-ExpandableReview__ctaLine--1lhYi"},i.createElement("span",{className:"hotels-review-list-parts-ExpandableReview__ctaCollapse--3qWrt"},Object(s.localize)("common_Readless")),i.createElement(A.Icon,{className:"hotels-review-list-parts-ExpandableReview__caret--2Eroy",name:"caret-up"}))},M=function e(){return Object(w.featureIsEnabled)("hr_review_length_optimization_modgroup_1")||Object(w.featureIsEnabled)("hr_review_length_optimization_slicegroup_1")?490:Object(w.featureIsEnabled)("hr_review_length_optimization_modgroup_2")||Object(w.featureIsEnabled)("hr_review_length_optimization_slicegroup_2")?590:Object(w.featureIsEnabled)("hr_review_length_optimization_modgroup_3")||Object(w.featureIsEnabled)("hr_review_length_optimization_slicegroup_3")?790:280},G=function e(t){var n=t.reviewId,a=t.text,r=t.expanded,l=t.reviews,o=t.children,c=t.expandReviews,u=t.language,d=t.alwaysShowReadMore,m=t.i18nlanguage,v=t.originalLanguage,p=t.translationType,f=t.showFullReviews,g=t.queryProps,_=t.isMobile,h={};"MACHINE"===p&&v&&(h.lang="".concat(m,"-x-mtfrom-").concat(v));var k=l.map(function(e){return e.id}),w=k?k.indexOf(n)+1:-1;return i.createElement("div",{className:"hotels-review-list-parts-ExpandableReview__containerStyles--2IVer",onLoad:Object(j.trackEventAJAXOnPageOnce)({module:"ReviewLengthOptimization",action:"CountofCharacters",context:"ReviewCharacterCount|".concat(function e(){var t=M(),n=S(a.trim()).length;return n<t?n:t}(),"|").concat(n)})},i.createElement(L.ReadMore,{collapsible:!0,alwaysShowReadMore:d,cta:P(w),ctaCollapse:z(),ctaNewline:!0,initialDivHeight:20*V(_),collapsed:!r,clickCallback:function e(t){return"CTA"===t||"CONTENT"===t&&!r?c(D(n,k,!0),!0):"CTA_COLLAPSE"===t&&r&&c(D(n,k,!1),!1),!1},numLinesToShow:V(_)},i.createElement("q",C()({className:"hotels-review-list-parts-ExpandableReview__reviewText--3oMkH"},h),i.createElement(L.DirectionalText,{contentLanguage:u||""},r?Object(s.unescaped)(S(a.trim())):function e(t,n){var a=t.replace(/\n/g," ");if(a.length<=M())return Object(s.unescaped)(S(a));var r=a.substr(0,M());if(r=r.substr(0,Math.min(r.length,r.lastIndexOf(" "))),!t.includes("")||r.includes("")){var l=i.createElement("span",{className:"hotels-review-list-parts-ExpandableReview__cutReviewText--2L8NC"},a.substr(r.length,a.length));return i.createElement(i.Fragment,null,Object(s.unescaped)(S(r)),n?l:"")}var o=a.indexOf(""),c=a.substr(o-M(),M()),u=Math.max(0,c.indexOf(" "));c=c.substr(u,o-u);var d=i.createElement("span",{className:"hotels-review-list-parts-ExpandableReview__cutReviewText--2L8NC"},a.substr(0,a.indexOf(c)));return i.createElement(i.Fragment,null,"...",n?d:"",Object(s.unescaped)(S(c)))}(a,f),!r&&a.length>M()&&Object(s.unescaped)("&hellip;")))),o&&o(g,r))},W=function e(t,n,i){return t.REVIEW_FIELDS.push(Object(r.fragmentFromTemplate)("ExpandableReview_REVIEW","Review",{text:!0,language:""})),Object(h.connect)(function(e,t){var a,r;return{i18nlanguage:e.i18n.language,isMobile:"MOBILE"===e.meta.device.viewportCategory,alwaysShowReadMore:i,reviewId:t.review.id,text:t.review.text,language:t.review.language,originalLanguage:t.review.originalLanguage,translationType:t.review.translationType,expanded:((Object(E.getState)(e)||{}).expandedReviews||{})[t.review.id],reviews:t.reviewList.reviews||[],queryProps:t,children:n.children,showFullReviews:0===(null==t?void 0:null===(a=t.reviewList)||void 0===a?void 0:null===(r=a.page)||void 0===r?void 0:r.offset)}},{expandReviews:E.ACTIONS.expandReviews})(G)};G.defaultProps={alwaysShowReadMore:!1};var U=n("@ta/common.classnames"),B=n.n(U),H=n("@ta/media.image"),q=n("@ta/media-viewer.opener"),K=function e(t){var n=t.photos,a=t.locationId,r=t.geoId,l=n&&n.length-3,o="";if(!n||0===n.length)return null;if(n)switch(n.length){case 1:o=B()("hotels-review-list-parts-SectionThumbnails__flex_item--3dWDF","hotels-review-list-parts-SectionThumbnails__use1x1--2gAAT");break;case 2:o=B()("hotels-review-list-parts-SectionThumbnails__flex_item--3dWDF","hotels-review-list-parts-SectionThumbnails__use2x1--21kO7");break;default:o=B()("hotels-review-list-parts-SectionThumbnails__flex_item--3dWDF","hotels-review-list-parts-SectionThumbnails__use3x1--hpqXQ")}return i.createElement("div",{className:"hotels-review-list-parts-SectionThumbnails__flex_grid--3Js-j"},n&&n.filter(function(e){return!!e}).slice(0,3).map(function(e,t){var n=i.createElement(i.Fragment,null,2===t&&l>0&&i.createElement("span",{className:"hotels-review-list-parts-SectionThumbnails__hasCTA--2Ok00"},"+",l),i.createElement(H.ResponsiveImage,{sources:e.photoSizes,width:"100%",height:"128px"}));return i.createElement("div",{className:o,key:e.id||t,onClick:function t(n){return function i(e,t,n,a){Object(w.featureIsEnabled)("hr_mediaviewer_web_component")?Object(q.openMediaViewer)(t,107,a):require(["trjs!actions/openRespPhotoViewer"],function(i){i.open(e,e.currentTarget,t,n,a,2)})}(n,a,r,e.id)}},n)}))};K.defaultProps={photos:[],locationId:-1,geoId:-1};var Q=K,Y={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"HotelsInlineReviewPhotos_REVIEW"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Review"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"locationId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"rating"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"absoluteUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mcid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"translationType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mtProviderId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"photos"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"statuses"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"photoSizes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"width"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"height"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"userProfile"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"username"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:300}};Y.loc.source={body:"00f7e9466a40"};var X=Y,J=function e(t){var n=t.photos,a=t.locationId,r=t.geoId,l=(n||[]).filter(function(e){return!!e&&e.statuses.includes("PUBLISHED")}).slice(0,4);return l&&l.length?i.createElement(Q,{photos:l,locationId:a,geoId:r}):null},Z=function e(t){return t.REVIEW_FIELDS.push(Object(r.getFragment)(X,"HotelsInlineReviewPhotos_REVIEW")),function e(t){var n=t.location,a=t.review;return i.createElement(J,{photos:a.photos,locationId:n&&n.locationId,geoId:n&&n.parentGeoId})}},$=n("@ta/common.radio"),ee=n.n($),te=function e(){return ee()("hr-community-tab").emit("selectTab","RoomTips",!0),!1},ne=function e(t){var n=t.tipText;return n?i.createElement(i.Fragment,null,i.createElement("div",{className:"hotels-review-list-parts-InlineRoomTip__tipline--2BuK_"},i.createElement("span",{className:"hotels-review-list-parts-InlineRoomTip__tiplead--3YGRC"},Object(s.localize)("room_tip_colon_f4"))," ",Object(s.unescaped)(function e(t,n){if(!t||t.length<=n)return t;if(n<3)return"";var i=t.lastIndexOf(" ",n-3);return i<n/2&&(i=n-3),"".concat(t.substring(0,i),"...")}(n||"",100))),i.createElement("div",{className:"taLnk ".concat("hotels-review-list-parts-InlineRoomTip__linkline--2kVFc"),onClick:te},Object(s.localize)("see_more_room_tips_f4"))):null},ie=function e(t){return t.REVIEW_FIELDS.push(Object(r.fragmentFromTemplate)("InlineRoomTip_REVIEW","Review",{roomTip:""})),function e(t){var n=t.review;return i.createElement(ne,{tipText:n&&n.roomTip})}},ae=n("@ta/public.share-cta"),re=n("@ta/social.statistics-bar"),le=n.n(re),oe=n("@ta/social.actions"),se={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"SocialBar_REVIEW"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Review"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"locationId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"helpfulVotes"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"photoIds"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"route"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"socialStatistics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"followCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isFollowing"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isLiked"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isReposted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isSaved"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"likeCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"repostCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tripCount"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userProfile"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isFollowing"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"location"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"locationId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"additionalNames"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"normal"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"long"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"longOnlyParent"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"longParentAbbreviated"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"longOnlyParentAbbreviated"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"longParentStateAbbreviated"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"longOnlyParentStateAbbreviated"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"geo"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"abbreviated"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"abbreviatedRaw"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"abbreviatedStateTerritory"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"abbreviatedStateTerritoryRaw"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"parent"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"locationId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"additionalNames"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"normal"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"long"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"longOnlyParent"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"longParentAbbreviated"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"longOnlyParentAbbreviated"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"longParentStateAbbreviated"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"longOnlyParentStateAbbreviated"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"geo"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"abbreviated"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"abbreviatedRaw"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"abbreviatedStateTerritory"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"abbreviatedStateTerritoryRaw"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"SocialBar_LOCATION"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"LocationInformation"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"locationId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"currentUserOwnerStatus"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isValid"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:1164}};se.loc.source={body:"6e94c6233f67"};var ce=se,ue=Object(h.connect)(function(e){return{viewportCategory:e.meta.device.viewportCategory}})(function e(t){var n,a=t.review,r=t.isActiveOwner,l=t.viewportCategory,o={id:a.id,type:a.__typename},c="/OwnerResponse-d".concat(a.locationId,"?review=").concat(a.id),u=r?i.createElement("div",{className:"hotels-review-list-parts-SocialBar__respondCta--SGKBn",onClick:function e(t){window.open(c,"_blank"),t.preventDefault()}},i.createElement(A.Icon,{name:"reply-fill",className:"hotels-review-list-parts-SocialBar__icon--32m7N"}),i.createElement("span",{className:"hotels-review-list-parts-SocialBar__text--2dxB_"},Object(s.localize)("respond_review_cta"))):null,d=a.userProfile?{modalName:"repost_".concat(a.__typename,"_").concat(a.id),repostPreviewProps:{feedSectionItem:{object:a,reasonFor:null,__typename:"FeedSectionItem"},actor:a.userProfile},actor:a.userProfile,socialStatistics:a.socialStatistics}:void 0;return i.createElement("div",{className:"hotels-review-list-parts-SocialBar__bar--EtXvy"},i.createElement(le.a,{stats:a.socialStatistics,socialRef:o,socialProofParams:{displayName:(null==a?void 0:null===(n=a.userProfile)||void 0===n?void 0:n.displayName)||(null==a?void 0:a.username)}}),i.createElement(oe.SocialActionBar,null,i.createElement(oe.LikeAction,{item:a}),i.createElement(oe.NestedSocialAction,null,"MOBILE"===l?u:null,Object(w.featureIsEnabled)("social_ugc_share")&&a.route?i.createElement(ae.ShareCta,{url:"".concat(a.route.url),itemType:"Review",itemId:a.id,styleAsSocialAction:!0,alignEdge:"right",repostProps:d}):i.createElement(oe.DisabledSocialAction,{actionType:"Share"})),"MOBILE"!==l?u:null))}),de=function e(t){return t.REVIEW_FIELDS.push(Object(r.getFragment)(ce,"SocialBar_REVIEW")),t.LOCATION_FIELDS.push(Object(r.getFragment)(ce,"SocialBar_LOCATION")),function e(t){var n,a=t.review,r=t.location;return i.createElement(ue,{review:a,isActiveOwner:(null==r?void 0:null===(n=r.currentUserOwnerStatus)||void 0===n?void 0:n.isValid)||!1})}},me=n("@ta/common.state"),ve=n("@ta/platform.import"),pe={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"RateMTFooter_REVIEW"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Review"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"locationId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"absoluteUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mcid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"translationType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mtProviderId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"originalLanguage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"rating"},arguments:[],directives:[]}]}}],loc:{start:0,end:138}};pe.loc.source={body:"616299a45a10"};var fe,ge=pe,_e=ve.component.onUsage(((fe=function e(){return n.e("@ta/hotels.rate-mt-footer")}).__PACKAGE__="@ta/hotels.review-list-parts",fe.__MODULE_ID__="@ta/hotels.rate-mt-footer",fe.__MODULE_NAME__="@ta/hotels.rate-mt-footer",fe.__BUNDLE_NAME__="@ta/hotels.rate-mt-footer",fe.__GET_SYNC__=function(){return n.m["@ta/hotels.rate-mt-footer"]?n("@ta/hotels.rate-mt-footer"):null},fe.__IS_LOADED__=function(){return void 0!==n.m["@ta/hotels.rate-mt-footer"]},fe)),he=function e(t){var n=t.review,a=t.readonlyMode,r=t.showOverlay,l=t.userId;return n&&"MACHINE"===n.translationType?(n.mtProviderId||-1)<=0?null:i.createElement(_e,{review:n,readonlyMode:a,userId:l,showOverlay:r}):null},ke=function e(t){return t.REVIEW_FIELDS.push(Object(r.getFragment)(ge,"RateMTFooter_REVIEW")),t.LOCATION_FIELDS.push(null),Object(h.connect)(function(e,t){return{review:t.review,readonlyMode:e.meta.readonlyMode,userId:e.auth.loggedInUserId||e.auth.altSessId}},{showOverlay:me.actions.overlays.showGlobalOverlay})(he)},we=n("@ta/styleguide.skeleton"),Ee=n.n(we),be={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"AdditionalRatings_REVIEW"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Review"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"additionalRatings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"rating"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"ratingLabel"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:101}};be.loc.source={body:"943d5454859b"};var Ne=be,ye=function e(t){var n=t.additionalRatings;return t.isLoading?i.createElement(Ee.a,{height:"10px",marginTop:"10px"}):i.createElement(i.Fragment,null,n&&n.length?i.createElement("div",{className:"hotels-review-list-parts-AdditionalRatings__ratings--2usnH"},n.map(function(e){return i.createElement("div",{className:"hotels-review-list-parts-AdditionalRatings__rating--3lBgs",key:e.ratingLabel},i.createElement("span",{className:"hotels-review-list-parts-AdditionalRatings__bubbleRating--1xiOo"},i.createElement(v.BubbleRating,{rating:e.rating})),Object(s.localize)(e.ratingLabel))})):null)};ye.defaultProps={additionalRatings:null};var Fe=function e(t){return t.REVIEW_FIELDS.push(Object(r.getFragment)(Ne,"AdditionalRatings_REVIEW")),function e(t){var n=t.review;return i.createElement(ye,{isLoading:!1,additionalRatings:n.additionalRatings})}},Se={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"EventDate_REVIEW"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Review"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"tripInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"stayDate"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"location"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"placeType"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:101}};Se.loc.source={body:"3bb4f4a83659"};var Te=Se,Re=function e(t){var n=t.stayDate,i=t.placeType;if(n){var a=function e(t,n){switch(t){case"ACCOMMODATION":return Object(s.localize)("Date_of_stay",n);case"AIRLINE":return Object(s.localize)("Date_of_travel",n);case"ACTIVITY":case"ATTRACTION":return Object(s.localize)("Date_of_experience",n);case"EATERY":return Object(s.localize)("Date_of_visit",n)}return""}(i,{0:"hotels-review-list-parts-EventDate__bold--LcLMP",1:s.globalize.formatDate("date_full_month_year",new Date(n))});return Object(s.unescaped)(a,"hotels-review-list-parts-EventDate__event_date--CRXs4")}return null},Oe=function e(t){return t.REVIEW_FIELDS.push(Object(r.getFragment)(Te,"EventDate_REVIEW")),function e(t){var n=t.review;return i.createElement(Re,{stayDate:n.tripInfo&&n.tripInfo.stayDate,placeType:n.location&&n.location.placeType})}},Ie={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"TripType_REVIEW"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Review"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"tripInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"tripType"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:69}};Ie.loc.source={body:"e94e47135836"};var Ce=Ie,Le=function e(t){var n,a,r=t.isLoading,l=t.tripType;if(r)return i.createElement(Ee.a,{height:"10px",marginTop:"10px"});switch(l){case"BUSINESS":a=1;break;case"COUPLES":a=2;break;case"FAMILY":a=3;break;case"FRIENDS":a=4;break;case"SOLO":a=5;break;default:a=null}if(a){var o=Object(s.localize)("triptype_desc_sentence",{0:a});n=Object(s.localize)("trip_type_sentence",{0:o})}return n?Object(s.unescaped)(n,"hotels-review-list-parts-TripType__trip_type--2cnp7"):null};Le.defaultProps={tripType:null};var Ae=function e(t){return t.REVIEW_FIELDS.push(Object(r.getFragment)(Ce,"TripType_REVIEW")),function e(t){var n=t.review;return i.createElement(Le,{tripType:n.tripInfo&&n.tripInfo.tripType,isLoading:!1})}},je=n("@babel/runtime/helpers/esm/classCallCheck"),xe=n.n(je),De=n("@babel/runtime/helpers/esm/createClass"),Ve=n.n(De),Pe=n("@babel/runtime/helpers/esm/possibleConstructorReturn"),ze=n.n(Pe),Me=n("@babel/runtime/helpers/esm/getPrototypeOf"),Ge=n.n(Me),We=n("@babel/runtime/helpers/esm/inherits"),Ue=n.n(We),Be=n("@babel/runtime/helpers/esm/assertThisInitialized"),He=n.n(Be),qe=n("@babel/runtime/helpers/esm/defineProperty"),Ke=n.n(qe),Qe=n("@ta/common.client"),Ye=n("@ta/common.dates"),Xe=n("@ta/overlays.managers"),Je=n("@ta/styleguide.avatar"),Ze="undefined"==typeof fetch?Promise.resolve(!1):fetch("/static/decodeKey.txt",{method:"HEAD",redirect:"error",credentials:"same-origin"}).then(function(e){return!!e.ok}).catch(function(){return!1}),$e=function e(){return Ze},et=function e(){return i.createElement(i.Fragment,null,i.createElement("span",{className:"hotels-review-list-parts-OwnerResponse__cta--2fbwa"},Object(s.localize)("common_Read_more")),i.createElement(A.Icon,{className:"hotels-review-list-parts-OwnerResponse__caret--3moJ2",name:"caret-down"}))},tt=function e(){return i.createElement(i.Fragment,null,i.createElement("span",{className:"hotels-review-list-parts-OwnerResponse__ctaCollapse--1J_TZ"},Object(s.localize)("common_Readless")),i.createElement(A.Icon,{className:"hotels-review-list-parts-OwnerResponse__caret--3moJ2",name:"caret-up"}))},nt=ve.component.onUsage(function(){var e=function e(){return n.e("@ta/hotels.review-list-parts/ReportOwnerResponseModal.demand").then(n.bind(null,"./packages/hotels/review-list-parts/ReportOwnerResponseModal.jsx"))};return e.__PACKAGE__="@ta/hotels.review-list-parts",e.__MODULE_ID__="./packages/hotels/review-list-parts/ReportOwnerResponseModal.jsx",e.__MODULE_NAME__="ReportOwnerResponseModal",e.__BUNDLE_NAME__="@ta/hotels.review-list-parts/ReportOwnerResponseModal.demand",e.__GET_SYNC__=function(){return n.m["./packages/hotels/review-list-parts/ReportOwnerResponseModal.jsx"]?n("./packages/hotels/review-list-parts/ReportOwnerResponseModal.jsx"):null},e.__IS_LOADED__=function(){return void 0!==n.m["./packages/hotels/review-list-parts/ReportOwnerResponseModal.jsx"]},e}()),it=function(e){function t(){var e,n;xe()(this,t);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return n=ze()(this,(e=Ge()(t)).call.apply(e,[this].concat(a))),Ke()(He()(He()(n)),"state",{isDecodeSafe:void 0}),Ke()(He()(He()(n)),"componentDidMount",function(){$e().then(function(e){n.isUnmounted||n.setState({isDecodeSafe:e})}).catch(function(){return!1})}),Ke()(He()(He()(n)),"componentWillUnmount",function(){n.isUnmounted=!0}),Ke()(He()(He()(n)),"isUnmounted",!1),n}return Ue()(t,e),Ve()(t,[{key:"render",value:function e(){var t=this.props,n=t.userId,a=t.username,r=t.isActiveOwner,l=t.connectionToSubject,o=t.publishedDate,c=t.locationName,u=t.reviewId,d=t.responseId,m=t.text,v=t.language,p=t.expanded,f=t.header,g=t.expandReviews,_=t.translationType,h=t.queryProps;if(!m||"MACHINE"===_&&!this.state.isDecodeSafe)return null;var k=p?m:m.replace(/\n/g," "),w=i.createElement("div",{className:"hotels-review-list-parts-OwnerResponse__containerStyles--JcM5F"},i.createElement(Je.Avatar,{size:"small",display:"inline",alt:"",withBorder:!0,className:"hotels-review-list-parts-OwnerResponse__ownerAvatar--25a8t"}),i.createElement("div",{className:"hotels-review-list-parts-OwnerResponse__header--2FHYg"},a&&l&&Object(s.localize)("hsx_management_response_header",{0:a,1:l,2:c}),o&&i.createElement("div",{className:"hotels-review-list-parts-OwnerResponse__responseDate--3t9J6",title:o},Object(Ye.shouldUseRelativeDate)(new Date(o))?Object(s.localize)("relative_dates_responded_caps",{0:Object(Ye.renderRelativeDate)(new Date(o))}):Object(s.localize)("absolute_dates_responded_caps",{0:Object(Ye.renderAbsoluteDate)(new Date(o))}))),f&&f(h,p),i.createElement(L.ReadMore,{collapsible:!0,cta:et(),ctaCollapse:tt(),ctaNewline:!0,collapsed:!p,initialDivHeight:20,clickCallback:function e(t){return"CTA"===t||"CONTENT"===t&&!p?g([u],!0):"CTA_COLLAPSE"===t&&p&&g([u],!1),!1},numLinesToShow:3},i.createElement("span",{className:"hotels-review-list-parts-OwnerResponse__reviewText--28Wat"},i.createElement(L.DirectionalText,{contentLanguage:v||""},Object(s.unescaped)(S(k))),p&&n&&!r?i.createElement(i.Fragment,null,i.createElement(Xe.Opener,{name:"report_owner_response_".concat(u)},function(e){return i.createElement("span",{className:"hotels-review-list-parts-OwnerResponse__reportResponse--3u1JP",onClick:e},Object(s.localize)("ric_v2_owner_resp_report_probem_with_review_ffffec52"))}),i.createElement(nt,{modalName:"report_owner_response_".concat(u),userId:n,responseId:d})):null)));return"MACHINE"===_?i.createElement(Qe.ClientOnly,null,w):w}}]),t}(i.Component),at=function e(t,n){return t.LOCATION_FIELDS.push(Object(r.fragmentFromTemplate)("OwnerResponse_LOCATION","LocationInformation",{name:"",currentUserOwnerStatus:{isValid:!1}})),t.REVIEW_FIELDS.push(Object(r.fragmentFromTemplate)("OwnerResponse_REVIEW","Review",{text:"",publishedDate:"",username:"",connectionToSubject:"",language:"",mgmtResponse:{id:0,text:"",language:"",publishedDate:"",username:"",connectionToSubject:""}})),Object(h.connect)(function(e,t){var i,a=t.location||{},r=t.review||{},l=r.mgmtResponse||{};return{userId:e.auth.loggedInUserId,reviewId:r.id,responseId:l.id,username:l.username,isActiveOwner:(null==a?void 0:null===(i=a.currentUserOwnerStatus)||void 0===i?void 0:i.isValid)||!1,connectionToSubject:l.connectionToSubject,publishedDate:l.publishedDate,locationName:a.name,text:l.text,language:l.language,translationType:r.translationType,header:n.header,expanded:((Object(E.getState)(e)||{}).expandedReviews||{})[r.id],queryProps:t}},{expandReviews:E.ACTIONS.expandReviews})(it)},rt=n("@ta/overlays.tooltip"),lt=n.n(rt),ot={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"AttributionFooter_REVIEW"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Review"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"locationId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mcid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"attribution"},arguments:[],directives:[]}]}}],loc:{start:0,end:82}};ot.loc.source={body:"100c48086019"};var st=ot,ct=function e(t){var n,a=t.mcid,r=t.attribution;return a&&(r||""===r)?(n=r?Object(s.localize)("RCP_attribution_branded_fffff20a",{0:r}):Object(s.localize)("RCP_attribution_generic_hotel_fffff20a"),i.createElement("div",{className:"hotels-review-list-parts-AttributionDisclaimer__disclaimer--2mPy6"},n,i.createElement(lt.a,{above:!0,message:Object(s.localize)("rcp_review_attribution_update")},function(e){return i.createElement("div",{ref:e,className:"hotels-review-list-parts-AttributionDisclaimer__question_wrapper--2GyC7"},i.createElement(A.Icon,{name:"question-circle",className:"hotels-review-list-parts-AttributionDisclaimer__question--3TCeP"}))}))):null},ut=function e(t){return t.REVIEW_FIELDS.push(Object(r.getFragment)(st,"AttributionFooter_REVIEW")),function e(t){var n=t.review;return i.createElement(ct,{attribution:n.attribution,mcid:n.mcid})}},dt={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"DisclaimerFoot_REVIEW"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Review"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"translationType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"location"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"locationId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"parentGeoId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"provider"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isLocalProvider"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isToolsProvider"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"original"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"locationId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"language"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"submissionDomain"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:260}};dt.loc.source={body:"644a360c9133"};var mt=dt;function vt(e){var t=e||"tripadvisor.com";return t.endsWith("daodao.com")&&(t="tripadvisor.cn"),t.startsWith("www")||(t="www.".concat(t)),t}var pt=function e(t){var n=t.review,a=function r(e,t,n,i){var a;if(a=e.isLocalProvider?Object(s.localize)("userreviewbody_26ec"):e.isToolProvider?Object(s.localize)("userreview_disclaimer_lp_fffffa56"):Object(s.localize)("userreview_25ed"),"HUMAN"===t){var r=Object(b.getLanguageNames)()[n||"en"]||n||"en";a+=Object(s.localize)("userreview_92d",{0:r,1:vt(i)})}return a}(n.provider,n.translationType,n.original?n.original.language:null,n.original?n.original.submissionDomain:null),l=function o(e){return"HUMAN"===e.translationType&&e.original?i.createElement("a",{href:e.original.url},Object(s.localize)("userreview_92e")):null}(n);return a?i.createElement("div",{className:"hotels-review-list-parts-DisclaimerFoot__disclaimer--2Mmz3"},a,l):null},ft=function e(t){return t.REVIEW_FIELDS.push(Object(r.getFragment)(mt,"DisclaimerFoot_REVIEW")),function e(t){var n=t.review;return i.createElement(pt,{review:n})}},gt=n("@ta/styleguide.button"),_t=n.n(gt),ht=n("@ta/overlays.modal"),kt=n("@ta/common.ajax"),wt=function e(t){var n=t.myLang,a=t.sourceLang,r=t.locationId,l=t.geoId,o=t.reviewId,c=t.reviewTranslationType,u=t.showOverlay,d=t.isReviewText;if(c||!(n&&a&&r&&l&&o))return null;if(n.substring(0,2)===a.substring(0,2))return null;var m=a;/^zh..$/.test(a)&&(m="".concat(a.substring(0,2),"-").concat(a.substring(2)));var v="/MachineTranslation?g=".concat(l,"&d=").concat(r,"&r=").concat(o,"&page=review&sl=").concat(m,"&tl=").concat(n),p="GoogleTranslation_".concat(o);return i.createElement("div",{className:B()("hotels-review-list-parts-GoogleTranslateButton__buttonDiv--1ajN4",d?"hotels-review-list-parts-GoogleTranslateButton__reviewText--374rE":null)},i.createElement(_t.a,{type:"secondary",size:"small",onClick:function e(){return u(p)}},Object(s.localize)("mobile_google_translation")),i.createElement(ht.Modal,{name:p},i.createElement("div",{className:"hotels-review-list-parts-GoogleTranslateButton__overlayContainer--ALpi8"},i.createElement(kt.AjaxRequest,{url:v,responseType:"html"},function(e){var t=e.loading,n=e.data;return t||!n?i.createElement(Ee.a,{height:"300px",marginTop:"16px"}):i.createElement("div",{className:"hotels-review-list-parts-GoogleTranslateButton__translateModal--3UPb6",dangerouslySetInnerHTML:{__html:n}})}))))};wt.defaultProps={isReviewText:!1};var Et=function e(t){return t.REVIEW_FIELDS.push(Object(r.fragmentFromTemplate)("GoogleTranslateButton_REVIEW","Review",{language:"",translationType:""})),t.LOCATION_FIELDS.push(Object(r.fragmentFromTemplate)("GoogleTranslateButton_LOCATION","LocationInformation",{parentGeoId:0})),Object(h.connect)(function(e,t){return{myLang:y(e),sourceLang:t.review&&t.review.language||void 0,reviewTranslationType:t.review&&t.review.translationType||void 0,locationId:t.location&&t.location.locationId||void 0,geoId:t.location&&t.location.parentGeoId||void 0,reviewId:t.review&&t.review.id||void 0,isReviewText:!0}},{showOverlay:me.actions.overlays.showGlobalOverlay})(wt)},bt=function e(t){return t.REVIEW_FIELDS.push(Object(r.fragmentFromTemplate)("GoogleTranslateResponseButton_REVIEW","Review",{language:"",translationType:"",mgmtResponse:{id:0,language:"",translationType:""}})),t.LOCATION_FIELDS.push(Object(r.fragmentFromTemplate)("GoogleTranslateResponseButton_LOCATION","LocationInformation",{parentGeoId:0})),Object(h.connect)(function(e,t){return{myLang:y(e),sourceLang:t.review&&t.review.mgmtResponse&&t.review.mgmtResponse.language||void 0,reviewTranslationType:t.review&&t.review.mgmtResponse&&t.review.mgmtResponse.translationType||void 0,locationId:t.location&&t.location.locationId||void 0,geoId:t.location&&t.location.parentGeoId||void 0,reviewId:t.review&&t.review.mgmtResponse&&t.review.mgmtResponse.id||void 0,isReviewText:!1}},{showOverlay:me.actions.overlays.showGlobalOverlay})(wt)},Nt=n("@ta/social.member-event"),yt={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"Header_REVIEW"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Review"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"location"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"locationId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdDate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"publishedDate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userProfile"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"userId"},name:{kind:"Name",value:"id"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"static"},arguments:[]}]},{kind:"Field",name:{kind:"Name",value:"isMe"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isVerified"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"username"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatar"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"photoSizes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"width"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"height"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"hometown"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"locationId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fallbackString"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"location"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"locationId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"additionalNames"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"long"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"contributionCounts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sumAllUgc"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"helpfulVote"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"route"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:578}};yt.loc.source={body:"0be3d16d80c4"};var Ft=yt,St=function e(t){var n=t.review;return n?i.createElement(Nt.MemberEventOnObjectBlock,{objectEventType:"onFullReview",object:n,actor:n.userProfile||{},isEmbedded:!1}):null},Tt=function e(t){return t.REVIEW_FIELDS.push(Object(r.getFragment)(Ft,"Header_REVIEW")),function e(t){var n=t.review;return i.createElement(St,{review:n})}},Rt={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ResponseDisclaimerFoot_REVIEW"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Review"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mgmtResponse"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"provider"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isLocalProvider"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:118}};Rt.loc.source={body:"9d27cb85b721"};var Ot=Rt,It=function e(t){var n=t.review,a=function r(e,t){return e?t&&t.isLocalProvider?Object(s.localize)("userreviewbody_26eb"):Object(s.localize)("userreviewbody_25ed"):null}(n.mgmtResponse,n.provider);return a?i.createElement("div",{className:"hotels-review-list-parts-ResponseDisclaimerFooter__disclaimer--2byqt"},a):null},Ct=function e(t){return t.REVIEW_FIELDS.push(Object(r.getFragment)(Ot,"ResponseDisclaimerFoot_REVIEW")),function e(t){var n=t.review;return i.createElement(It,{review:n})}},Lt=n("@ta/overlays.popover"),At=n.n(Lt),jt={french_disclaimer:"hotels-review-list-parts-ReviewControlNotice__french_disclaimer--3LEPA",french_disclaimer_icon:"hotels-review-list-parts-ReviewControlNotice__french_disclaimer_icon--qmCOH",french_disclaimer_popover:"hotels-review-list-parts-ReviewControlNotice__french_disclaimer_popover--19c2C",inlinify:"hotels-review-list-parts-ReviewControlNotice__inlinify--1vxST"};function xt(){return i.createElement("div",{className:jt.french_disclaimer_popover},Object(s.localize)("Disclaimer_Reviews_Control_Hamon_FR")," ",i.createElement("a",{href:"/pages/service.html"},Object(s.localize)("hotel_info_about_service")," "))}var Dt=function Vt(){return Object(w.featureIsEnabled)("hamon_fr")?i.createElement("div",{className:jt.french_disclaimer},i.createElement("div",{className:jt.inlinify},i.createElement(At.a,{below:!0,alignEdge:"left",closeButton:!1,contents:function e(){return i.createElement(xt,null)}},function(e,t){return i.createElement("div",{ref:e,onClick:t,className:jt.french_disclaimer_icon},i.createElement(A.Icon,{name:"question-circle"}))})),Object(s.localize)("CTA_Review_Control_Hamon_FR")):null},Pt=n("@ta/media.face-pile"),zt=n("@ta/social.socialproof"),Mt=["rating","safety","travelType","travelTime","language","text"],Gt={RATING:"rating",ALERT_STATUS:"safety",SEGMENT:"travelType",MONTH:"travelTime",LANGUAGE:"language",TEXT:"text"},Wt=function e(t,n){return Object(zt.createContributionsQuery)(t,{locationId:n})},Ut=Object(h.connect)(function(){return{}},{setSort:function e(){return E.ACTIONS.setPrefs(Ke()({},"sortType","connectionsFirst"))}})(function e(t){var n=t.locationId,a=t.setSort;return i.createElement(zt.LocationContributionsPoller,{locationId:n},function(e,t){if(t||!e||!e.locations||!e.locations[0]||!e.locations[0].name)return null;var n=e.connectionContributions.contributionsByLocation[0],r=n.userReviewContributions[0],l=["",Object(s.localize)("common_Terrible"),Object(s.localize)("common_Poor"),Object(s.localize)("common_Average"),Object(s.localize)("common_Verygood_fffffabd"),Object(s.localize)("common_Excellent")],o=r.userDisplayInformation.fullname?r.userDisplayInformation.fullname:r.userDisplayInformation.username,c=n.userReviewContributions.map(function(e){return e.userDisplayInformation}).filter(function(e,t,n){return t===n.findIndex(function(t){return t.userId===e.userId})}),u=c.map(function(e){return{withBorder:!0,size:"small",photo:{photoSizes:[{url:e.avatarUrl,width:100,height:100}]}}}),d=l[r.rating],m=c.length>1?Object(s.localize)("socialproof_friends_visited_non_geo",{name_class:"hotels-review-list-parts-ConnectionReviewsCTA__bold_name--1NcGr",n_connections_class:"hotels-review-list-parts-ConnectionReviewsCTA__bold_name--1NcGr",userName:o,numConnections:c.length-1,POI:e.locations[0].name}):Object(s.localize)("hr_connection_reviewed_single_see_said",{name_class:"hotels-review-list-parts-ConnectionReviewsCTA__bold_name--1NcGr",userName:o,rating_class:"hotels-review-list-parts-ConnectionReviewsCTA__bold_name--1NcGr",ratingCategory:d});return i.createElement(j.Track,{click:{module:"reviews_social",action:"click_social_header",once:!0}},i.createElement("div",{className:"hotels-review-list-parts-ConnectionReviewsCTA__pile_and_copy_wrap--1kGJY"},i.createElement("div",{className:"hotels-review-list-parts-ConnectionReviewsCTA__facepile_wrap--36Qyy"},Object(Pt.FacePile)({avatarProps:u,maxFaces:7})),i.createElement("div",null,i.createElement("div",{dangerouslySetInnerHTML:{__html:m}}),i.createElement("div",{className:"hotels-review-list-parts-ConnectionReviewsCTA__cta_green--36ya5",onClick:function e(){return function e(t){var n=document&&document.getElementById("REVIEWS");n&&n.scrollIntoView(!0),t()}(a)}},Object(s.localize)("socialproof_see_their_activity",{numPeople:c.length}),i.createElement(A.Icon,{name:"single-chevron-right-circle-fill",className:"hotels-review-list-parts-ConnectionReviewsCTA__cta_icon--2Xcui"})))))})}),Bt=n("@babel/runtime/helpers/esm/objectSpread"),Ht=n.n(Bt),qt=n("@ta/input.text-input"),Kt=function e(t){return i.createElement("div",{className:"hotels-review-list-parts-ReviewSearchTextInput__wrapper--Wlmd3"},i.createElement(A.Icon,{name:"search",className:"hotels-review-list-parts-ReviewSearchTextInput__icon--SzhB-"}),i.createElement(qt.TextInput,Ht()({},t,{className:B()("hotels-review-list-parts-ReviewSearchTextInput__searchInput--3Ba3a",t.className)})),t.value&&i.createElement("span",{onClick:t.onCTAClick},i.createElement(A.Icon,{name:"times-circle-fill",className:"hotels-review-list-parts-ReviewSearchTextInput__ctaIcon--wCQqP"})))},Qt=function e(t){var n=t.text||[],i=[],a=[];return n.forEach(function(e){"TEXT"===e.axis&&e.selections&&e.selections.forEach(function(e){e&&(a.push(e),e.split(" ").forEach(function(e){e&&""!==e&&i.push(e)}))})}),i.length<1?[]:[{index:0,param:"text",value:a.join(","),label:i.join(" "),tracker:""}]},Yt={setQuery:function e(t){var n=(t||"").trim();return""===n?E.ACTIONS.changeFilters(Ke()({},"text",[])):E.ACTIONS.changeFilters(Ke()({},"text",[{axis:"TEXT",selections:[n]}]))},clearFilters:E.ACTIONS.clearFilters},Xt=function(e){function t(e){var n;return xe()(this,t),n=ze()(this,Ge()(t).call(this,e)),Ke()(He()(He()(n)),"onCTAClick",function(){n.onSubmit(null,"")}),n.state={value:e.query,query:e.query},n}return Ue()(t,e),Ve()(t,null,[{key:"getDerivedStateFromProps",value:function e(t,n){return t.query!==n.query?{value:t.query,query:t.query}:null}}]),Ve()(t,[{key:"onSubmit",value:function e(t,n){n!==this.state.query?(this.setState({value:n}),this.props.setQuery(n),x()({module:"Reviews_Controls",action:"click_search",context:n})):n!==this.state.value&&this.setState({value:n})}},{key:"onChange",value:function e(t,n){this.setState({value:n})}},{key:"onKey",value:function e(t,n){"Enter"===t.key&&this.onSubmit(t,n)}},{key:"render",value:function e(){var t=this;return i.createElement(i.Fragment,null,i.createElement(Kt,{placeholder:Object(s.localize)("Search_reviews_248"),value:this.state.value,onChange:function e(n,i){return t.onChange(n,i)},onKeyUp:function e(n,i){return t.onKey(n,i)},onBlur:function e(n,i){return t.onSubmit(n,i)},onCTAClick:this.onCTAClick}))}}]),t}(i.Component),Jt=Object(h.connect)(function e(t,n){var i=[],a=n.reviewList.filters.text||[],r=n.reviewList.filters.language||[];a.forEach(function(e){"TEXT"===e.axis&&e.selections&&e.selections.forEach(function(e){e&&e.split(" ").forEach(function(e){e&&""!==e&&i.push(e)})})});var l="en"===y(t);return r.forEach(function(e){"LANGUAGE"===e.axis&&e.selections&&e.selections.forEach(function(e){e&&""!==e&&"en"!==e&&(l=!1)})}),Ht()({},n,{keywords:l?n.reviewList.keywords:[],query:i.join(" ")})},Yt)(Xt),Zt=n("@ta/social.skeletons"),$t=n("@ta/hotels.community-pagination-card"),en=n.n($t),tn=Object(h.connect)(function(e,t){return{showMT:!1!==t.reviewList.prefs.showMT}},{mtOn:function e(){return E.ACTIONS.setPrefs(Ke()({},"showMT",!0))},mtOff:function e(){return E.ACTIONS.setPrefs(Ke()({},"showMT",!1))}})(function e(t){var n=t.showMT,a=t.mtOn,r=t.mtOff;return i.createElement("div",{className:"hotels-review-list-parts-MachineTranslationHeader__mt_wrap--2zH53"},i.createElement("span",{className:"hotels-review-list-parts-MachineTranslationHeader__qtext--23bjb"},Object(s.localize)("machine_translated_review_display_toggle"))," ",i.createElement("div",{className:"ui_radio"},i.createElement("input",{type:"radio",id:"autoTranslateYes",value:"true",checked:n,onChange:a}),i.createElement("label",{htmlFor:"autoTranslateYes"},Object(s.localize)("common_Yes"))),i.createElement("div",{className:"ui_radio"},i.createElement("input",{type:"radio",id:"autoTranslateNo",value:"false",checked:!n,onChange:r}),i.createElement("label",{htmlFor:"autoTranslateNo"},Object(s.localize)("common_No"))),i.createElement(lt.a,{above:!0,alignEdge:"right",message:Object(s.localize)("machine_translated_google_disclaimer")},function(e){return i.createElement("span",{ref:e,className:"ui_icon question-circle-fill ".concat("hotels-review-list-parts-MachineTranslationHeader__tip--1KwKL")})}))}),nn={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ReviewListView_LOCATION"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"LocationInformation"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"locationId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"parentGeoId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"accommodationCategory"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"currentUserOwnerStatus"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isValid"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:154}};nn.loc.source={body:"f52b41674075"};var an,rn=nn,ln=function e(t){var n=t.reviewList,a=t.renderReview,r=t.clearFilters,l=t.listQueryProps,o=n.reviews;if(!o)return i.createElement(Zt.FeedLoadingSkeleton,{numSections:5});var c=-1;if(o.length>0)for(var u=0;u<o.length;++u)if("MACHINE"===o[u].translationType||"MACHINE_SOURCE"===o[u].translationType){c=o[u].id;break}if(o.length<1)return i.createElement("div",{className:"ui_alert warning ".concat("hotels-review-list-parts-ReviewListView__no_results_alert--3kljL"),onClick:r},Object(s.unescaped)("".concat(Object(s.localize)("no_results_found")," ").concat(Object(s.localize)("p13n_reviews_no_results_with_query_and_filters_2"))));var d=function e(t){return t.id===c?i.createElement(tn,{reviewList:n}):null};return i.createElement(i.Fragment,null,o.map(function(e){return a?a({queryProps:Ht()({},l,{review:e}),injectHeader:d(e)}):null}))},on=function(e){function t(){return xe()(this,t),ze()(this,Ge()(t).apply(this,arguments))}return Ue()(t,e),Ve()(t,[{key:"render",value:function e(){var t=this.props,n=t.renderHeader,a=t.listQueryProps,r=t.reviewList,l=t.renderReviewFilters,o=t.renderSearchBox,s=t.renderReview,c=t.clearFilters,u=t.changePage;return t.initialRelativeUrl,i.createElement(i.Fragment,null,n?n(a):null,r.hasReviews||r.isLoading?i.createElement(i.Fragment,null,l?l({reviewList:r}):null,o?o({reviewList:r}):null,i.createElement(ln,{reviewList:r,renderReview:s,clearFilters:c,listQueryProps:a})):null,r.totalCount&&r.totalCount>5&&r.page?i.createElement(en.a,{total:r.totalCount,limit:r.page.limit,offset:r.page.offset,module:"Reviews",onClick:function e(t,n){u(t),n.preventDefault()},url:function e(t){return Object(b.getReviewsUrl)(window.location.pathname,t.offset)}}):null)}}]),t}(i.PureComponent),sn=function e(t,n){return t.LOCATION_FIELDS.push(Object(r.getFragment)(rn,"ReviewListView_LOCATION")),Object(h.connect)(function(e,t){return{reviewList:t.reviewList,listQueryProps:t,renderHeader:n.reviewListHeader,renderReview:n.review,renderReviewFilters:n.reviewFilters,renderSearchBox:n.searchBox,initialRelativeUrl:e.meta.initialRelativeUrl}},{changePage:E.ACTIONS.changePage,clearFilters:E.ACTIONS.clearFilters})(on)},cn=n("@babel/runtime/helpers/esm/toConsumableArray"),un=n.n(cn),dn=n("@ta/common.grid"),mn=n("@ta/filters.selection-pills"),vn=n.n(mn),pn=n("@ta/overlays.slide-in"),fn=n.n(pn),gn=n("@ta/input.filter-group"),_n=function e(t){var n=t.children;return i.createElement("div",{className:B()("hotels-review-list-parts-FilterHeader__header--2cKCS")},n)},hn="hotels-review-list-parts-ReviewFilter__filter_table--aaFCz",kn="hotels-review-list-parts-ReviewFilter__row_label--1A-0n",wn="hotels-review-list-parts-ReviewFilter__filter_row--2sfwt",En=function e(){return[Object(s.localize)("common_Terrible"),Object(s.localize)("common_Poor"),Object(s.localize)("common_Average"),Object(s.localize)("common_Good"),Object(s.localize)("common_Excellent")]},bn=function e(t){var n=t.rating||[],i={},a=[],r=En();n.forEach(function(e){"RATING"===e.axis&&e.selections&&e.selections.forEach(function(e){i[e]=!0})});for(var l=5;l>=1;--l)i[l]&&a.push({index:0,param:"rating",value:String(l),label:r[l-1],tracker:""});return a},Nn=Object(h.connect)(function(e,t){return t},{changeFilters:E.ACTIONS.changeFilters})(function e(t){var n=t.reviewList,a=t.displayType,r=t.changeFilters,l=n.ratingCounts,o=l.reduce(function(e,t){return e+t},0),c=[],u=[],d={},m=En();(n.filters.rating||[]).forEach(function(e){"RATING"===e.axis&&e.selections&&e.selections.forEach(function(e){d[e]=!0})});for(var v=function e(t){var n=String(t);d[n]=!d[n];var i=Object.keys(d).filter(function(e){return d[e]}).sort();i.length?r(Ke()({},"rating",[{axis:"RATING",selections:i}])):r(Ke()({},"rating",[])),x()({module:"Reviews_Controls",action:"click_ta_rating",context:n,value:d[n]?1:0})},p=function e(t){var n=0;o>0&&(n=100*l[t-1]/o),c.push(i.createElement("li",{className:"ui_checkbox ".concat(wn),key:t},i.createElement("input",{id:"ReviewRatingFilter_".concat(t),type:"checkbox",value:t,checked:!!d[String(t)],onChange:function e(){return v(t)}}),i.createElement("label",{htmlFor:"ReviewRatingFilter_".concat(t),className:kn},m[t-1]),i.createElement("span",{className:"hotels-review-list-parts-ReviewRatingFilter__row_bar_cell--3Doxw",onClick:function e(){return v(t)}},i.createElement("span",{className:"hotels-review-list-parts-ReviewRatingFilter__row_bar--35huy"},i.createElement("span",{className:"hotels-review-list-parts-ReviewRatingFilter__row_fill--opJP-",style:{width:"".concat(n,"%")}}))),i.createElement("span",{className:"hotels-review-list-parts-ReviewRatingFilter__row_num--gIW_f"},s.globalize.formatNumber("integer",l[t-1])))),d[String(t)]&&u.push({id:String(t),value:m[t-1],active:!0})},f=5;f>=1;--f)p(f);return"dropdown"===a?i.createElement(gn.FilterGroup,{category:"reviews",textTitle:Object(s.localize)("common_Travelerrating"),itemsActive:u,itemsVisible:i.createElement("ul",{className:hn},c)}):i.createElement(i.Fragment,null,i.createElement(_n,null,Object(s.localize)("common_Travelerrating")),i.createElement("ul",{className:hn},c))}),yn=n("@babel/runtime/helpers/esm/slicedToArray"),Fn=n.n(yn),Sn=["True"],Tn=function e(t){if(!Object(w.featureIsEnabled)("health_and_safety_review_alert_web"))return[];var n=t.safety||[],i={},a=[],r=function e(){return[Object(s.localize)("hs_safety_filter_removable")]}();n.forEach(function(e){"ALERT_STATUS"===e.axis&&e.selections&&e.selections.forEach(function(e){i[e]=!0})});for(var l=0;l<Sn.length;++l)i[Sn[l]]&&a.push({index:0,param:"safety",value:Sn[l],label:r[l],tracker:""});return a},Rn=Object(h.connect)(function(e,t){return{filter:t.reviewList.filters.safety||[]}},{changeFilters:E.ACTIONS.changeFilters})(function e(t){var n=t.reviewList,r=t.filter,l=t.displayType,o=t.changeFilters,c=Object(i.useState)(0),u=Fn()(c,2),d=u[0],m=u[1];if(!Object(w.featureIsEnabled)("health_and_safety_review_alert_web")||!(null==n?void 0:n.alertStatusCount)&&0===d)return null;var v=[],p=[],f={};(null==n?void 0:n.alertStatusCount)&&d!==(null==n?void 0:n.alertStatusCount)&&m(n.alertStatusCount);var g=function e(t){return[Object(s.localize)("hs_safety_filter",{0:t})]}(d);r.forEach(function(e){"ALERT_STATUS"===e.axis&&e.selections&&e.selections.forEach(function(e){f[e]=!0})});for(var _=function e(t){v.push(a.a.createElement("li",{className:"ui_checkbox ".concat(wn),key:t},a.a.createElement("input",{id:"HealthAndSafetyFilter_".concat(t),type:"checkbox",value:Sn[t],checked:!!f[Sn[t]],onChange:function e(){return function e(t){f[t]=!f[t];var n=Object.keys(f).filter(function(e){return f[e]}).sort();n.length?o(Ke()({},"safety",[{axis:"ALERT_STATUS",selections:n}])):o(Ke()({},"safety",[])),x()({module:"Reviews_Controls",action:"click_safety_filter",context:t,value:f[t]?1:0})}(Sn[t])}}),a.a.createElement("label",{htmlFor:"HealthAndSafetyFilter_".concat(t),className:kn},g[t]))),f[Sn[t]]&&p.push({id:String(t),value:g[t],active:!0})},h=0;h<Sn.length;++h)_(h);return"dropdown"===l?a.a.createElement(gn.FilterGroup,{category:"reviews",textTitle:Object(s.localize)("hs_traveler_safety_title"),itemsActive:p,itemsVisible:a.a.createElement("ul",{className:hn},v)}):a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"hotels-review-list-parts-HealthAndSafetyFilter__title--3cyu0"},a.a.createElement(_n,null,Object(s.localize)("hs_traveler_safety_title")),a.a.createElement(lt.a,{below:!0,message:Object(s.localize)("hs_safety_tooltip"),maxWidth:222,alignEdge:"left",shiftX:-50,shiftArrow:-8,toggleOnTouch:!0},function(e){return a.a.createElement("span",{ref:e,className:"hotels-review-list-parts-HealthAndSafetyFilter__tooltip--1vOkZ"},a.a.createElement(A.Icon,{name:"information-circle",className:"hotels-review-list-parts-HealthAndSafetyFilter__tooltipIcon--2Vnam"}))})),a.a.createElement(j.Track,{visible:{module:"Reviews_Controls",action:"impression_safety_filter",once:!0}},a.a.createElement("ul",{className:hn},v)))}),On=[[3,4,5],[6,7,8],[9,10,11],[12,1,2]],In=function e(){return[Object(s.localize)("season_mar_may_1cb3"),Object(s.localize)("season_jun_aug_1cb3"),Object(s.localize)("season_sep_nov_1cb3"),Object(s.localize)("season_dec_feb_1cb3")]},Cn=function e(t){var n=t.travelTime||[],i={},a=[],r=In();n.forEach(function(e){"MONTH"===e.axis&&e.selections&&e.selections.forEach(function(e){i[e]=!0})});for(var l=function e(t){var n=!1;On[t].forEach(function(e){n=n||i[String(e)]}),n&&a.push({index:0,param:"travelTime",value:On[t].join(","),label:r[t],tracker:""})},o=0;o<On.length;++o)l(o);return a},Ln=Object(h.connect)(function(e,t){return{filter:t.reviewList.filters.travelTime||[]}},{changeFilters:E.ACTIONS.changeFilters})(function e(t){var n=t.filter,a=t.displayType,r=t.changeFilters,l=[],o=[],c={},u=In();n.forEach(function(e){"MONTH"===e.axis&&e.selections&&e.selections.forEach(function(e){c[e]=!0})});for(var d=function e(t){var n=!1;On[t].forEach(function(e){n=n||c[String(e)]}),l.push(i.createElement("li",{className:"ui_checkbox ".concat(wn),key:t},i.createElement("input",{id:"TravelTimeFilter_".concat(t),type:"checkbox",value:t,checked:!!n,onChange:function e(){return function e(t){var n=!1;On[t].forEach(function(e){n=n||c[String(e)]}),n=!n,On[t].forEach(function(e){c[String(e)]=n});var i=Object.keys(c).filter(function(e){return c[e]}).sort();i.length?r(Ke()({},"travelTime",[{axis:"MONTH",selections:i}])):r(Ke()({},"travelTime",[])),x()({module:"Reviews_Controls",action:"click_season",context:On[t].join(),value:n?1:0})}(t)}}),i.createElement("label",{htmlFor:"TravelTimeFilter_".concat(t),className:kn},u[t]))),n&&o.push({id:String(t),value:u[t],active:!0})},m=0;m<On.length;++m)d(m);return"dropdown"===a?i.createElement(gn.FilterGroup,{category:"reviews",textTitle:Object(s.localize)("p13n_time_of_year"),itemsActive:o,itemsVisible:i.createElement("ul",{className:hn},l)}):i.createElement(i.Fragment,null,i.createElement(_n,null,Object(s.localize)("p13n_time_of_year")),i.createElement("ul",{className:hn},l))}),An=["Family","Couples","Solo","Business","Friends"],jn=function e(){return[Object(s.localize)("favorite_review_travelertype_families"),Object(s.localize)("favorite_review_travelertype_couples"),Object(s.localize)("favorite_review_travelertype_solo"),Object(s.localize)("favorite_review_travelertype_business"),Object(s.localize)("favorite_review_travelertype_friends")]},xn=function e(t){var n=t.travelType||[],i={},a=[],r=jn();n.forEach(function(e){"SEGMENT"===e.axis&&e.selections&&e.selections.forEach(function(e){i[e]=!0})});for(var l=0;l<An.length;++l)i[An[l]]&&a.push({index:0,param:"travelType",value:An[l],label:r[l],tracker:""});return a},Dn=Object(h.connect)(function(e,t){return{filter:t.reviewList.filters.travelType||[]}},{changeFilters:E.ACTIONS.changeFilters})(function e(t){var n=t.filter,a=t.displayType,r=t.changeFilters,l=[],o=[],c={},u=jn();n.forEach(function(e){"SEGMENT"===e.axis&&e.selections&&e.selections.forEach(function(e){c[e]=!0})});for(var d=function e(t){l.push(i.createElement("li",{className:"ui_checkbox ".concat(wn),key:t},i.createElement("input",{id:"TravelTypeFilter_".concat(t),type:"checkbox",value:An[t],checked:!!c[An[t]],onChange:function e(){return function e(t){c[t]=!c[t];var n=Object.keys(c).filter(function(e){return c[e]}).sort();n.length?r(Ke()({},"travelType",[{axis:"SEGMENT",selections:n}])):r(Ke()({},"travelType",[])),x()({module:"Reviews_Controls",action:"click_traveler_filter",context:t,value:c[t]?1:0})}(An[t])}}),i.createElement("label",{htmlFor:"TravelTypeFilter_".concat(t),className:kn},u[t]))),c[An[t]]&&o.push({id:String(t),value:u[t],active:!0})},m=0;m<An.length;++m)d(m);return"dropdown"===a?i.createElement(gn.FilterGroup,{category:"reviews",textTitle:Object(s.localize)("traveler_type"),itemsActive:o,itemsVisible:i.createElement("ul",{className:hn},l)}):i.createElement(i.Fragment,null,i.createElement(_n,null,Object(s.localize)("traveler_type")),i.createElement("ul",{className:hn},l))}),Vn=null,Pn=function e(){return Vn=Vn||Ht()({},Object(b.getLanguageNames)(),{"":Object(s.localize)("common_alllangs_3dd")})},zn=function e(t){var n=t.language||[],i=[],a=Pn();return n.forEach(function(e){"LANGUAGE"===e.axis&&e.selections&&e.selections.forEach(function(e){a[e]&&i.push({index:0,param:"language",value:e,label:a[e],tracker:""})})}),i},Mn=Object(h.connect)(function(e,t){return Ht()({},t,{myLang:y(e)})},{showOverlay:function e(){return me.actions.overlays.showGlobalOverlay("ReviewList_Languages")},hideOverlay:function e(){return me.actions.overlays.hideGlobalOverlay("ReviewList_Languages")},changeFilters:E.ACTIONS.changeFilters,clearFilters:E.ACTIONS.clearFilters})(function e(t){var n=t.reviewList,a=t.displayType,r=t.myLang,l=t.showOverlay,o=t.hideOverlay,c=t.changeFilters,u=t.clearFilters,d=[],m=[],v={},p=n.filters.language||[],f=Pn(),g=Ht()({},n.languageCounts||{});p.forEach(function(e){"LANGUAGE"===e.axis&&e.selections&&e.selections.forEach(function(e){g[e]=g[e]||0,v[e]=!0})}),r&&f[r]&&(g[r]=g[r]||0);for(var _=Object.keys(g).filter(function(e){return f[e]&&!(!g[e]&&!v[e]&&""!==e&&e!==r)}).sort(function(e,t){return g[t]-g[e]||e.localeCompare(t)}),h=-1,k=0;k<_.length;++k)if(v[_[k]]){h=k;break}var w=_.length;if("dropdown"!==a&&w>5&&(w=4,h>=4)){var E=_[h];_.splice(h,1),h=3,_.splice(h,0,E)}for(var b=h>0?_[h]:"",N=function e(t){u(),c(t&&""!==t?Ke()({},"language",[{axis:"LANGUAGE",selections:[t]}]):Ke()({},"language",[])),x()({module:"Reviews_Controls",action:"click_language",context:t}),o()},y=function e(t){d.push(i.createElement("li",{className:"ui_radio ".concat(wn),key:t},i.createElement("input",{id:"LanguageFilter_".concat(t),type:"radio",value:_[t],checked:_[t]===b,onChange:function e(){return N(_[t])}}),i.createElement("label",{htmlFor:"LanguageFilter_".concat(t),className:"hotels-review-list-parts-LanguageFilter__row_label--26g7t"},i.createElement("span",{className:"hotels-review-list-parts-LanguageFilter__no_wrap--3zMxR"},f[_[t]]),i.createElement("span",{className:"".concat("hotels-review-list-parts-LanguageFilter__paren_count--EHwQo")},"(",s.globalize.formatNumber("integer",g[_[t]]||0),")")))),_[t]===b&&""!==_[t]&&m.push({id:String(t),value:f[_[t]],active:!0})},F=0;F<w;++F)y(F);if("dropdown"===a)return i.createElement(gn.FilterGroup,{category:"reviews",textTitle:Object(s.localize)("OwnerResponse_filter_languages_1"),itemsActive:m,itemsVisible:i.createElement("ul",{className:hn},d)});var S=null;if(_.length>w){for(var T=[],R=function e(t){T.push(i.createElement("li",{className:"ui_radio ".concat(wn),key:t},i.createElement("input",{id:"LanguageFilter_".concat(t),type:"radio",value:_[t],checked:_[t]===b,onChange:function e(){return N(_[t])}}),i.createElement("label",{htmlFor:"LanguageFilter_".concat(t),className:kn},f[_[t]]," ",i.createElement("span",{className:"hotels-review-list-parts-LanguageFilter__paren_count--EHwQo"},"(",s.globalize.formatNumber("integer",g[_[t]]||0),")"))))},O=0;O<_.length;++O)R(O);S=i.createElement(i.Fragment,{key:"moreLink"},i.createElement(ht.Modal,{name:"ReviewList_Languages"},i.createElement("ul",{className:hn},T)),i.createElement("div",{onClick:l,className:"".concat("hotels-review-list-parts-LanguageFilter__taLnk--3iBfk")},i.createElement("span",{className:"text"},Object(s.localize)("north_star_more_languages")),i.createElement("span",{className:"ui_icon caret-down"})))}return i.createElement(i.Fragment,null,i.createElement(_n,null,Object(s.localize)("OwnerResponse_filter_languages_1")),i.createElement("ul",{className:hn},d,S))}),Gn=(an={},Ke()(an,"",Object(s.localize)("reviews_all_reviewers")),Ke()(an,"connectionsFirst",Object(s.localize)("ppl_you_know")),an),Wn=Object(h.connect)(function(e,t){return Ht()({},t,{selectedSort:t.reviewList.prefs.sortType})},{updateSort:function e(t){return E.ACTIONS.setPrefs(Ke()({},"sortType",t))}})(function e(t){var n=t.reviewList,a=t.selectedSort,r=t.displayType,l=t.updateSort;return n&&n.locationInfo&&n.locationInfo.locationId?i.createElement(zt.LocationContributionsPoller,{locationId:n.locationInfo.locationId},function(e,t){if(t||!e)return i.createElement("div",null);for(var n=[],o=[],c=Object.keys(Gn),u=Object.prototype.hasOwnProperty.call(Gn,a)?a:"",d=function e(t){n.push(i.createElement("li",{className:"ui_radio ".concat(wn),key:t},i.createElement("input",{id:"ReviewedByRadio_".concat(t),type:"radio",value:c[t],checked:c[t]===u,onChange:function e(){l(c[t]),x()({module:"Reviews_Controls",action:"click_social",context:"people_you_know",value:"connectionsFirst"===c[t]?1:0})}}),i.createElement("label",{htmlFor:"ReviewedByRadio_".concat(t),className:kn},Gn[c[t]]))),c[t]===u&&""!==c[t]&&o.push({id:String(t),value:Gn[c[t]],active:!0})},m=0;m<c.length;++m)d(m);return"dropdown"===r?i.createElement(gn.FilterGroup,{category:"reviews",textTitle:Object(s.localize)("reviewed_by_title"),itemsActive:o,itemsVisible:i.createElement("ul",{className:hn},n)}):i.createElement("div",null,i.createElement(_n,null,Object(s.localize)("reviewed_by_title")),i.createElement("ul",{className:hn},n))}):i.createElement("div",null)}),Un={setQuery:function e(t){var n=(t||"").trim();return""===n?E.ACTIONS.changeFilters(Ke()({},"text",[])):E.ACTIONS.changeFilters(Ke()({},"text",[{axis:"TEXT",selections:[n]}]))}},Bn=function(e){function t(e){var n;return xe()(this,t),(n=ze()(this,Ge()(t).call(this,e))).state={value:e.query,query:e.query},n}return Ue()(t,e),Ve()(t,null,[{key:"getDerivedStateFromProps",value:function e(t,n){return t.query!==n.query?{value:t.query,query:t.query}:null}}]),Ve()(t,[{key:"onSubmit",value:function e(t,n){n!==this.state.query?(this.setState({value:n}),this.props.setQuery(n)):n!==this.state.value&&this.setState({value:n})}},{key:"render",value:function e(){var t=this;return i.createElement(i.Fragment,null,this.props.keywords&&this.props.keywords.length>0&&i.createElement(_n,null,Object(s.localize)("community_popular_mentions")),i.createElement("div",{className:"".concat("hotels-review-list-parts-SearchFilter__button_wrap--3msGA")},function e(t,n,a){var r,l=" ".concat(t," "),o=[];return n&&n.length>0&&(r=n.length>22?n.slice(0,22):n,""===t?o.push(i.createElement("button",{className:"ui_button primary small ".concat("hotels-review-list-parts-SearchFilter__word_button_primary--2fVMp"),key:"*"},Object(s.localize)("airm_all_reviews"))):o.push(i.createElement("button",{className:"ui_button secondary small ".concat("hotels-review-list-parts-SearchFilter__word_button_secondary--1OWD6"),key:"*",onClick:function e(){""!==t&&a("")}},Object(s.localize)("airm_all_reviews"))),r.forEach(function(e){var n=l.indexOf(" ".concat(e," "))>=0;o.push(i.createElement("button",{className:"ui_button ".concat(n?"primary":"secondary"," small ").concat(n?"hotels-review-list-parts-SearchFilter__word_button_primary--2fVMp":"hotels-review-list-parts-SearchFilter__word_button_secondary--1OWD6"),key:e,onClick:function n(){return function e(n){var i=" ".concat(n," "),r=l.indexOf(i)>=0;a(r?l.replace(i," ").trim():"".concat(t," ").concat(n)),x()({module:"Reviews_Controls",action:"click_tag_cloud",context:n,value:r?0:1})}(e)}},e))})),o}(this.state.query,this.props.keywords,function(e){return t.onSubmit(null,e)})))}}]),t}(i.Component),Hn=Object(h.connect)(function e(t,n){var i=[],a=n.reviewList.filters.text||[],r=n.reviewList.filters.language||[];a.forEach(function(e){"TEXT"===e.axis&&e.selections&&e.selections.forEach(function(e){e&&e.split(" ").forEach(function(e){e&&""!==e&&i.push(e)})})});var l="en"===y(t);return r.forEach(function(e){"LANGUAGE"===e.axis&&e.selections&&e.selections.forEach(function(e){e&&""!==e&&"en"!==e&&(l=!1)})}),Ht()({},n,{keywords:l?n.reviewList.keywords:[],query:i.join(" ")})},Un)(Bn),qn=Object(h.connect)(function(e,t){return t},{showOverlay:function e(){return me.actions.overlays.showGlobalOverlay("ReviewList_Filters")},changeFilters:E.ACTIONS.changeFilters})(function e(t){var n=t.reviewList,a=t.showOverlay,r=t.changeFilters;return i.createElement("div",{className:"hotels-review-list-parts-ReviewFilters__filters_wrap--1WMWG"},i.createElement(dn.Columns,null,i.createElement(dn.Column,{mobile:{width:12},width:5},i.createElement(Nn,{reviewList:n}),i.createElement(Rn,{reviewList:n})),i.createElement(dn.Column,{mobile:{shown:!1},tablet:{shown:!0,width:2}},i.createElement(Ln,{reviewList:n})),i.createElement(dn.Column,{mobile:{shown:!1},tablet:{shown:!0,width:2}},i.createElement(Dn,{reviewList:n})),i.createElement(dn.Column,{mobile:{shown:!1},tablet:{shown:!0,width:3}},i.createElement(Mn,{reviewList:n}))),i.createElement("div",{className:"hotels-review-list-parts-ReviewFilters__reverse_order--Cj7XT"},i.createElement("div",{className:"hotels-review-list-parts-ReviewFilters__hide_if_possible--1PEWA"},i.createElement(Wn,{reviewList:n})),i.createElement("div",{className:"hotels-review-list-parts-ReviewFilters__expand_if_possible--3k7XU"},i.createElement("div",{className:"".concat("hotels-review-list-parts-ReviewFilters__pill_wrap--1ZKE3"," is-hidden-tablet")},i.createElement("div",{className:"hotels-review-list-parts-ReviewFilters__filter_title--2ONxE"},Object(s.localize)("hs_selected_filters")),i.createElement(vn.a,{actions:[{label:Object(s.localize)("filter_ffffe84e"),chevron:!0,onClick:a,tracker:""}],selections:[].concat(un()(bn(n.filters)),un()(Tn(n.filters)),un()(xn(n.filters)),un()(Cn(n.filters)),un()(zn(n.filters)),un()(Qt(n.filters))),onClearSelection:function e(t,i){return function e(t,n,i,a){var r=t[i];if(r){var l=Ke()({},a,!0);a.split(",").forEach(function(e){l[e]=!0});var o=r.map(function(e){return Ht()({},e,{selections:(e.selections||[]).filter(function(e){return!l[e]})})}).filter(function(e){return e.selections.length>0});n(Ke()({},i,o))}}(n.filters,r,t,i)}})),i.createElement(Hn,{reviewList:n}))),i.createElement(fn.a,{name:"ReviewList_Filters",slideFrom:"right",bodyContentClass:"hotels-review-list-parts-ReviewFilters__filters_overlay--2tLho",header:i.createElement(i.Fragment,null,i.createElement("div",{className:"hotels-review-list-parts-ReviewFilters__overlay_header--EJ2Z1"},Object(s.localize)("filter_reviews")),i.createElement("div",{className:"hotels-review-list-parts-ReviewFilters__overlay_count--Zul8J"},Object(s.localize)("num_results_plural",{0:n.totalCount||0})))},function(){return i.createElement(i.Fragment,null,i.createElement("div",{className:"hotels-review-list-parts-ReviewFilters__overlay_group--3-BCw"},i.createElement(Nn,{displayType:"dropdown",reviewList:n})),i.createElement("div",{className:"hotels-review-list-parts-ReviewFilters__overlay_group--3-BCw"},i.createElement(Rn,{displayType:"dropdown",reviewList:n})),i.createElement("div",{className:"hotels-review-list-parts-ReviewFilters__overlay_group--3-BCw"},i.createElement(Dn,{displayType:"dropdown",reviewList:n})),i.createElement("div",{className:"hotels-review-list-parts-ReviewFilters__overlay_group--3-BCw"},i.createElement(Ln,{displayType:"dropdown",reviewList:n})),i.createElement("div",{className:"hotels-review-list-parts-ReviewFilters__overlay_group--3-BCw"},i.createElement(Mn,{displayType:"dropdown",reviewList:n})))}))}),Kn=n("react-apollo"),Qn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UpdateReviewSettings"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"key"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"val"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"writePersonalCache"},arguments:[{kind:"Argument",name:{kind:"Name",value:"key"},value:{kind:"Variable",name:{kind:"Name",value:"key"}}},{kind:"Argument",name:{kind:"Name",value:"value"},value:{kind:"Variable",name:{kind:"Name",value:"val"}}}],directives:[]}]}}],loc:{start:0,end:109}};Qn.loc.source={body:"213eb9126e7b"};var Yn=Qn,Xn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ReviewListQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"locationId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"filters"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"FilterConditionInput"}}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"prefs"}},type:{kind:"NamedType",name:{kind:"Name",value:"ReviewListPrefsInput"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"initialPrefs"}},type:{kind:"NamedType",name:{kind:"Name",value:"ReviewListPrefsInput"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"filterCacheKey"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"prefsCacheKey"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"keywordVariant"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"needKeywords"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},defaultValue:{kind:"BooleanValue",value:!0},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"cachedFilters"},name:{kind:"Name",value:"personalCache"},arguments:[{kind:"Argument",name:{kind:"Name",value:"key"},value:{kind:"Variable",name:{kind:"Name",value:"filterCacheKey"}}}],directives:[]},{kind:"Field",alias:{kind:"Name",value:"cachedPrefs"},name:{kind:"Name",value:"personalCache"},arguments:[{kind:"Argument",name:{kind:"Name",value:"key"},value:{kind:"Variable",name:{kind:"Name",value:"prefsCacheKey"}}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"ROOT_FIELDS"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"locations"},arguments:[{kind:"Argument",name:{kind:"Name",value:"locationIds"},value:{kind:"ListValue",values:[{kind:"Variable",name:{kind:"Name",value:"locationId"}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"locationId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"parentGeoId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reviewSummary"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"rating"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"keywords"},arguments:[{kind:"Argument",name:{kind:"Name",value:"variant"},value:{kind:"Variable",name:{kind:"Name",value:"keywordVariant"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"needKeywords"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"keywords"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"keyword"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"LOCATION_FIELDS"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reviewList"},arguments:[{kind:"Argument",name:{kind:"Name",value:"page"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"ObjectField",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}]}},{kind:"Argument",name:{kind:"Name",value:"filters"},value:{kind:"Variable",name:{kind:"Name",value:"filters"}}},{kind:"Argument",name:{kind:"Name",value:"prefs"},value:{kind:"Variable",name:{kind:"Name",value:"prefs"}}},{kind:"Argument",name:{kind:"Name",value:"initialPrefs"},value:{kind:"Variable",name:{kind:"Name",value:"initialPrefs"}}},{kind:"Argument",name:{kind:"Name",value:"filterCacheKey"},value:{kind:"Variable",name:{kind:"Name",value:"filterCacheKey"}}},{kind:"Argument",name:{kind:"Name",value:"prefsCacheKey"},value:{kind:"Variable",name:{kind:"Name",value:"prefsCacheKey"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"ratingCounts"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"languageCounts"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"preferredReviewIds"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"alertStatusCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"REVIEW_LIST_FIELDS"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reviews"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"REVIEW_FIELDS"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:1088}};Xn.loc.source={body:"320161c05c0d"};var Jn=Xn,Zn=function(e){function t(){return xe()(this,t),ze()(this,Ge()(t).apply(this,arguments))}return Ue()(t,e),Ve()(t,[{key:"shouldComponentUpdate",value:function e(t){return t.version>0&&(!this.props||t.version!==this.props.version)}},{key:"componentDidUpdate",value:function e(t){this.props.version>0&&(!t||this.props.version!==t.version)&&this.props.onChange()}},{key:"render",value:function e(){return null}}]),t}(i.Component),$n=n("@babel/runtime/helpers/esm/typeof"),ei=n.n($n),ti=function(e){function t(){return xe()(this,t),ze()(this,Ge()(t).apply(this,arguments))}return Ue()(t,e),Ve()(t,[{key:"componentDidUpdate",value:function e(t){if(this.props.offset!==t.offset){if(!(this.props.navigate&&this.props.route&&"object"===("undefined"==typeof window?"undefined":ei()(window))&&window.history&&document))return;var n=Ht()({},this.props.route,{o:"r".concat(this.props.offset)});this.props.navigate(n,{noHistory:!0});var i=Object(b.getReviewsUrl)(window.location.pathname,this.props.offset);window.history.pushState(n,document.title,i),window.location.hash="#REVIEWS"}}},{key:"render",value:function e(){return null}}]),t}(i.Component),ni=Object(k.withRouteContext)(Object(h.connect)(function(e){return{offset:Object(E.getState)(e).offset}})(ti)),ii=function e(t){return!Object(w.featureIsEnabled)("hotel_review_is_thin_content")&&t?[{axis:"LANGUAGE",selections:[t]}]:[]},ai=function e(t){return"".concat("hotelReviewFilters","_").concat(t)},ri=function e(t,n){var i=Object(E.getState)(t);return{locationId:t.page.detailId,queryNode:n.queryNode,renderList:n.renderList,offset:i.offset||0,filtersVersion:i.filtersVersion||0,filtersMap:i.filters||t.route.q&&{text:[{axis:"TEXT",selections:[t.route.q]}]}||null,prefs:i.prefs,prefsVersion:i.prefsVersion||0,language:y(t),defaultPreferFriendReviews:t.route&&"true"===t.route.preferFriendReviews,urlReviewQuery:t.route.q}},li=function e(t,n){var i=t.locationId,a=t.defaultPreferFriendReviews,r=t.language,l=!!(t.filtersVersion||t.prefsVersion||t.offset),o=[];t.filtersMap&&l?Mt.forEach(function(e){var n,i,a,r,l=t.filtersMap&&t.filtersMap[e]||[];"language"===e&&(null===(n=t.filtersMap)||void 0===n?void 0:n[e])&&(null===(i=t.filtersMap)||void 0===i?void 0:null===(a=i.safety)||void 0===a?void 0:a.length)||o&&(r=o).push.apply(r,un()(l))}):(o=ii(r),t.urlReviewQuery&&o.push({axis:"TEXT",selections:[t.urlReviewQuery]}));var s=a?Ke()({},"sortType","connectionsFirst"):{};return{query:t.queryNode,variables:{locationId:i,offset:t.offset,filters:o,prefs:t.prefsVersion>0&&t.prefs||null,initialPrefs:s,limit:5,filterCacheKey:t.filtersVersion>0?null:ai(i),prefsCacheKey:t.prefsVersion>0?null:"hotelReviewPrefs",needKeywords:!(l&&n),keywordVariant:"location_keywords_v2_llr_order_30_".concat(r)},errorPolicy:"all",skip:!i||i<=0}},oi=function(e){function t(e){var n;return xe()(this,t),n=ze()(this,Ge()(t).call(this,e)),Ke()(He()(He()(n)),"stash",void 0),n.stash={},n.state={},n}return Ue()(t,e),Ve()(t,[{key:"componentDidMount",value:function e(){this.stash.filters&&!this.props.filtersVersion&&this.props.onGotFilters&&this.props.onGotFilters(this.stash.filters),this.stash.prefs&&!this.props.prefsVersion&&this.props.onGotPrefs&&this.props.onGotPrefs(this.stash.prefs)}},{key:"render",value:function e(){var t=this,n=li(this.props,this.stash.keywords);return this.stash.locationId&&this.stash.locationId!==this.props.locationId&&(this.stash={}),this.props.locationId?i.createElement(i.Fragment,null,i.createElement(Kn.Mutation,{mutation:Yn},function(e){return i.createElement(Zn,{version:t.props.filtersVersion,onChange:function i(){return e({variables:{key:ai(t.props.locationId),val:JSON.stringify(n.variables.filters)}})}})}),i.createElement(Kn.Mutation,{mutation:Yn},function(e){return i.createElement(Zn,{version:t.props.prefsVersion,onChange:function t(){return e({variables:{key:"hotelReviewPrefs",val:JSON.stringify(n.variables.prefs)}})}})}),i.createElement(Kn.Query,{query:n.query,variables:n.variables,errorPolicy:n.errorPolicy,skip:n.skip},function(e){var i=e.loading,a=e.data,r=e.error,l=e.refetch,o=a&&a.locations&&a.locations[0],s=!i&&o&&o.reviewList&&!0,c=o&&o.reviewList||{},u=c.page&&c.page.offset||n.variables.offset,d=o&&o.reviewSummary&&o.reviewSummary.count,m=o&&o.keywords&&o.keywords.keywords;m=(m=m&&m.map(function(e){return e&&e.keyword}).filter(function(e){return!!e}))||t.stash.keywords;var v=c.reviews?c.totalCount||0:t.stash.totalCount,p=c.ratingCounts||t.stash.ratingCounts,f=function e(t,n,i){if(!n)return t;var a=Ht()({},t);return Object.keys(n).forEach(function(e){n&&n[e]>(t[e]||0)&&(a[e]=n[e])}),(!t[""]||i&&i>t[""])&&(a[""]=i||0),a}(t.stash.languageCounts||{},c.languageCounts,d),g=t.props.filtersMap||function e(t,n){try{if(!n)return Ke()({},"language",ii(t));var i=JSON.parse(n);if(!i||!i.length||!i.forEach)return{};var a={};return i.forEach(function(e){var t=Gt[e.axis];t&&(a[t]=a[t]||[],a[t].push(e))}),a}catch(e){return{}}}(t.props.language,a&&a.cachedFilters),_=n.variables.prefs||function e(t,n){try{var i;if(!n||"{"!==n.charAt(0))return{};var a=JSON.parse(n);return a?(i={},Ke()(i,"showMT",!!a.showMT),Ke()(i,"sortType",t?"connectionsFirst":a.sortType),i):{}}catch(e){return{}}}(!t.props.prefsVersion&&t.props.defaultPreferFriendReviews,a&&a.cachedPrefs);if(t.stash={locationId:t.props.locationId,keywords:m,totalCount:v,ratingCounts:p,languageCounts:f,filters:g,prefs:_,retryCount:t.stash.retryCount,retryRequested:t.stash.retryRequested},!i)if(s||!r)t.stash.retryRequested=!1,t.stash.retryCount=null;else if(!t.stash.retryRequested){t.stash.retryRequested=!0;var h=(t.stash.retryCount||0)+1;t.stash.retryCount=h,h>=1&&h<=4?setTimeout(function(){t.stash.retryRequested=!1,l()},[1e3,1e3,1500,2200,3500][h]):h>4&&(s=!0)}c=Ht()({},c,{hasReviews:!!d,keywords:m,ratingCounts:p||[0,0,0,0,0],languageCounts:f,totalCount:v,page:{offset:u,limit:5},isLoading:!s,locationInfo:o,filters:g,prefs:_});var k={root:a,location:a&&a.locations&&a.locations[0],reviewList:c};return t.props.renderList(k)}),i.createElement(ni,null)):(this.stash={},this.props.renderList({location:null,root:null,reviewList:{hasReviews:!1,keywords:[],ratingCounts:[0,0,0,0,0],languageCounts:{},page:{offset:0,limit:5},isLoading:!0,filters:{},prefs:{}}}))}}]),t}(i.PureComponent);Ke()(oi,"defaultProps",{offset:0,filtersVersion:0,prefsVersion:0,filtersMap:null,prefs:null,language:"en"});var si=Object(h.connect)(ri,{onGotFilters:E.ACTIONS.gotFilters,onGotPrefs:E.ACTIONS.gotPrefs})(oi),ci=function e(t,n){var a=Object(r.injectFragments)(Jn,t);return t.SSR_QUERIES.push(function e(t){return li(ri(t,{queryNode:a,renderList:n}),null)}),function e(){return i.createElement(si,{queryNode:a,renderList:n})}},ui=n("@ta/common.is-visible"),di=ve.component.onTrigger(function(){var e=function e(){return n.e("@ta/hotels.points-campaign-cta")};return e.__PACKAGE__="@ta/hotels.review-list-parts",e.__MODULE_ID__="@ta/hotels.points-campaign-cta",e.__MODULE_NAME__="@ta/hotels.points-campaign-cta",e.__BUNDLE_NAME__="@ta/hotels.points-campaign-cta",e.__GET_SYNC__=function(){return n.m["@ta/hotels.points-campaign-cta"]?n("@ta/hotels.points-campaign-cta"):null},e.__IS_LOADED__=function(){return void 0!==n.m["@ta/hotels.points-campaign-cta"]},e}()),mi=Fn()(di,2),vi=mi[0],pi=mi[1],fi=function e(t){var n=t.locationId,a=i.useState(null),r=Fn()(a,2),l=r[0],o=r[1],s=Object(ui.useOnVisible)(function(){fetch("/data/1.0/reviewpointscampaign/".concat(n),{method:"GET",credentials:"same-origin"}).then(function(e){if(e.ok)return e.json();throw Error()}).then(function(e){o(e),e&&e.campaignPointValue>0&&vi()}).catch(function(){return!1})},0,1);return i.createElement("div",{ref:s},!l||l.campaignPointValue<=0?null:i.createElement(pi,{campaign:l}))},gi=n("@ta/common.api"),_i=ve.component.onUsage(function(){var e=function e(){return n.e("@ta/hotels.hr-sensitive-issues-badge")};return e.__PACKAGE__="@ta/hotels.review-list-parts",e.__MODULE_ID__="@ta/hotels.hr-sensitive-issues-badge",e.__MODULE_NAME__="@ta/hotels.hr-sensitive-issues-badge",e.__BUNDLE_NAME__="@ta/hotels.hr-sensitive-issues-badge",e.__GET_SYNC__=function(){return n.m["@ta/hotels.hr-sensitive-issues-badge"]?n("@ta/hotels.hr-sensitive-issues-badge"):null},e.__IS_LOADED__=function(){return void 0!==n.m["@ta/hotels.hr-sensitive-issues-badge"]},e}()),hi=Object(gi.bind)(function(e,t){var n=e.page.detailId>0?t("/data/1.0/hotelDetail/".concat(e.page.detailId,"/locationAlert")):null,i=n&&n.get().data;return function(){return i||{}}})(function e(t){return t.message&&t.hasSensitiveIssuesBadge?i.createElement(_i,t):null});n.d(t,"connectReview",function(){return m}),n.d(t,"connectRatingLine",function(){return _}),n.d(t,"connectReviewTitle",function(){return O}),n.d(t,"connectExpando",function(){return W}),n.d(t,"connectInlinePhotos",function(){return Z}),n.d(t,"connectInlineRoomTip",function(){return ie}),n.d(t,"connectSocial",function(){return de}),n.d(t,"connectMTFooter",function(){return ke}),n.d(t,"connectAdditionalRatings",function(){return Fe}),n.d(t,"connectEventDate",function(){return Oe}),n.d(t,"connectTripType",function(){return Ae}),n.d(t,"connectOwnerResponse",function(){return at}),n.d(t,"connectAttributionFooter",function(){return ut}),n.d(t,"connectDisclaimerFooter",function(){return ft}),n.d(t,"connectGoogleTranslateButton",function(){return Et}),n.d(t,"connectHeader",function(){return Tt}),n.d(t,"connectGoogleTranslateResponseButton",function(){return bt}),n.d(t,"connectResponseDisclaimerFooter",function(){return Ct}),n.d(t,"ReviewControlNotice",function(){return Dt}),n.d(t,"ConnectionReviewsCTA",function(){return Ut}),n.d(t,"createConnectionReviewsQuery",function(){return Wt}),n.d(t,"SearchBox",function(){return Jt}),n.d(t,"connectReviewList",function(){return sn}),n.d(t,"ReviewFilters",function(){return qn}),n.d(t,"connectHRQuery",function(){return ci}),n.d(t,"REVIEW_LIST_ACTIONS",function(){return E.ACTIONS}),n.d(t,"ReviewRatingFilter",function(){return Nn}),n.d(t,"getRatingSelections",function(){return bn}),n.d(t,"HealthAndSafetyFilter",function(){return Rn}),n.d(t,"getHealthAndSafetySelections",function(){return Tn}),n.d(t,"TravelTypeFilter",function(){return Dn}),n.d(t,"getSegmentSelections",function(){return xn}),n.d(t,"TravelTimeFilter",function(){return Ln}),n.d(t,"getTimeSelections",function(){return Cn}),n.d(t,"LanguageFilter",function(){return Mn}),n.d(t,"getLanguageSelections",function(){return zn}),n.d(t,"SearchFilter",function(){return Hn}),n.d(t,"ReviewedByRadioFilter",function(){return Wn}),n.d(t,"PointsCampaign",function(){return fi}),n.d(t,"SensitiveIssuesBadge",function(){return hi}),n.d(t,"FILTER_NAME_RATING",function(){return"rating"}),n.d(t,"FILTER_NAME_SAFETY",function(){return"safety"}),n.d(t,"FILTER_NAME_TRAVEL_TYPE",function(){return"travelType"}),n.d(t,"FILTER_NAME_TRAVEL_TIME",function(){return"travelTime"}),n.d(t,"FILTER_NAME_LANGUAGE",function(){return"language"}),n.d(t,"FILTER_NAME_TEXT",function(){return"text"}),n.d(t,"PREF_NAME_SHOWMT",function(){return"showMT"}),n.d(t,"PREF_NAME_SORTTYPE",function(){return"sortType"}),n.d(t,"REVIEW_SORT_DEFAULT",function(){return""}),n.d(t,"REVIEW_SORT_CONNECTIONS_FIRST",function(){return"connectionsFirst"}),n.d(t,"reviewTextEscape",function(){return S}),n.d(t,"contentLangFromState",function(){return y}),n.d(t,"getLanguageNames",function(){return b.getLanguageNames}),n.d(t,"languageDir",function(){return T}),t.default={}}}});
//# sourceMappingURL=hotels.review-list-parts.ee3b28806b.js.map