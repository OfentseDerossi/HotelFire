($WP="undefined"!=typeof $WP?$WP:[]).push({id:"@ta/media-viewer.hash-utils",d:["vendor-babel","@ta/media-viewer.types","ta-common","ta-platform","@ta/hotels.media-album-parts"],e:["./packages/media-viewer/hash-route-utils/HashUtils.js"],x:{"./packages/media-viewer/hash-route-utils/HashUtils.js":["hashRouteStart","oldHashRouteStart","getHash","removeHash","generateUrlHashString","generateMediaViewerState","initDefaults","getMediaViewerState","updateHash","generateMediaViewerStateFromPVRoute"]},m:{"./packages/media-viewer/hash-route-utils/HashUtils.js":function(e,t,a){"use strict";a.r(t),a.d(t,"hashRouteStart",function(){return m}),a.d(t,"oldHashRouteStart",function(){return g}),a.d(t,"getHash",function(){return h}),a.d(t,"removeHash",function(){return f}),a.d(t,"generateUrlHashString",function(){return y}),a.d(t,"generateMediaViewerState",function(){return I}),a.d(t,"initDefaults",function(){return v}),a.d(t,"getMediaViewerState",function(){return w}),a.d(t,"updateHash",function(){return S}),a.d(t,"generateMediaViewerStateFromPVRoute",function(){return H});var r=a("@babel/runtime/helpers/esm/objectSpread"),i=a.n(r),n=a("@babel/runtime/helpers/esm/slicedToArray"),o=a.n(n),d=a("@ta/media-viewer.types"),u=a("@ta/media.common"),s=a("@ta/common.logging"),c=a.n(s),l=a("@ta/hotels.media-album-parts"),m="#/media",g="#photos",h=function e(){if("undefined"!=typeof window){var t,a=(null===(t=window)||void 0===t?void 0:t.location)?window.location.toString():"";return a.substring(a.indexOf("#"))}return""},f=function e(){var t=window.location.toString();if(t.indexOf("#")>0){var a=t.substring(0,t.indexOf("#"));window.history.replaceState(null,document.title,a)}},p={albumId:l.AlbumTypes.ALL_ALBUMS,typeId:Object(d.getMediaGroupIdForString)(Object(u.getMediaFilterToRetrieveAllPhotos)().mediaGroup),categoryId:l.AlbumTypes.ALL_ALBUMS},b=function e(t){switch(t){case"p":case"v":case"pano":return t;default:return"u"}},y=function e(t){var a="".concat(m),r=!1;if(t.locationId?a+="/".concat(t.locationId):(console.error("You must provide a locationId as a minimum to generate a Url Hash"),f()),t.media&&t.media.media){var i=t.media.media,n=i.mediaId,o=i.type;a+="/".concat(n,":").concat(o||"u")}return(t.albumId||t.typeId||t.categoryId)&&(a+="/?",r=!0),r&&((t.albumId||0===t.albumId)&&(a+="albumid=".concat(t.albumId,"&")),(t.typeId||0===t.typeId)&&(a+="type=".concat(t.typeId,"&")),(t.categoryId||0===t.categoryId)&&(a+="category=".concat(t.categoryId,"&")),"&"===a.substring(a.length-1)&&(a=a.substring(0,a.length-1))),a},I=function e(t){var a,r,i,n=t.split("/");n.splice(0,2);var d,u,s,c,l="u";switch(n.length){case 0:break;case 1:a=o()(n,1)[0];break;case 2:if(isNaN(n[1])){var m=o()(n,2);a=m[0],c=m[1]}else{var g=o()(n,2);a=g[0],r=g[1]}break;case 3:var h=o()(n,3);a=h[0],r=h[1],c=h[2];break;default:var f=o()(n,3);a=f[0],r=f[1],c=f[2]}if(c){var p=new URLSearchParams(c);p.has("albumid")&&(d=p.get("albumid")),p.has("type")&&(u=p.get("type")),p.has("category")&&(s=p.get("category"))}if(r){var y=r.split(":");i=Number(y.shift()),l=y.shift()}var I={locationId:Number(a),referenceCompoundMediaId:i?{id:i,type:b(l)}:null,albumId:Number(d),typeId:Number(u),categoryId:Number(s)};return Object.keys(I).filter(function(e){return"referenceCompoundMediaId"!==e}).forEach(function(e){isNaN(I[e])&&delete I[e]}),I},v=function e(t){return i()({},p,t)},w=function e(){return v(I(h()))},S=function e(t){var a=i()({},w(),t),r=y(a);if(window.location.hash!==r)try{window.history.replaceState(null,document.title,r)}catch(e){if("SecurityError"===e.name&&e.message.includes("Attempt to use history.replaceState()"))return void c.a.error("The hash was attempted to be updated too often in too little time, causing a security error",e);throw e}},H=function e(t){var a,r,i,n,o,d=t.replace("#photos;","?"),u=new URLSearchParams(d);return u.has("aggregationId")&&(a=Number(u.get("aggregationId"))),u.has("aggregationId")&&(r=Number(u.get("albumid"))),u.has("aggregationId")&&(i=Number(u.get("filter"))),u.has("ff")?(n=Number(u.get("ff")),o="u"):u.has("panoId")&&(n=Number(u.get("panoId")),o="pano"),n&&o?{referenceCompoundMediaId:{id:n,type:o},albumId:a,typeId:i,categoryId:r}:{albumId:a,typeId:i,categoryId:r}}}}});
//# sourceMappingURL=media-viewer.hash-utils.939f39a7cf.js.map