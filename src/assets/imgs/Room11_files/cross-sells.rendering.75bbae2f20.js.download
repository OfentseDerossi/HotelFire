($WP="undefined"!=typeof $WP?$WP:[]).push({id:"@ta/cross-sells.rendering",d:["vendor-babel","vendor-react-libs","vendor-redux-libs","ta-platform","lithium-platform","@ta/cross-sells.shelves","@ta/cross-sells.items","@ta/cross-sells.logic","@ta/hotels.tracking","@ta/cross-sells.types","@ta/common.webview","ta-common"],e:["./packages/cross-sells/rendering/index.jsx"],x:{"./packages/cross-sells/rendering/index.jsx":["LocationInOrNearViewPort","ShelfRenderer","ShelfItemRenderer","RenderConfigurations","PageLocation","ShelfLoadingSkeleton"]},m:{"./packages/cross-sells/rendering/index.jsx":function(e,t,n){"use strict";n.r(t);var r=n("@babel/runtime/helpers/esm/classCallCheck"),l=n.n(r),s=n("@babel/runtime/helpers/esm/createClass"),o=n.n(s),a=n("@babel/runtime/helpers/esm/possibleConstructorReturn"),i=n.n(a),c=n("@babel/runtime/helpers/esm/getPrototypeOf"),m=n.n(c),u=n("@babel/runtime/helpers/esm/inherits"),d=n.n(u),f=n("@babel/runtime/helpers/esm/assertThisInitialized"),p=n.n(f),h=n("@babel/runtime/helpers/esm/defineProperty"),g=n.n(h),S=n("react"),v=n("react-redux"),y=n("@ta/common.state"),I=n("@ta/common.is-visible"),E=n("@babel/runtime/helpers/esm/objectSpread"),N=n.n(E),b=n("@ta/common.features"),C=n("@ta/cross-sells.logic"),k=n("@ta/cross-sells.types"),T=n("@ta/cross-sells.shelves"),_=function e(t){var n=t.hidden,r=t.className,l=t.children;return S.createElement("div",{className:"".concat(r," ").concat(n?"cross-sells-rendering-Hideable__hidden--2wREY":"")},l)};_.defaultProps={className:"",children:null};var L=_,O=function e(t){var n=t.hidden,r=t.children;return S.createElement(L,{className:"block_wrap ui_section",hidden:n},r)};O.defaultProps={hidden:!1,children:null};var D=O,R=n("@babel/runtime/helpers/esm/toConsumableArray"),A=n.n(R),w=n("@ta/common.webview"),j=n("@ta/cross-sells.items"),x=n("@ta/hotels.tracking"),G=n.n(x),P=n("@ta/common.tracking"),H=function e(t){var n=t.shelfItemStyle,r=Object(j.getItemComponentsFromStyle)(n).Loading;return S.createElement(r,null)};H.defaultProps={shelfItemStyle:j.ItemStyles.LARGE};var V=function(e){function t(){var e,n;l()(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return n=i()(this,(e=m()(t)).call.apply(e,[this].concat(s))),g()(p()(p()(n)),"sponsoredListingImpressionHandler",function(){var e=n.props,t=e.shelfItem,r=e.shelfItemTrackingInfo;Object(C.sponsoredListingImpressionHandler)(r,t.sponsoredListingInfo)}),g()(p()(p()(n)),"customClickHandler",function(){var e=n.props,t=e.shelfItem,r=e.shelfItemTrackingInfo;Object(C.sponsoredListingClickHandler)(t.sponsoredListingInfo,r.locationId,r.indexInList,r.listingKey),Object(C.gaRecordClickHandler)(r)}),g()(p()(p()(n)),"createShelfItem",function(e){var t=n.props,r=t.shelfItemStyle,l=t.shelfItem,s=t.shelfItemTrackingInfo,o=t.servletName,a=Object(j.getItemComponentsFromStyle)(r),i=a.Item,c=a.itemLinkClassName,m=a.itemContainerClassName;return S.createElement(j.ItemInteractions,{detailUrl:l.location.detailUrl,onClick:function t(){return e(x.INTERACTIONS_SOURCE_ELEMENTS.HOTEL_LISTING)},onViewedOnce:n.sponsoredListingImpressionHandler,linkClassName:c,containerClassName:m},null!=s.suppressedSponsoredLocationId&&S.createElement(P.Track,{mount:{module:"sp_suppression_test|".concat(o),action:"selection",context:s.suppressedSponsoredLocationId.toString()}},S.createElement(S.Fragment,null)),S.createElement(i,{shelfItem:l,useMASThumbnail:Object(b.featureIsEnabled)("hotels_media_mas_cross_sells")}))}),n}return d()(t,e),o()(t,[{key:"render",value:function e(){var t=this.props.shelfItemTrackingInfo;return S.createElement(G.a,{hotelListingRenderer:this.createShelfItem,customClickHandler:this.customClickHandler,placementName:t.placementName,listingKey:t.listingKey,impressionKey:t.impressionKey,locationId:t.locationId,interactionsParamName:x.INTERACTIONS_PARAM_NAMES.HOTEL_REVIEW_SERVLET})}}]),t}(S.Component);g()(V,"defaultProps",{shelfItemStyle:j.ItemStyles.LARGE});var F=Object(v.connect)(function(e){return{servletName:e.route.page}})(V),K=function e(t){var n=t.accommodations,r=t.shelfItemTrackingInfoSupplier,l=t.shelfItemStyle,s=n.map(function(e,t){return S.createElement(F,{key:"shelfItem-".concat(e.location.id),shelfItem:e,shelfItemTrackingInfo:r(e,t),shelfItemStyle:l})});return S.createElement("div",{className:"cross-sells-rendering-GridRenderer__borderContainer--6R99b"},S.createElement("div",{className:"cross-sells-rendering-GridRenderer__itemContainer--kweKh"},s),S.createElement(j.AmenitiesComparison,{accommodations:n}),S.createElement(j.AccommodationClassComparison,{accommodations:n}),S.createElement(j.LocationComparison,{accommodations:n}),S.createElement(j.ReviewsComparison,{accommodations:n}))},M={LARGE:{shelfStyle:T.ShelfStyles.LARGE,itemStyle:j.ItemStyles.LARGE},CONDENSED:{shelfStyle:T.ShelfStyles.CONDENSED,itemStyle:j.ItemStyles.CONDENSED},GRID:{shelfStyle:T.ShelfStyles.GRID,itemStyle:j.ItemStyles.GRID},NATIVE:{shelfStyle:T.ShelfStyles.NATIVE,itemStyle:j.ItemStyles.NATIVE}},U=function(e){function t(e){var n;l()(this,t),n=i()(this,m()(t).call(this,e)),g()(p()(p()(n)),"shelfTimingTracker",void 0),g()(p()(p()(n)),"reloadCount",0);var r=e.shelf,s={crossSellType:r.crossSellType,inViewAdditionalTrackingEvent:r.inViewAdditionalTrackingEvent,locationName:e.locationName,rowNumber:e.rowNumber};return n.shelfTimingTracker=new C.ShelfTimingTracker(s),n}return d()(t,e),o()(t,[{key:"shouldComponentUpdate",value:function e(t){return t.shelf.updateWithNewData}},{key:"render",value:function e(){var t=this,n=this.props,r=n.shelf,l=n.renderConfig,s=n.rowNumber,o=n.locationName,a=n.requestNumber,i=r.displayState,c=r.accommodations,m=r.crossSellType,u=r.impressionKey,d=r.placementName,f=r.slotToSuppressedLocationId;if(this.shelfTimingTracker.checkAndStopTracking(r),1===a&&(this.shelfTimingTracker.resetTime(),this.reloadCount+=1),i===k.DisplayState.HIDDEN)return w.NativeBridge.isNativeWebview()&&w.NativeBridge.postToBridge("insufficientCrossSells",1,null),null;var p,h=function e(t,n){return{impressionKey:u,placementName:d,listingKey:t.listingKey,locationId:t.location.id,pageLocation:o,indexInList:n,rowNumber:s,displayPrice:t.displayPrice,suppressedSponsoredLocationId:f[n]}};if(i===k.DisplayState.LOADING){var g=Object(C.getUIAssets)().maxAccommodations,v=g&&g[m]?g[m]:4;p=A()(Array(v)).map(function(e,t){return S.createElement(H,{key:"loading-".concat(t),shelfItemStyle:l.itemStyle})}),l.shelfStyle===T.ShelfStyles.GRID&&(p=S.createElement("div",{style:{display:"flex"}},p))}else p=l.shelfStyle===T.ShelfStyles.GRID?S.createElement(K,{accommodations:c,shelfItemTrackingInfoSupplier:h,shelfItemStyle:l.itemStyle}):c.map(function(e,t){return S.createElement(F,{key:"shelfItem-".concat(e.location.id),shelfItem:e,shelfItemTrackingInfo:h(e,t),shelfItemStyle:l.itemStyle})});var y=Object(T.getShelfComponentFromStyle)(l.shelfStyle);return S.createElement(I.HasBeenVisible,{key:"is-visible-once-".concat(this.reloadCount),onVisible:function e(){return t.shelfTimingTracker.startTracking(r,t.reloadCount)}},function(e){return S.createElement(y,{title:Object(C.getTitleForCrossSellType)(m),seeAllUrl:Object(C.getSeeAllUrlForCrossSellType)(m),crossSellType:m,target:e},p)})}}]),t}(S.Component);g()(U,"defaultProps",{renderConfig:M.LARGE});var W=Object(v.connect)(function(e){var t,n;return{requestNumber:(null===(t=e.page)||void 0===t?void 0:null===(n=t.crossSells)||void 0===n?void 0:n.requestNumber)||0}})(U),z=n("@ta/common.i18n"),q=n("@ta/styleguide.icon"),B=function e(t){var n=t.isOpen,r=t.onClick,l=n?Object(z.localize)("p13n_show_less_341"):Object(z.localize)("p13n_show_more_341"),s=n?"caret-up":"caret-down";return S.createElement("div",{className:"cross-sells-rendering-FooterControl__controller--2zU6x",onClick:r},S.createElement("div",{className:"cross-sells-rendering-FooterControl__text--3G7pX"},l),S.createElement(q.Icon,{name:s}))};B.defaultProps={isOpen:!0,onClick:function e(){}};var $=S.memo(B),X=function(e){function t(){var e,n;l()(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return n=i()(this,(e=m()(t)).call.apply(e,[this].concat(s))),g()(p()(p()(n)),"state",{isOpen:!0}),g()(p()(p()(n)),"handleClick",function(){n.setState(function(e){return{isOpen:!e.isOpen}})}),n}return d()(t,e),o()(t,[{key:"render",value:function e(){var t=this,n=this.state.isOpen,r=this.props.shelves.map(function(e,n){return S.createElement(W,{shelf:e,renderConfig:t.props.renderConfig,key:e.crossSellType,locationName:t.props.locationName,rowNumber:n+1})});return this.props.shelves.every(function(e){return e.displayState===k.DisplayState.HIDDEN})?null:S.createElement(S.Fragment,null,S.createElement("div",{className:"".concat("cross-sells-rendering-CollapsibleFooter__shelf--2TCLv"," ").concat(n?"cross-sells-rendering-CollapsibleFooter__expanded--zZO-9":"")},r),S.createElement($,{isOpen:n,onClick:this.handleClick}))}}]),t}(S.Component),Y=function e(t){var n,r=t.locationData,l=t.renderConfig,s=r.crossSells,o=r.locationName,a=s.filter(function(e){return e.displayState!==k.DisplayState.HIDDEN}),i=a.length;if(0===i)return null;var c=a[0],m=S.createElement(T.Header,{title:Object(C.getDefaultShelfTitle)(),trackingId:"header_".concat(o),underline:!0}),u=S.createElement(W,{shelf:c,renderConfig:l,locationName:o,rowNumber:0,key:c.crossSellType});if(1===i)n=S.createElement(S.Fragment,null,m,u);else{var d=a.slice(1);n=S.createElement(S.Fragment,null,m,u,S.createElement(X,{shelves:d,locationName:o,renderConfig:l}))}return S.createElement(D,{locationName:o},n)},Z=function e(t){var n=t.locationData,r=t.renderConfig,l=n.crossSells,s=n.locationName;if(!l[0])return null;var o=l[0].displayState===k.DisplayState.HIDDEN;return S.createElement(D,{hidden:o,locationName:s},S.createElement(W,{shelf:l[0],locationName:n.locationName,rowNumber:0,renderConfig:r}))},J=function e(){var t=M.LARGE,n=A()(Array(4)).map(function(e,n){return S.createElement(H,{key:"loading-".concat(n),shelfItemStyle:t.itemStyle})});return S.createElement("div",{className:"block_wrap ui_section"},S.createElement("div",{className:"cross-sells-rendering-ShelfLoadingSkeleton__shelfHeader--3j1St"}),S.createElement("div",{className:"".concat("cross-sells-rendering-ShelfLoadingSkeleton__itemContainer--3NaqE"," ui_columns is-mobile")},n))},Q={nat:"native",cg:"comparison grid"},ee=function(e){function t(e){var n;return l()(this,t),(n=i()(this,m()(t).call(this,e))).state={isMultiShelves:void 0},n}return d()(t,e),o()(t,null,[{key:"getDerivedStateFromProps",value:function e(t,n){var r=t.locationData;if(!r)return null;var l=n?N()({},n):{};return l.isMultiShelves=r.crossSells.length>1,l}}]),o()(t,[{key:"render",value:function e(){var t=this.props,n=t.locationData,r=t.locationName,l=t.xsellConfig;if(!n)return Object(b.featureIsEnabled)("hr_react_root_enable")?S.createElement("div",{className:"hidden block_wrap ui_section"}):!Object(b.featureIsEnabled)("hr_xsell_skeleton")||l in Q?null:S.createElement(J,null);var s=function e(t,n){switch(t){case"ar":return"cg"===n?M.GRID:M.CONDENSED;case"br":return"cg"===n?M.GRID:M.LARGE;case"fl":return M.NATIVE;default:return M.LARGE}}(r,l);return this.state.isMultiShelves?S.createElement(Y,{locationData:n,renderConfig:s}):S.createElement(Z,{locationData:n,renderConfig:s})}}]),t}(S.Component),te=Object(v.connect)(function(e,t){var n,r,l,s=null==e?void 0:null===(n=e.page)||void 0===n?void 0:null===(r=n.crossSells)||void 0===r?void 0:null===(l=r.endpointResults)||void 0===l?void 0:l.locationMap,o=null==s?void 0:s[t.locationName];return N()({},t,{locationData:o})})(ee),ne=function(e){function t(){var e,n;l()(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return n=i()(this,(e=m()(t)).call.apply(e,[this].concat(s))),g()(p()(p()(n)),"visibilityChanged",function(){n.props.registerLocation(n.props.locationName)}),n}return d()(t,e),o()(t,[{key:"render",value:function e(){var n=S.createElement(te,{locationName:this.props.locationName,xsellConfig:this.props.xsellConfig});return S.createElement(I.IsVisibleOnce,{threshold:t.getLoadOnScrollThreshold(),onIsVisibleCallback:this.visibilityChanged,makeWrapperHaveDimensions:!0},n)}}]),t}(S.Component);g()(ne,"getLoadOnScrollThreshold",function(){return 500});var re=S.memo(Object(v.connect)(null,{registerLocation:y.actions.page.hotelreview.registerLocation})(ne));n.d(t,"LocationInOrNearViewPort",function(){return re}),n.d(t,"ShelfRenderer",function(){return W}),n.d(t,"ShelfItemRenderer",function(){return F}),n.d(t,"RenderConfigurations",function(){return M}),n.d(t,"PageLocation",function(){return te}),n.d(t,"ShelfLoadingSkeleton",function(){return J})}}});
//# sourceMappingURL=cross-sells.rendering.75bbae2f20.js.map