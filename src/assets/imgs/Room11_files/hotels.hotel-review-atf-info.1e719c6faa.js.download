($WP="undefined"!=typeof $WP?$WP:[]).push({id:"@ta/hotels.hotel-review-atf-info",d:["vendor-babel","vendor-react-libs","ta-platform","lithium-platform","@ta/common.grid","@ta/public.dataroots","@ta/hotels.hotel-review-atf-info-parts","@ta/public.business-listing","@ta/public.graphql-util","@ta/hotels.partner-content-reviews","vendor-apollo-libs"],e:["./packages/hotels/hotel-review-atf-info/hotel-review-atf-info.jsx"],x:{"./packages/hotels/hotel-review-atf-info/hotel-review-atf-info.jsx":["default","ssrQueries"]},m:{"./packages/hotels/hotel-review-atf-info/hotel-review-atf-info.jsx":function(e,t,a){"use strict";a.r(t),a.d(t,"ssrQueries",function(){return k});var n=a("@babel/runtime/helpers/esm/objectSpread"),i=a.n(n),r=a("react"),o=a.n(r),s=a("@ta/common.api"),l=a("@ta/common.features"),c=a("@ta/common.grid"),u=a("@ta/public.dataroots"),d=a("@ta/hotels.hotel-review-atf-info-parts"),m=a("@ta/public.business-listing"),v=a("@ta/public.graphql-util"),b=a("@ta/hotels.partner-content-reviews"),p=a("react-apollo"),f={stagingProcs:[],ssrQueriesList:[],LOCATION_FIELDS:[],PARTNER_REVIEW_SCORE_FRAGMENT:null},E=Object(d.connectBusinessListing)(f),g=Object(d.connectHotelWebsiteLink)(f),h=Object(d.connectClaimListing)(f),w=Object(d.connectHeading)(f),I=Object(d.connectRating)(f),_=Object(d.connectSaveButton)(f),S=Object(d.connectSensitiveIssues)(f),j=Object(d.connectShareButton)(f),y=Object(v.injectFragments)(d.QueryTemplate,f),O=function e(t){var a=t.meta,n=a.commerceCountryId,i=a.initialServletName,r=t.route,o=r.detail,s=r.sponsoredListingLocationIdAttribution,c=a.device.userAgentCategory,u=s===o,d="MOBILE"===c,m="DESKTOP"===c,v=t.i18n.ietfLocale,b=Object(l.featureIsEnabled)("display_restricted_partner_reviews"),p=o?Number(o):-1;return{commerceCountryId:n,isMobile:d,isDesktop:m,isSponsoredAttribution:u,locationId:p,longLocationId:p,servletName:i||"",locale:v,usePartnerReviewScores:b}},L=function e(t){var a=t.commerceCountryId,n=t.isMobile,i=t.isSponsoredAttribution,r=t.locationId,o=t.servletName,s=t.longLocationId,l=t.locale,c=t.usePartnerReviewScores;return{query:y,variables:{commerceCountryId:a,isMobile:n,isSponsoredAttribution:i,locationId:r,servletName:o,longLocationId:s,locale:l,usePartnerReviewScores:c},skip:!r||r<=0,errorPolicy:"all"}};t.default=Object(s.bind)(function(e,t){d.PopIndex.stage(e,t),Object(u.stageAll)(f,e,t);var a=e.route.detail,n=new URLSearchParams({detailLevel:"EXTENDED",allowedFields:"address"}),r=t("/data/1.0/location/".concat(a,"/poiDetails?").concat(n.toString()));return function(){var t,a=r.get().data;return i()({},O(e),{address:(null==a?void 0:a.address)||(null==a?void 0:a.plainTextAddress)||null,transData:null===(t=e.page)||void 0===t?void 0:t.transData})}})(function e(t){var a=L(t),n=t.isDesktop,r=t.address,s=t.transData;return o.a.createElement(p.Query,{query:a.query,variables:a.variables,skip:a.skip,errorPolicy:a.errorPolicy},function(e){var t,a,u=e.data,v=u&&u.locations&&u.locations[0],p=Object(l.featureIsEnabled)("additional_click_source_tracking"),f=Object(l.featureIsEnabled)("ta_message_sensitive_issues_badge"),y=i()({},v||(null==s?void 0:s.location),{address:r||(null==s?void 0:null===(t=s.location)||void 0===t?void 0:t.address)}),O=null;(null==v?void 0:null===(a=v.businessAdvantage)||void 0===a?void 0:a.contactLinks)&&(O=Object(m.remapContacts)(v.businessAdvantage.contactLinks));var L=y&&y.reviewSummary?y.reviewSummary.count:0,k=u&&u.hotelPartnerReviewScores&&u.hotelPartnerReviewScores[0],P=i()({},k),N=0===L&&Object(l.featureIsEnabled)("display_restricted_partner_reviews")&&P?o.a.createElement(b.PartnerReviewScore,{reviewCount:P.reviewCount,averageReviewScore:P.averageReviewScore,attributionUrl:P.attributionUrl,mobileAttributionUrl:P.mobileAttributionUrl}):o.a.createElement(I,{location:y});return o.a.createElement("div",{className:d.styles.wrapper},o.a.createElement(c.Columns,{mobile:!0,multiline:!0},o.a.createElement("div",{className:"ui_column is-12-tablet is-10-mobile ".concat(d.styles.description)},o.a.createElement("div",null,o.a.createElement(w,{additionalClickSourceTracking:p,location:y}),o.a.createElement(h,{location:y})),o.a.createElement("div",{className:d.styles.ratingContainer},N,o.a.createElement(d.PopIndex,{generic:Object(l.featureIsEnabled)("hotels_breadcrumb_improvements")})),Object(l.featureIsEnabled)("hr_atf_ba_hotel_contact")||Object(l.featureIsEnabled)("hr_btf_mvp")?o.a.createElement(g,{contactLinks:O,location:y}):null),o.a.createElement("div",{className:"ui_column is-12-tablet is-2-mobile ".concat(d.styles.actions)},o.a.createElement("div",{className:d.styles.reverseActions},o.a.createElement("div",{className:d.styles.saveShareBlock},Object(l.featureIsEnabled)("social_2018")?o.a.createElement(_,{isDesktop:n,location:y}):null,o.a.createElement(j,{location:y})),o.a.createElement("div",{className:d.styles.businessListingWrapper},o.a.createElement(E,{contactLinks:O,location:y}))))),o.a.createElement(S,{readMoreHref:"#REVIEWS",sensitiveIssuesFlag:f,location:y}))})});var k=function e(t){return[L(O(t))]}}}});
//# sourceMappingURL=hotels.hotel-review-atf-info.1e719c6faa.js.map