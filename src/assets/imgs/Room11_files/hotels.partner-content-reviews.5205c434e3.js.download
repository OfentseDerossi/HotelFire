($WP="undefined"!=typeof $WP?$WP:[]).push({id:"@ta/hotels.partner-content-reviews",d:["vendor-babel","vendor-react-libs","vendor-redux-libs","vendor-apollo-libs","lithium-platform","@ta/hotels.partner-content-shared-components","@ta/hotels.obfuscation","@ta/styleguide.skeleton","@ta/social.scroll","ta-platform","@ta/common.text"],e:["./packages/hotels/partner-content-reviews/index.jsx"],x:{"./packages/hotels/partner-content-reviews/index.jsx":["PartnerReviewsContainer","PartnerReviewScore","default"]},m:{"./packages/hotels/partner-content-reviews/index.jsx":function(e,t,n){"use strict";n.r(t);var r=n("@babel/runtime/helpers/esm/objectSpread"),a=n.n(r),i=n("@babel/runtime/helpers/esm/objectWithoutProperties"),o=n.n(i),l=n("react"),c=n("react-redux"),s=n("react-apollo"),m=n("@ta/common.classnames"),v=n.n(m),d=n("@ta/hotels.partner-content-shared-components"),u=n("@ta/hotels.obfuscation"),_=n("@ta/styleguide.skeleton"),p=n.n(_),w=n("@ta/common.i18n"),k=n("@ta/social.scroll"),b=n("@ta/common.cdn"),g=n("@ta/common.is-visible"),h=n("@ta/common.tracking"),N=n.n(h),f={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PartnerReviews"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"locationId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Long"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"locale"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hotelPartnerReviews"},arguments:[{kind:"Argument",name:{kind:"Name",value:"locationIds"},value:{kind:"ListValue",values:[{kind:"Variable",name:{kind:"Name",value:"locationId"}}]}},{kind:"Argument",name:{kind:"Name",value:"locale"},value:{kind:"Variable",name:{kind:"Name",value:"locale"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reviews"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"partnerId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"attributionUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarInitials"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cons"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"consTruncated"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"headline"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mobileAttributionUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pros"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"prosTruncated"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"score"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"username"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"hotelPartnerReviewScores"},arguments:[{kind:"Argument",name:{kind:"Name",value:"locationIds"},value:{kind:"ListValue",values:[{kind:"Variable",name:{kind:"Name",value:"locationId"}}]}},{kind:"Argument",name:{kind:"Name",value:"locale"},value:{kind:"Variable",name:{kind:"Name",value:"locale"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"attributionUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mobileAttributionUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reviewCount"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:499}};f.loc.source={body:"3f42600a6b31"};var E=f,S=n("@ta/common.text"),y=function e(){N()({module:"hr_btf_partner_reviews_read_more_text",action:"attribution_url_click",context:"Hotel_Review"})},x=function e(t){return t.trim().replace(/\r/g,"").split("\n").map(function(e){return e.trim()}).filter(function(e){return e.length>0})},I=l.memo(function e(t){var n=t.language,r=t.avatarInitials,a=t.author,i=t.createdAt,o=t.score,c=t.title,s=t.pros,m=t.prosTruncated,u=t.cons,_=t.consTruncated,p=t.attributionUrl,k=t.refProperty,b=x(s),g=x(u);return l.createElement("div",{ref:k,className:v()("ui_column","is-4","is-9-mobile","hotels-partner-content-reviews-bookingcom-review__bookingComReview--B_kSv")},l.createElement("div",{className:"hotels-partner-content-reviews-bookingcom-review__reviewHeader--3fiN5"},l.createElement("div",{className:"hotels-partner-content-reviews-bookingcom-review__avatarInitials--bOLya"},r),l.createElement("div",{className:"hotels-partner-content-reviews-bookingcom-review__authorAndTimestamp--1h5kL"},l.createElement("div",{className:"hotels-partner-content-reviews-bookingcom-review__author--192UD"},a),l.createElement("div",{className:"hotels-partner-content-reviews-bookingcom-review__action--3L5sy"},Object(w.localize)("mobile_ugc_review_post_title_suffix"))," ",l.createElement("div",{className:"hotels-partner-content-reviews-bookingcom-review__createdAt--3ahO3"},w.globalize.formatDate("date_medium_month_year",new Date(i))))),l.createElement("div",{className:"hotels-partner-content-reviews-bookingcom-review__reviewBody--2jvus"},l.createElement("div",{className:"hotels-partner-content-reviews-bookingcom-shared-styles__scoreBadge--2USfO"},o<10?w.globalize.formatNumber("one",o):w.globalize.formatNumber("integer",o)),l.createElement("span",{className:"hotels-partner-content-reviews-bookingcom-shared-styles__scoreText--3wJCp"},"/ ",w.globalize.formatNumber("integer",10)),l.createElement("div",{className:"hotels-partner-content-reviews-bookingcom-review__title--1XKjc"},c),b.map(function(e,t){return l.createElement("div",{className:0===t?v()("hotels-partner-content-reviews-bookingcom-review__pro--1SGi3","hotels-partner-content-reviews-bookingcom-review__firstItem--3aCiE"):"hotels-partner-content-reviews-bookingcom-review__pro--1SGi3",key:"pro".concat(t).concat(e.length)},l.createElement(S.DirectionalText,{contentLanguage:n||""},l.createElement("span",{className:"hotels-partner-content-reviews-bookingcom-review__plusSign--3ilj2"}),e,m&&t===b.length-1&&!e.endsWith(".")&&!e.startsWith(".")&&Object(w.unescaped)("&hellip;")))}),g.map(function(e,t){return l.createElement("div",{className:0===t?v()("hotels-partner-content-reviews-bookingcom-review__con--2FhF7","hotels-partner-content-reviews-bookingcom-review__firstItem--3aCiE"):"hotels-partner-content-reviews-bookingcom-review__con--2FhF7",key:"con".concat(t).concat(e.length)},l.createElement(S.DirectionalText,{contentLanguage:n||""},l.createElement("span",{className:"hotels-partner-content-reviews-bookingcom-review__minusSign--2HsFL"}),e,_&&t===g.length-1&&!e.endsWith(".")&&!e.startsWith(".")&&Object(w.unescaped)("&hellip;")))}),l.createElement(d.AttributionLink,{url:p,text:Object(w.localize)("partner_description_read_more_link_text",{sPartnerName:"Booking.com"}),className:"hotels-partner-content-reviews-bookingcom-review__attributionLink--sM5t1",onClickCallback:y})))}),P=function e(t){var n=t.data,r=t.loading,a=v()("ui_card","section","hotels-partner-content-reviews-partner-reviews-container__partnerReviewsContainer--3bGSZ"),i="MOBILE"===n.viewport;if(r||!n)return l.createElement("div",{className:"section"},l.createElement(p.a,{height:i?"80px":"240px"}));if(!n.reviews||!n.reviews.reviews||!n.reviewScore)return null;var o=n.reviews,c=n.reviewScore,s=c.attributionUrl,m=c.mobileAttributionUrl,_=c.reviewCount,h=i?m:s,f=o.reviews.length;if(0===f)return null;var E=l.createElement(b.CdnImage,{src:"/img2/branding/hotels/booking logo.png",alt:"Booking.com",className:"hotels-partner-content-reviews-partner-reviews-container__providerLogo--IBOze"});return l.createElement(g.IsVisibleOnce,{onIsVisibleCallback:function e(){N()({module:"hr_btf_partner_reviews",action:"in_view"})}},l.createElement(u.ObfuscatedContainer,null,l.createElement("div",{className:a},l.createElement("div",{className:"hotels-partner-content-reviews-partner-reviews-container__header--1NKFD"},f>1?Object(w.localize)("partner_reviews_container_need_more_information",{nNumReviews:f,sPartnerName:"Booking.com"}):Object(w.localize)("partner_reviews_container_need_more_information_one_review",{sPartnerName:"Booking.com"})),l.createElement("div",{className:v()("ui_container","hotels-partner-content-reviews-partner-reviews-container__partnerReviewList--2M522")},l.createElement(k.ScrollAffordance,{top:!1,bottom:!1,viewportCategories:["DESKTOP","MOBILE","TABLET"],threshold:20,minDistance:10,snapToEdge:{left:50,top:0,bottom:0,right:50},className:v()("ui_columns","hotels-partner-content-reviews-partner-reviews-container__carousel--1jj3-")},function(e){return o.reviews.map(function(t){return l.createElement(I,{key:t.partnerId,refProperty:e(t.partnerId),language:n.language,avatarInitials:t.avatarInitials,author:t.username,createdAt:t.createdAt,score:t.score,title:t.headline,pros:t.pros,prosTruncated:t.prosTruncated,cons:t.cons,consTruncated:t.consTruncated,attributionUrl:i?t.mobileAttributionUrl:t.attributionUrl})})})),l.createElement(d.AttributionLink,{url:h,header:E,className:"hotels-partner-content-reviews-partner-reviews-container__footer--3XQJn",onClickCallback:function e(){N()({module:"hr_btf_partner_reviews_logo",action:"attribution_url_click",context:"Hotel_Review"})}}),l.createElement(d.AttributionLink,{url:h,text:Object(w.localize)("partner_reviews_container_read_all_reviews",{nNumReviews:_>1?_:"",sPartnerName:"Booking.com"}),className:"hotels-partner-content-reviews-partner-reviews-container__footer--3XQJn",onClickCallback:function e(){N()({module:"hr_btf_partner_reviews_read_all_reviews_text",action:"attribution_url_click",context:"Hotel_Review"})}}))))},R=Object(c.connect)(function(e){return{viewport:e.meta.device.viewportCategory,locale:e.i18n.ietfLocale,language:e.i18n.language}})(function F(e){var t=e.locale,n=e.language,r=e.taReviewList;if(r&&r.reviews&&r.reviews.filter(function(e){return e.originalLanguage===n}).length>=5||!r.locationInfo||!r.locationInfo.locationId)return null;var i=r.locationInfo.locationId,c={query:E,variables:{locationId:i,locale:t},skip:!i||i<0,errorPolicy:"all"};return l.createElement(s.Query,{query:c.query,variables:c.variables,errorPolicy:c.errorPolicy},function(t){var n=t.data,r=o()(t,["data"]).loading||!!c.skip,i=a()({},function s(e,t){return e||!t?{providerName:null,reviewScore:null,reviews:null}:{reviewScore:t.hotelPartnerReviewScores&&t.hotelPartnerReviewScores.length>0?t.hotelPartnerReviewScores[0]:{},reviews:t.hotelPartnerReviews&&t.hotelPartnerReviews.length>0?t.hotelPartnerReviews[0]:{}}}(r,n),e);return l.createElement(P,{loading:r,data:i})})}),C="hotels-partner-content-reviews-partner-review-score__boldText--Z079Y",L=function e(){N()({module:"hr_atf_partner_review_score",action:"attribution_url_click",context:"Hotel_Review"})},O=Object(c.connect)(function(e){return{viewport:e.meta.device.viewportCategory}})(function e(t){var n=t.averageReviewScore,r=t.reviewCount,a=t.attributionUrl,i=t.mobileAttributionUrl,o="MOBILE"===t.viewport?i:a,c=r>1?Object(w.localize)("partner_review_score_review_count_caption",{numReviews:w.globalize.formatNumber("integer",r)}):Object(w.localize)("partner_review_score_review_count_caption_one_review"),s=o?l.createElement(l.Fragment,null,l.createElement("span",{className:"hotels-partner-content-reviews-partner-review-score__detail--1_kqk"},c," - "),l.createElement(d.AttributionLink,{url:o,text:"Booking.com",onClickCallback:L})):l.createElement("span",{className:"hotels-partner-content-reviews-partner-review-score__detail--1_kqk"},c," - ","Booking.com");return l.createElement("div",{className:"hotels-partner-content-reviews-partner-review-score__partnerReviewScore--I59EB"},l.createElement("span",{className:C},w.globalize.formatNumber("one",n)),l.createElement("span",{className:v()(C,"hotels-partner-content-reviews-partner-review-score__separator--1lH-J")},"/"),l.createElement("span",{className:v()(C,"hotels-partner-content-reviews-partner-review-score__maxScore--fsXv3")},w.globalize.formatNumber("integer",10)),s)});n.d(t,"PartnerReviewsContainer",function(){return R}),n.d(t,"PartnerReviewScore",function(){return O}),t.default={}}}});
//# sourceMappingURL=hotels.partner-content-reviews.5205c434e3.js.map